!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.CodeMirror=t()}(this,function(){"use strict";var e=navigator.userAgent,t=navigator.platform,r=/gecko\/\d/i.test(e),i=/MSIE \d/.test(e),n=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(e),o=/Edge\/(\d+)/.exec(e),s=i||n||o,a=s&&(i?document.documentMode||6:+(o||n)[1]),l=!o&&/WebKit\//.test(e),c=l&&/Qt\/\d+\.\d+/.test(e),u=!o&&/Chrome\//.test(e),p=/Opera\//.test(e),h=/Apple Computer/.test(navigator.vendor),d=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(e),f=/PhantomJS/.test(e),g=!o&&/AppleWebKit/.test(e)&&/Mobile\/\w+/.test(e),m=/Android/.test(e),v=g||m||/webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(e),b=g||/Mac/.test(t),y=/\bCrOS\b/.test(e),w=/win/i.test(t),k=p&&e.match(/Version\/(\d*\.\d*)/);(k=k&&Number(k[1]))&&15<=k&&(l=!(p=!1));var x=b&&(c||p&&(null==k||k<12.11)),C=r||s&&9<=a;function L(e){return new RegExp("(^|\\s)"+e+"(?:$|\\s)\\s*")}var S,T=function(e,t){var r,i=e.className,n=L(t).exec(i);n&&(r=i.slice(n.index+n[0].length),e.className=i.slice(0,n.index)+(r?n[1]+r:""))};function N(e){for(var t=e.childNodes.length;0<t;--t)e.removeChild(e.firstChild);return e}function M(e,t){return N(e).appendChild(t)}function _(e,t,r,i){var n=document.createElement(e);if(r&&(n.className=r),i&&(n.style.cssText=i),"string"==typeof t)n.appendChild(document.createTextNode(t));else if(t)for(var o=0;o<t.length;++o)n.appendChild(t[o]);return n}function P(e,t,r,i){var n=_(e,t,r,i);return n.setAttribute("role","presentation"),n}function O(e,t){if(3==t.nodeType&&(t=t.parentNode),e.contains)return e.contains(t);do{if(11==t.nodeType&&(t=t.host),t==e)return!0}while(t=t.parentNode)}function A(){var e;try{e=document.activeElement}catch(t){e=document.body||null}for(;e&&e.shadowRoot&&e.shadowRoot.activeElement;)e=e.shadowRoot.activeElement;return e}function I(e,t){var r=e.className;L(t).test(r)||(e.className+=(r?" ":"")+t)}function H(e,t){for(var r=e.split(" "),i=0;i<r.length;i++)r[i]&&!L(r[i]).test(t)&&(t+=" "+r[i]);return t}S=document.createRange?function(e,t,r,i){var n=document.createRange();return n.setEnd(i||e,r),n.setStart(e,t),n}:function(e,t,r){var i=document.body.createTextRange();try{i.moveToElementText(e.parentNode)}catch(e){return i}return i.collapse(!0),i.moveEnd("character",r),i.moveStart("character",t),i};var D=function(e){e.select()};function W(e){var t=Array.prototype.slice.call(arguments,1);return function(){return e.apply(null,t)}}function z(e,t,r){for(var i in t=t||{},e)!e.hasOwnProperty(i)||!1===r&&t.hasOwnProperty(i)||(t[i]=e[i]);return t}function E(e,t,r,i,n){null==t&&-1==(t=e.search(/[^\s\u00a0]/))&&(t=e.length);for(var o=i||0,s=n||0;;){var a=e.indexOf("\t",o);if(a<0||t<=a)return s+(t-o);s+=a-o,s+=r-s%r,o=a+1}}g?D=function(e){e.selectionStart=0,e.selectionEnd=e.value.length}:s&&(D=function(e){try{e.select()}catch(e){}});var R=function(){this.id=null,this.f=null,this.time=0,this.handler=W(this.onTimeout,this)};function F(e,t){for(var r=0;r<e.length;++r)if(e[r]==t)return r;return-1}R.prototype.onTimeout=function(e){e.id=0,e.time<=+new Date?e.f():setTimeout(e.handler,e.time-new Date)},R.prototype.set=function(e,t){this.f=t;var r=+new Date+e;(!this.id||r<this.time)&&(clearTimeout(this.id),this.id=setTimeout(this.handler,e),this.time=r)};var B=50,j={toString:function(){return"CodeMirror.Pass"}},V={scroll:!1},U={origin:"*mouse"},G={origin:"+move"};function X(e,t,r){for(var i=0,n=0;;){var o=e.indexOf("\t",i);-1==o&&(o=e.length);var s=o-i;if(o==e.length||t<=n+s)return i+Math.min(s,t-n);if(n+=o-i,i=o+1,t<=(n+=r-n%r))return i}}var q=[""];function K(e){for(;q.length<=e;)q.push(Y(q)+" ");return q[e]}function Y(e){return e[e.length-1]}function $(e,t){for(var r=[],i=0;i<e.length;i++)r[i]=t(e[i],i);return r}function Z(){}function J(e,t){var r=Object.create?Object.create(e):(Z.prototype=e,new Z);return t&&z(t,r),r}var Q=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;function ee(e){return/\w/.test(e)||""<e&&(e.toUpperCase()!=e.toLowerCase()||Q.test(e))}function te(e,t){return t?!!(-1<t.source.indexOf("\\w")&&ee(e))||t.test(e):ee(e)}function re(e){for(var t in e)if(e.hasOwnProperty(t)&&e[t])return;return 1}var ie=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/;function ne(e){return 768<=e.charCodeAt(0)&&ie.test(e)}function oe(e,t,r){for(;(r<0?0<t:t<e.length)&&ne(e.charAt(t));)t+=r;return t}function se(e,t,r){for(var i=r<t?-1:1;;){if(t==r)return t;var n=(t+r)/2,o=i<0?Math.ceil(n):Math.floor(n);if(o==t)return e(o)?t:r;e(o)?r=o:t=o+i}}var ae=null;function le(e,t,r){var i;ae=null;for(var n=0;n<e.length;++n){var o=e[n];if(o.from<t&&o.to>t)return n;o.to==t&&(o.from!=o.to&&"before"==r?i=n:ae=n),o.from==t&&(o.from!=o.to&&"before"!=r?i=n:ae=n)}return null!=i?i:ae}var ce,ue,pe,he,de,fe=("bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN","nnnnnnNNr%%r,rNNmmmmmmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmmmnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmnNmmmmmmrrmmNmmmmrr1111111111",ce=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,ue=/[stwN]/,pe=/[LRr]/,he=/[Lb1n]/,de=/[1n]/,function(e,t){var r="ltr"==t?"L":"R";if(0==e.length||"ltr"==t&&!ce.test(e))return!1;for(var i,n=e.length,o=[],s=0;s<n;++s)o.push((i=e.charCodeAt(s))<=247?"bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN".charAt(i):1424<=i&&i<=1524?"R":1536<=i&&i<=1785?"nnnnnnNNr%%r,rNNmmmmmmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmmmnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmnNmmmmmmrrmmNmmmmrr1111111111".charAt(i-1536):1774<=i&&i<=2220?"r":8192<=i&&i<=8203?"w":8204==i?"b":"L");for(var a=0,l=r;a<n;++a){var c=o[a];"m"==c?o[a]=l:l=c}for(var u=0,p=r;u<n;++u){var h=o[u];"1"==h&&"r"==p?o[u]="n":pe.test(h)&&"r"==(p=h)&&(o[u]="R")}for(var d=1,f=o[0];d<n-1;++d){var g=o[d];"+"==g&&"1"==f&&"1"==o[d+1]?o[d]="1":","!=g||f!=o[d+1]||"1"!=f&&"n"!=f||(o[d]=f),f=g}for(var m=0;m<n;++m){var v=o[m];if(","==v)o[m]="N";else if("%"==v){var b=void 0;for(b=m+1;b<n&&"%"==o[b];++b);for(var y=m&&"!"==o[m-1]||b<n&&"1"==o[b]?"1":"N",w=m;w<b;++w)o[w]=y;m=b-1}}for(var k=0,x=r;k<n;++k){var C=o[k];"L"==x&&"1"==C?o[k]="L":pe.test(C)&&(x=C)}for(var L=0;L<n;++L)if(ue.test(o[L])){var S=void 0;for(S=L+1;S<n&&ue.test(o[S]);++S);for(var T="L"==(L?o[L-1]:r),N=T==("L"==(S<n?o[S]:r))?T?"L":"R":r,M=L;M<S;++M)o[M]=N;L=S-1}for(var _,P=[],O=0;O<n;)if(he.test(o[O])){var A=O;for(++O;O<n&&he.test(o[O]);++O);P.push(new ge(0,A,O))}else{var I=O,H=P.length,D="rtl"==t?1:0;for(++O;O<n&&"L"!=o[O];++O);for(var W=I;W<O;)if(de.test(o[W])){I<W&&(P.splice(H,0,new ge(1,I,W)),H+=D);var z=W;for(++W;W<O&&de.test(o[W]);++W);P.splice(H,0,new ge(2,z,W)),H+=D,I=W}else++W;I<O&&P.splice(H,0,new ge(1,I,O))}return"ltr"==t&&(1==P[0].level&&(_=e.match(/^\s+/))&&(P[0].from=_[0].length,P.unshift(new ge(0,0,_[0].length))),1==Y(P).level&&(_=e.match(/\s+$/))&&(Y(P).to-=_[0].length,P.push(new ge(0,n-_[0].length,n)))),"rtl"==t?P.reverse():P});function ge(e,t,r){this.level=e,this.from=t,this.to=r}function me(e,t){var r=e.order;return null==r&&(r=e.order=fe(e.text,t)),r}var ve=[],be=function(e,t,r){var i;e.addEventListener?e.addEventListener(t,r,!1):e.attachEvent?e.attachEvent("on"+t,r):(i=e._handlers||(e._handlers={}))[t]=(i[t]||ve).concat(r)};function ye(e,t){return e._handlers&&e._handlers[t]||ve}function we(e,t,r){var i,n,o;e.removeEventListener?e.removeEventListener(t,r,!1):e.detachEvent?e.detachEvent("on"+t,r):!(n=(i=e._handlers)&&i[t])||-1<(o=F(n,r))&&(i[t]=n.slice(0,o).concat(n.slice(o+1)))}function ke(e,t){var r=ye(e,t);if(r.length)for(var i=Array.prototype.slice.call(arguments,2),n=0;n<r.length;++n)r[n].apply(null,i)}function xe(e,t,r){return"string"==typeof t&&(t={type:t,preventDefault:function(){this.defaultPrevented=!0}}),ke(e,r||t.type,e,t),Me(t)||t.codemirrorIgnore}function Ce(e){var t=e._handlers&&e._handlers.cursorActivity;if(t)for(var r=e.curOp.cursorActivityHandlers||(e.curOp.cursorActivityHandlers=[]),i=0;i<t.length;++i)-1==F(r,t[i])&&r.push(t[i])}function Le(e,t){return 0<ye(e,t).length}function Se(e){e.prototype.on=function(e,t){be(this,e,t)},e.prototype.off=function(e,t){we(this,e,t)}}function Te(e){e.preventDefault?e.preventDefault():e.returnValue=!1}function Ne(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0}function Me(e){return null!=e.defaultPrevented?e.defaultPrevented:0==e.returnValue}function _e(e){Te(e),Ne(e)}function Pe(e){return e.target||e.srcElement}function Oe(e){var t=e.which;return null==t&&(1&e.button?t=1:2&e.button?t=3:4&e.button&&(t=2)),b&&e.ctrlKey&&1==t&&(t=3),t}var Ae,Ie,He=function(){if(s&&a<9)return!1;var e=_("div");return"draggable"in e||"dragDrop"in e}();function De(e){var t;null==Ae&&(t=_("span","​"),M(e,_("span",[t,document.createTextNode("x")])),0!=e.firstChild.offsetHeight&&(Ae=t.offsetWidth<=1&&2<t.offsetHeight&&!(s&&a<8)));var r=Ae?_("span","​"):_("span"," ",null,"display: inline-block; width: 1px; margin-right: -1px");return r.setAttribute("cm-text",""),r}function We(e){if(null!=Ie)return Ie;var t=M(e,document.createTextNode("AخA")),r=S(t,0,1).getBoundingClientRect(),i=S(t,1,2).getBoundingClientRect();return N(e),r&&r.left!=r.right&&(Ie=i.right-r.right<3)}var ze,Ee=3!="\n\nb".split(/\n/).length?function(e){for(var t=0,r=[],i=e.length;t<=i;){var n=e.indexOf("\n",t);-1==n&&(n=e.length);var o=e.slice(t,"\r"==e.charAt(n-1)?n-1:n),s=o.indexOf("\r");-1!=s?(r.push(o.slice(0,s)),t+=s+1):(r.push(o),t=n+1)}return r}:function(e){return e.split(/\r\n?|\n/)},Re=window.getSelection?function(e){try{return e.selectionStart!=e.selectionEnd}catch(e){return!1}}:function(e){var t;try{t=e.ownerDocument.selection.createRange()}catch(e){}return!(!t||t.parentElement()!=e)&&0!=t.compareEndPoints("StartToEnd",t)},Fe="oncopy"in(ze=_("div"))||(ze.setAttribute("oncopy","return;"),"function"==typeof ze.oncopy),Be=null,je={},Ve={};function Ue(e){if("string"==typeof e&&Ve.hasOwnProperty(e))e=Ve[e];else if(e&&"string"==typeof e.name&&Ve.hasOwnProperty(e.name)){var t=Ve[e.name];"string"==typeof t&&(t={name:t}),(e=J(t,e)).name=t.name}else{if("string"==typeof e&&/^[\w\-]+\/[\w\-]+\+xml$/.test(e))return Ue("application/xml");if("string"==typeof e&&/^[\w\-]+\/[\w\-]+\+json$/.test(e))return Ue("application/json")}return"string"==typeof e?{name:e}:e||{name:"null"}}function Ge(e,t){t=Ue(t);var r=je[t.name];if(!r)return Ge(e,"text/plain");var i=r(e,t);if(Xe.hasOwnProperty(t.name)){var n=Xe[t.name];for(var o in n)n.hasOwnProperty(o)&&(i.hasOwnProperty(o)&&(i["_"+o]=i[o]),i[o]=n[o])}if(i.name=t.name,t.helperType&&(i.helperType=t.helperType),t.modeProps)for(var s in t.modeProps)i[s]=t.modeProps[s];return i}var Xe={};function qe(e,t){if(!0===t)return t;if(e.copyState)return e.copyState(t);var r={};for(var i in t){var n=t[i];n instanceof Array&&(n=n.concat([])),r[i]=n}return r}function Ke(e,t){for(var r;e.innerMode&&(r=e.innerMode(t))&&r.mode!=e;)t=r.state,e=r.mode;return r||{mode:e,state:t}}function Ye(e,t,r){return!e.startState||e.startState(t,r)}var $e=function(e,t,r){this.pos=this.start=0,this.string=e,this.tabSize=t||8,this.lastColumnPos=this.lastColumnValue=0,this.lineStart=0,this.lineOracle=r};function Ze(e,t){if((t-=e.first)<0||t>=e.size)throw new Error("There is no line "+(t+e.first)+" in the document.");for(var r=e;!r.lines;)for(var i=0;;++i){var n=r.children[i],o=n.chunkSize();if(t<o){r=n;break}t-=o}return r.lines[t]}function Je(e,t,r){var i=[],n=t.line;return e.iter(t.line,r.line+1,function(e){var o=e.text;n==r.line&&(o=o.slice(0,r.ch)),n==t.line&&(o=o.slice(t.ch)),i.push(o),++n}),i}function Qe(e,t,r){var i=[];return e.iter(t,r,function(e){i.push(e.text)}),i}function et(e,t){var r=t-e.height;if(r)for(var i=e;i;i=i.parent)i.height+=r}function tt(e){if(null==e.parent)return null;for(var t=e.parent,r=F(t.lines,e),i=t.parent;i;i=(t=i).parent)for(var n=0;i.children[n]!=t;++n)r+=i.children[n].chunkSize();return r+t.first}function rt(e,t){var r=e.first;e:do{for(var i=0;i<e.children.length;++i){var n=e.children[i],o=n.height;if(t<o){e=n;continue e}t-=o,r+=n.chunkSize()}return r}while(!e.lines);for(var s=0;s<e.lines.length;++s){var a=e.lines[s].height;if(t<a)break;t-=a}return r+s}function it(e,t){return t>=e.first&&t<e.first+e.size}function nt(e,t){return String(e.lineNumberFormatter(t+e.firstLineNumber))}function ot(e,t,r){if(void 0===r&&(r=null),!(this instanceof ot))return new ot(e,t,r);this.line=e,this.ch=t,this.sticky=r}function st(e,t){return e.line-t.line||e.ch-t.ch}function at(e,t){return e.sticky==t.sticky&&0==st(e,t)}function lt(e){return ot(e.line,e.ch)}function ct(e,t){return st(e,t)<0?t:e}function ut(e,t){return st(e,t)<0?e:t}function pt(e,t){return Math.max(e.first,Math.min(t,e.first+e.size-1))}function ht(e,t){if(t.line<e.first)return ot(e.first,0);var r,i,n,o=e.first+e.size-1;return t.line>o?ot(o,Ze(e,o).text.length):(i=Ze(e,(r=t).line).text.length,null==(n=r.ch)||i<n?ot(r.line,i):n<0?ot(r.line,0):r)}function dt(e,t){for(var r=[],i=0;i<t.length;i++)r[i]=ht(e,t[i]);return r}$e.prototype.eol=function(){return this.pos>=this.string.length},$e.prototype.sol=function(){return this.pos==this.lineStart},$e.prototype.peek=function(){return this.string.charAt(this.pos)||void 0},$e.prototype.next=function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},$e.prototype.eat=function(e){var t=this.string.charAt(this.pos);if("string"==typeof e?t==e:t&&(e.test?e.test(t):e(t)))return++this.pos,t},$e.prototype.eatWhile=function(e){for(var t=this.pos;this.eat(e););return this.pos>t},$e.prototype.eatSpace=function(){for(var e=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>e},$e.prototype.skipToEnd=function(){this.pos=this.string.length},$e.prototype.skipTo=function(e){var t=this.string.indexOf(e,this.pos);if(-1<t)return this.pos=t,!0},$e.prototype.backUp=function(e){this.pos-=e},$e.prototype.column=function(){return this.lastColumnPos<this.start&&(this.lastColumnValue=E(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue-(this.lineStart?E(this.string,this.lineStart,this.tabSize):0)},$e.prototype.indentation=function(){return E(this.string,null,this.tabSize)-(this.lineStart?E(this.string,this.lineStart,this.tabSize):0)},$e.prototype.match=function(e,t,r){if("string"!=typeof e){var i=this.string.slice(this.pos).match(e);return i&&0<i.index?null:(i&&!1!==t&&(this.pos+=i[0].length),i)}function n(e){return r?e.toLowerCase():e}if(n(this.string.substr(this.pos,e.length))==n(e))return!1!==t&&(this.pos+=e.length),!0},$e.prototype.current=function(){return this.string.slice(this.start,this.pos)},$e.prototype.hideFirstChars=function(e,t){this.lineStart+=e;try{return t()}finally{this.lineStart-=e}},$e.prototype.lookAhead=function(e){var t=this.lineOracle;return t&&t.lookAhead(e)},$e.prototype.baseToken=function(){var e=this.lineOracle;return e&&e.baseToken(this.pos)};var ft=function(e,t){this.state=e,this.lookAhead=t},gt=function(e,t,r,i){this.state=t,this.doc=e,this.line=r,this.maxLookAhead=i||0,this.baseTokens=null,this.baseTokenPos=1};function mt(e,t,r,i){var n=[e.state.modeGen],o={};St(e,t.text,e.doc.mode,r,function(e,t){return n.push(e,t)},o,i);for(var s=r.state,a=function(i){r.baseTokens=n;var a=e.state.overlays[i],l=1,c=0;r.state=!0,St(e,t.text,a.mode,r,function(e,t){for(var r=l;c<e;){var i=n[l];e<i&&n.splice(l,1,e,n[l+1],i),l+=2,c=Math.min(e,i)}if(t)if(a.opaque)n.splice(r,l-r,e,"overlay "+t),l=r+2;else for(;r<l;r+=2){var o=n[r+1];n[r+1]=(o?o+" ":"")+"overlay "+t}},o),r.state=s,r.baseTokens=null,r.baseTokenPos=1},l=0;l<e.state.overlays.length;++l)a(l);return{styles:n,classes:o.bgClass||o.textClass?o:null}}function vt(e,t,r){var i,n,o;return t.styles&&t.styles[0]==e.state.modeGen||(i=bt(e,tt(t)),n=t.text.length>e.options.maxHighlightLength&&qe(e.doc.mode,i.state),o=mt(e,t,i),n&&(i.state=n),t.stateAfter=i.save(!n),t.styles=o.styles,o.classes?t.styleClasses=o.classes:t.styleClasses&&(t.styleClasses=null),r===e.doc.highlightFrontier&&(e.doc.modeFrontier=Math.max(e.doc.modeFrontier,++e.doc.highlightFrontier))),t.styles}function bt(e,t,r){var i=e.doc,n=e.display;if(!i.mode.startState)return new gt(i,!0,t);var o=function(e,t,r){for(var i,n,o=e.doc,s=r?-1:t-(e.doc.mode.innerMode?1e3:100),a=t;s<a;--a){if(a<=o.first)return o.first;var l=Ze(o,a-1),c=l.stateAfter;if(c&&(!r||a+(c instanceof ft?c.lookAhead:0)<=o.modeFrontier))return a;var u=E(l.text,null,e.options.tabSize);(null==n||u<i)&&(n=a-1,i=u)}return n}(e,t,r),s=o>i.first&&Ze(i,o-1).stateAfter,a=s?gt.fromSaved(i,s,o):new gt(i,Ye(i.mode),o);return i.iter(o,t,function(r){yt(e,r.text,a);var i=a.line;r.stateAfter=i==t-1||i%5==0||i>=n.viewFrom&&i<n.viewTo?a.save():null,a.nextLine()}),r&&(i.modeFrontier=a.line),a}function yt(e,t,r,i){var n=e.doc.mode,o=new $e(t,e.options.tabSize,r);for(o.start=o.pos=i||0,""==t&&wt(n,r.state);!o.eol();)kt(n,o,r.state),o.start=o.pos}function wt(e,t){if(e.blankLine)return e.blankLine(t);if(e.innerMode){var r=Ke(e,t);return r.mode.blankLine?r.mode.blankLine(r.state):void 0}}function kt(e,t,r,i){for(var n=0;n<10;n++){i&&(i[0]=Ke(e,r).mode);var o=e.token(t,r);if(t.pos>t.start)return o}throw new Error("Mode "+e.name+" failed to advance stream.")}gt.prototype.lookAhead=function(e){var t=this.doc.getLine(this.line+e);return null!=t&&e>this.maxLookAhead&&(this.maxLookAhead=e),t},gt.prototype.baseToken=function(e){if(!this.baseTokens)return null;for(;this.baseTokens[this.baseTokenPos]<=e;)this.baseTokenPos+=2;var t=this.baseTokens[this.baseTokenPos+1];return{type:t&&t.replace(/( |^)overlay .*/,""),size:this.baseTokens[this.baseTokenPos]-e}},gt.prototype.nextLine=function(){this.line++,0<this.maxLookAhead&&this.maxLookAhead--},gt.fromSaved=function(e,t,r){return t instanceof ft?new gt(e,qe(e.mode,t.state),r,t.lookAhead):new gt(e,qe(e.mode,t),r)},gt.prototype.save=function(e){var t=!1!==e?qe(this.doc.mode,this.state):this.state;return 0<this.maxLookAhead?new ft(t,this.maxLookAhead):t};var xt=function(e,t,r){this.start=e.start,this.end=e.pos,this.string=e.current(),this.type=t||null,this.state=r};function Ct(e,t,r,i){var n,o,s=e.doc,a=s.mode,l=Ze(s,(t=ht(s,t)).line),c=bt(e,t.line,r),u=new $e(l.text,e.options.tabSize,c);for(i&&(o=[]);(i||u.pos<t.ch)&&!u.eol();)u.start=u.pos,n=kt(a,u,c.state),i&&o.push(new xt(u,n,qe(s.mode,c.state)));return i?o:new xt(u,n,c.state)}function Lt(e,t){if(e)for(;;){var r=e.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!r)break;e=e.slice(0,r.index)+e.slice(r.index+r[0].length);var i=r[1]?"bgClass":"textClass";null==t[i]?t[i]=r[2]:new RegExp("(?:^|\\s)"+r[2]+"(?:$|\\s)").test(t[i])||(t[i]+=" "+r[2])}return e}function St(e,t,r,i,n,o,s){var a=r.flattenSpans;null==a&&(a=e.options.flattenSpans);var l=0,c=null,u=new $e(t,e.options.tabSize,i),p=e.options.addModeClass&&[null];for(""==t&&Lt(wt(r,i.state),o);!u.eol();){var h,d=u.pos>e.options.maxHighlightLength?(a=!1,s&&yt(e,t,i,u.pos),u.pos=t.length,null):Lt(kt(r,u,i.state,p),o);if(!p||(h=p[0].name)&&(d="m-"+(d?h+" "+d:h)),!a||c!=d){for(;l<u.start;)n(l=Math.min(u.start,l+5e3),c);c=d}u.start=u.pos}for(;l<u.pos;){var f=Math.min(u.pos,l+5e3);n(f,c),l=f}}var Tt=!1,Nt=!1;function Mt(e,t,r){this.marker=e,this.from=t,this.to=r}function _t(e,t){if(e)for(var r=0;r<e.length;++r){var i=e[r];if(i.marker==t)return i}}function Pt(e,t){for(var r,i=0;i<e.length;++i)e[i]!=t&&(r=r||[]).push(e[i]);return r}function Ot(e,t){if(t.full)return null;var r=it(e,t.from.line)&&Ze(e,t.from.line).markedSpans,i=it(e,t.to.line)&&Ze(e,t.to.line).markedSpans;if(!r&&!i)return null;var n=t.from.ch,o=t.to.ch,s=0==st(t.from,t.to),a=function(e,t,r){var i;if(e)for(var n=0;n<e.length;++n){var o,s=e[n],a=s.marker;null!=s.from&&!(a.inclusiveLeft?s.from<=t:s.from<t)&&(s.from!=t||"bookmark"!=a.type||r&&s.marker.insertLeft)||(o=null==s.to||(a.inclusiveRight?s.to>=t:s.to>t),(i=i||[]).push(new Mt(a,s.from,o?null:s.to)))}return i}(r,n,s),l=function(e,t,r){var i;if(e)for(var n=0;n<e.length;++n){var o,s=e[n],a=s.marker;null!=s.to&&!(a.inclusiveRight?s.to>=t:s.to>t)&&(s.from!=t||"bookmark"!=a.type||r&&!s.marker.insertLeft)||(o=null==s.from||(a.inclusiveLeft?s.from<=t:s.from<t),(i=i||[]).push(new Mt(a,o?null:s.from-t,null==s.to?null:s.to-t)))}return i}(i,o,s),c=1==t.text.length,u=Y(t.text).length+(c?n:0);if(a)for(var p=0;p<a.length;++p){var h,d=a[p];null==d.to&&((h=_t(l,d.marker))?c&&(d.to=null==h.to?null:h.to+u):d.to=n)}if(l)for(var f=0;f<l.length;++f){var g=l[f];null!=g.to&&(g.to+=u),null==g.from?_t(a,g.marker)||(g.from=u,c&&(a=a||[]).push(g)):(g.from+=u,c&&(a=a||[]).push(g))}a=a&&At(a),l&&l!=a&&(l=At(l));var m=[a];if(!c){var v,b=t.text.length-2;if(0<b&&a)for(var y=0;y<a.length;++y)null==a[y].to&&(v=v||[]).push(new Mt(a[y].marker,null,null));for(var w=0;w<b;++w)m.push(v);m.push(l)}return m}function At(e){for(var t=0;t<e.length;++t){var r=e[t];null!=r.from&&r.from==r.to&&!1!==r.marker.clearWhenEmpty&&e.splice(t--,1)}return e.length?e:null}function It(e){var t=e.markedSpans;if(t){for(var r=0;r<t.length;++r)t[r].marker.detachLine(e);e.markedSpans=null}}function Ht(e,t){if(t){for(var r=0;r<t.length;++r)t[r].marker.attachLine(e);e.markedSpans=t}}function Dt(e){return e.inclusiveLeft?-1:0}function Wt(e){return e.inclusiveRight?1:0}function zt(e,t){var r=e.lines.length-t.lines.length;if(0!=r)return r;var i=e.find(),n=t.find(),o=st(i.from,n.from)||Dt(e)-Dt(t);return o?-o:st(i.to,n.to)||Wt(e)-Wt(t)||t.id-e.id}function Et(e,t){var r,i=Nt&&e.markedSpans;if(i)for(var n=void 0,o=0;o<i.length;++o)(n=i[o]).marker.collapsed&&null==(t?n.from:n.to)&&(!r||zt(r,n.marker)<0)&&(r=n.marker);return r}function Rt(e){return Et(e,!0)}function Ft(e){return Et(e,!1)}function Bt(e,t){var r,i=Nt&&e.markedSpans;if(i)for(var n=0;n<i.length;++n){var o=i[n];o.marker.collapsed&&(null==o.from||o.from<t)&&(null==o.to||o.to>t)&&(!r||zt(r,o.marker)<0)&&(r=o.marker)}return r}function jt(e,t,r,i,n){var o=Ze(e,t),s=Nt&&o.markedSpans;if(s)for(var a=0;a<s.length;++a){var l=s[a];if(l.marker.collapsed){var c=l.marker.find(0),u=st(c.from,r)||Dt(l.marker)-Dt(n),p=st(c.to,i)||Wt(l.marker)-Wt(n);if(!(0<=u&&p<=0||u<=0&&0<=p)&&(u<=0&&(l.marker.inclusiveRight&&n.inclusiveLeft?0<=st(c.to,r):0<st(c.to,r))||0<=u&&(l.marker.inclusiveRight&&n.inclusiveLeft?st(c.from,i)<=0:st(c.from,i)<0)))return 1}}}function Vt(e){for(var t;t=Rt(e);)e=t.find(-1,!0).line;return e}function Ut(e,t){var r=Ze(e,t),i=Vt(r);return r==i?t:tt(i)}function Gt(e,t){if(t>e.lastLine())return t;var r,i=Ze(e,t);if(!Xt(e,i))return t;for(;r=Ft(i);)i=r.find(1,!0).line;return tt(i)+1}function Xt(e,t){var r=Nt&&t.markedSpans;if(r)for(var i=void 0,n=0;n<r.length;++n)if((i=r[n]).marker.collapsed){if(null==i.from)return!0;if(!i.marker.widgetNode&&0==i.from&&i.marker.inclusiveLeft&&qt(e,t,i))return!0}}function qt(e,t,r){if(null==r.to){var i=r.marker.find(1,!0);return qt(e,i.line,_t(i.line.markedSpans,r.marker))}if(r.marker.inclusiveRight&&r.to==t.text.length)return!0;for(var n=void 0,o=0;o<t.markedSpans.length;++o)if((n=t.markedSpans[o]).marker.collapsed&&!n.marker.widgetNode&&n.from==r.to&&(null==n.to||n.to!=r.from)&&(n.marker.inclusiveLeft||r.marker.inclusiveRight)&&qt(e,t,n))return!0}function Kt(e){for(var t=0,r=(e=Vt(e)).parent,i=0;i<r.lines.length;++i){var n=r.lines[i];if(n==e)break;t+=n.height}for(var o=r.parent;o;o=(r=o).parent)for(var s=0;s<o.children.length;++s){var a=o.children[s];if(a==r)break;t+=a.height}return t}function Yt(e){if(0==e.height)return 0;for(var t,r=e.text.length,i=e;t=Rt(i);){var n=t.find(0,!0);i=n.from.line;r+=n.from.ch-n.to.ch}for(i=e;t=Ft(i);){var o=t.find(0,!0);r-=i.text.length-o.from.ch,r+=(i=o.to.line).text.length-o.to.ch}return r}function $t(e){var t=e.display,r=e.doc;t.maxLine=Ze(r,r.first),t.maxLineLength=Yt(t.maxLine),t.maxLineChanged=!0,r.iter(function(e){var r=Yt(e);r>t.maxLineLength&&(t.maxLineLength=r,t.maxLine=e)})}var Zt=function(e,t,r){this.text=e,Ht(this,t),this.height=r?r(this):1};Zt.prototype.lineNo=function(){return tt(this)},Se(Zt);var Jt={},Qt={};function er(e,t){if(!e||/^\s*$/.test(e))return null;var r=t.addModeClass?Qt:Jt;return r[e]||(r[e]=e.replace(/\S+/g,"cm-$&"))}function tr(e,t){var r=P("span",null,null,l?"padding-right: .1px":null),i={pre:P("pre",[r],"CodeMirror-line"),content:r,col:0,pos:0,cm:e,trailingSpace:!1,splitSpaces:e.getOption("lineWrapping")};t.measure={};for(var n,o=0;o<=(t.rest?t.rest.length:0);o++){var s=o?t.rest[o-1]:t.line,a=void 0;i.pos=0,i.addToken=rr,We(e.display.measure)&&(a=me(s,e.doc.direction))&&(i.addToken=ir(i.addToken,a)),i.map=[],or(s,i,vt(e,s,t!=e.display.externalMeasured&&tt(s))),s.styleClasses&&(s.styleClasses.bgClass&&(i.bgClass=H(s.styleClasses.bgClass,i.bgClass||"")),s.styleClasses.textClass&&(i.textClass=H(s.styleClasses.textClass,i.textClass||""))),0==i.map.length&&i.map.push(0,0,i.content.appendChild(De(e.display.measure))),0==o?(t.measure.map=i.map,t.measure.cache={}):((t.measure.maps||(t.measure.maps=[])).push(i.map),(t.measure.caches||(t.measure.caches=[])).push({}))}return l&&(n=i.content.lastChild,(/\bcm-tab\b/.test(n.className)||n.querySelector&&n.querySelector(".cm-tab"))&&(i.content.className="cm-tab-wrap-hack")),ke(e,"renderLine",e,t.line,i.pre),i.pre.className&&(i.textClass=H(i.pre.className,i.textClass||"")),i}function rr(e,t,r,i,n,o,l){if(t){var c,u=e.splitSpaces?function(e,t){if(1<e.length&&!/  /.test(e))return e;for(var r=t,i="",n=0;n<e.length;n++){var o=e.charAt(n);" "!=o||!r||n!=e.length-1&&32!=e.charCodeAt(n+1)||(o=" "),i+=o,r=" "==o}return i}(t,e.trailingSpace):t,p=e.cm.state.specialChars,h=!1;if(p.test(t)){c=document.createDocumentFragment();for(var d=0;;){p.lastIndex=d;var f,g=p.exec(t),m=g?g.index-d:t.length-d;if(m&&(f=document.createTextNode(u.slice(d,d+m)),s&&a<9?c.appendChild(_("span",[f])):c.appendChild(f),e.map.push(e.pos,e.pos+m,f),e.col+=m,e.pos+=m),!g)break;d+=1+m;var v,b,y=void 0;"\t"==g[0]?(b=(v=e.cm.options.tabSize)-e.col%v,(y=c.appendChild(_("span",K(b),"cm-tab"))).setAttribute("role","presentation"),y.setAttribute("cm-text","\t"),e.col+=b):("\r"==g[0]||"\n"==g[0]?(y=c.appendChild(_("span","\r"==g[0]?"␍":"␤","cm-invalidchar"))).setAttribute("cm-text",g[0]):((y=e.cm.options.specialCharPlaceholder(g[0])).setAttribute("cm-text",g[0]),s&&a<9?c.appendChild(_("span",[y])):c.appendChild(y)),e.col+=1),e.map.push(e.pos,e.pos+1,y),e.pos++}}else e.col+=t.length,c=document.createTextNode(u),e.map.push(e.pos,e.pos+t.length,c),s&&a<9&&(h=!0),e.pos+=t.length;if(e.trailingSpace=32==u.charCodeAt(t.length-1),r||i||n||h||o){var w=r||"";i&&(w+=i),n&&(w+=n);var k=_("span",[c],w,o);if(l)for(var x in l)l.hasOwnProperty(x)&&"style"!=x&&"class"!=x&&k.setAttribute(x,l[x]);return e.content.appendChild(k)}e.content.appendChild(c)}}function ir(e,t){return function(r,i,n,o,s,a,l){n=n?n+" cm-force-border":"cm-force-border";for(var c=r.pos,u=c+i.length;;){for(var p=void 0,h=0;h<t.length&&!((p=t[h]).to>c&&p.from<=c);h++);if(p.to>=u)return e(r,i,n,o,s,a,l);e(r,i.slice(0,p.to-c),n,o,null,a,l),o=null,i=i.slice(p.to-c),c=p.to}}}function nr(e,t,r,i){var n=!i&&r.widgetNode;n&&e.map.push(e.pos,e.pos+t,n),!i&&e.cm.display.input.needsContentAttribute&&(n=n||e.content.appendChild(document.createElement("span"))).setAttribute("cm-marker",r.id),n&&(e.cm.display.input.setUneditable(n),e.content.appendChild(n)),e.pos+=t,e.trailingSpace=!1}function or(e,t,r){var i=e.markedSpans,n=e.text,o=0;if(i)for(var s,a,l,c,u,p,h,d=n.length,f=0,g=1,m="",v=0;;){if(v==f){l=c=u=a="",p=h=null,v=1/0;for(var b=[],y=void 0,w=0;w<i.length;++w){var k=i[w],x=k.marker;if("bookmark"==x.type&&k.from==f&&x.widgetNode)b.push(x);else if(k.from<=f&&(null==k.to||k.to>f||x.collapsed&&k.to==f&&k.from==f)){if(null!=k.to&&k.to!=f&&v>k.to&&(v=k.to,c=""),x.className&&(l+=" "+x.className),x.css&&(a=(a?a+";":"")+x.css),x.startStyle&&k.from==f&&(u+=" "+x.startStyle),x.endStyle&&k.to==v&&(y=y||[]).push(x.endStyle,k.to),x.title&&((h=h||{}).title=x.title),x.attributes)for(var C in x.attributes)(h=h||{})[C]=x.attributes[C];x.collapsed&&(!p||zt(p.marker,x)<0)&&(p=k)}else k.from>f&&v>k.from&&(v=k.from)}if(y)for(var L=0;L<y.length;L+=2)y[L+1]==v&&(c+=" "+y[L]);if(!p||p.from==f)for(var S=0;S<b.length;++S)nr(t,0,b[S]);if(p&&(p.from||0)==f){if(nr(t,(null==p.to?d+1:p.to)-f,p.marker,null==p.from),null==p.to)return;p.to==f&&(p=!1)}}if(d<=f)break;for(var T=Math.min(d,v);;){if(m){var N,M=f+m.length;if(p||(N=T<M?m.slice(0,T-f):m,t.addToken(t,N,s?s+l:l,u,f+N.length==v?c:"",a,h)),T<=M){m=m.slice(T-f),f=T;break}f=M,u=""}m=n.slice(o,o=r[g++]),s=er(r[g++],t.cm.options)}}else for(var _=1;_<r.length;_+=2)t.addToken(t,n.slice(o,o=r[_]),er(r[_+1],t.cm.options))}function sr(e,t,r){this.line=t,this.rest=function(e){for(var t,r;t=Ft(e);)e=t.find(1,!0).line,(r=r||[]).push(e);return r}(t),this.size=this.rest?tt(Y(this.rest))-r+1:1,this.node=this.text=null,this.hidden=Xt(e,t)}function ar(e,t,r){for(var i=[],n=t;n<r;n=s){var o=new sr(e.doc,Ze(e.doc,n),n),s=n+o.size;i.push(o)}return i}var lr=null;var cr=null;function ur(e,t){var r=ye(e,t);if(r.length){var i,n=Array.prototype.slice.call(arguments,2);lr?i=lr.delayedCallbacks:cr?i=cr:(i=cr=[],setTimeout(pr,0));for(var o=function(e){i.push(function(){return r[e].apply(null,n)})},s=0;s<r.length;++s)o(s)}}function pr(){var e=cr;cr=null;for(var t=0;t<e.length;++t)e[t]()}function hr(e,t,r,i){for(var n=0;n<t.changes.length;n++){var o=t.changes[n];"text"==o?gr(e,t):"gutter"==o?vr(e,t,r,i):"class"==o?mr(e,t):"widget"==o&&br(e,t,i)}t.changes=null}function dr(e){return e.node==e.text&&(e.node=_("div",null,null,"position: relative"),e.text.parentNode&&e.text.parentNode.replaceChild(e.node,e.text),e.node.appendChild(e.text),s&&a<8&&(e.node.style.zIndex=2)),e.node}function fr(e,t){var r=e.display.externalMeasured;return r&&r.line==t.line?(e.display.externalMeasured=null,t.measure=r.measure,r.built):tr(e,t)}function gr(e,t){var r=t.text.className,i=fr(e,t);t.text==t.node&&(t.node=i.pre),t.text.parentNode.replaceChild(i.pre,t.text),t.text=i.pre,i.bgClass!=t.bgClass||i.textClass!=t.textClass?(t.bgClass=i.bgClass,t.textClass=i.textClass,mr(e,t)):r&&(t.text.className=r)}function mr(e,t){var r,i,n,o;r=e,(o=(i=t).bgClass?i.bgClass+" "+(i.line.bgClass||""):i.line.bgClass)&&(o+=" CodeMirror-linebackground"),i.background?o?i.background.className=o:(i.background.parentNode.removeChild(i.background),i.background=null):o&&(n=dr(i),i.background=n.insertBefore(_("div",null,o),n.firstChild),r.display.input.setUneditable(i.background)),t.line.wrapClass?dr(t).className=t.line.wrapClass:t.node!=t.text&&(t.node.className="");var s=t.textClass?t.textClass+" "+(t.line.textClass||""):t.line.textClass;t.text.className=s||""}function vr(e,t,r,i){var n;t.gutter&&(t.node.removeChild(t.gutter),t.gutter=null),t.gutterBackground&&(t.node.removeChild(t.gutterBackground),t.gutterBackground=null),t.line.gutterClass&&(n=dr(t),t.gutterBackground=_("div",null,"CodeMirror-gutter-background "+t.line.gutterClass,"left: "+(e.options.fixedGutter?i.fixedPos:-i.gutterTotalWidth)+"px; width: "+i.gutterTotalWidth+"px"),e.display.input.setUneditable(t.gutterBackground),n.insertBefore(t.gutterBackground,t.text));var o=t.line.gutterMarkers;if(e.options.lineNumbers||o){var s=dr(t),a=t.gutter=_("div",null,"CodeMirror-gutter-wrapper","left: "+(e.options.fixedGutter?i.fixedPos:-i.gutterTotalWidth)+"px");if(e.display.input.setUneditable(a),s.insertBefore(a,t.text),t.line.gutterClass&&(a.className+=" "+t.line.gutterClass),!e.options.lineNumbers||o&&o["CodeMirror-linenumbers"]||(t.lineNumber=a.appendChild(_("div",nt(e.options,r),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+i.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+e.display.lineNumInnerWidth+"px"))),o)for(var l=0;l<e.display.gutterSpecs.length;++l){var c=e.display.gutterSpecs[l].className,u=o.hasOwnProperty(c)&&o[c];u&&a.appendChild(_("div",[u],"CodeMirror-gutter-elt","left: "+i.gutterLeft[c]+"px; width: "+i.gutterWidth[c]+"px"))}}}function br(e,t,r){t.alignable&&(t.alignable=null);for(var i=L("CodeMirror-linewidget"),n=t.node.firstChild,o=void 0;n;n=o)o=n.nextSibling,i.test(n.className)&&t.node.removeChild(n);yr(e,t,r)}function yr(e,t,r){if(wr(e,t.line,t,r,!0),t.rest)for(var i=0;i<t.rest.length;i++)wr(e,t.rest[i],t,r,!1)}function wr(e,t,r,i,n){if(t.widgets)for(var o=dr(r),s=0,a=t.widgets;s<a.length;++s){var l=a[s],c=_("div",[l.node],"CodeMirror-linewidget"+(l.className?" "+l.className:""));l.handleMouseEvents||c.setAttribute("cm-ignore-events","true"),kr(l,c,r,i),e.display.input.setUneditable(c),n&&l.above?o.insertBefore(c,r.gutter||r.text):o.appendChild(c),ur(l,"redraw")}}function kr(e,t,r,i){var n;e.noHScroll&&((r.alignable||(r.alignable=[])).push(t),n=i.wrapperWidth,t.style.left=i.fixedPos+"px",e.coverGutter||(n-=i.gutterTotalWidth,t.style.paddingLeft=i.gutterTotalWidth+"px"),t.style.width=n+"px"),e.coverGutter&&(t.style.zIndex=5,t.style.position="relative",e.noHScroll||(t.style.marginLeft=-i.gutterTotalWidth+"px"))}function xr(e){if(null!=e.height)return e.height;var t,r=e.doc.cm;return r?(O(document.body,e.node)||(t="position: relative;",e.coverGutter&&(t+="margin-left: -"+r.display.gutters.offsetWidth+"px;"),e.noHScroll&&(t+="width: "+r.display.wrapper.clientWidth+"px;"),M(r.display.measure,_("div",[e.node],null,t))),e.height=e.node.parentNode.offsetHeight):0}function Cr(e,t){for(var r=Pe(t);r!=e.wrapper;r=r.parentNode)if(!r||1==r.nodeType&&"true"==r.getAttribute("cm-ignore-events")||r.parentNode==e.sizer&&r!=e.mover)return 1}function Lr(e){return e.lineSpace.offsetTop}function Sr(e){return e.mover.offsetHeight-e.lineSpace.offsetHeight}function Tr(e){if(e.cachedPaddingH)return e.cachedPaddingH;var t=M(e.measure,_("pre","x","CodeMirror-line-like")),r=window.getComputedStyle?window.getComputedStyle(t):t.currentStyle,i={left:parseInt(r.paddingLeft),right:parseInt(r.paddingRight)};return isNaN(i.left)||isNaN(i.right)||(e.cachedPaddingH=i),i}function Nr(e){return B-e.display.nativeBarWidth}function Mr(e){return e.display.scroller.clientWidth-Nr(e)-e.display.barWidth}function _r(e){return e.display.scroller.clientHeight-Nr(e)-e.display.barHeight}function Pr(e,t,r){if(e.line==t)return{map:e.measure.map,cache:e.measure.cache};for(var i=0;i<e.rest.length;i++)if(e.rest[i]==t)return{map:e.measure.maps[i],cache:e.measure.caches[i]};for(var n=0;n<e.rest.length;n++)if(tt(e.rest[n])>r)return{map:e.measure.maps[n],cache:e.measure.caches[n],before:!0}}function Or(e,t,r,i){return Hr(e,Ir(e,t),r,i)}function Ar(e,t){if(t>=e.display.viewFrom&&t<e.display.viewTo)return e.display.view[ci(e,t)];var r=e.display.externalMeasured;return r&&t>=r.lineN&&t<r.lineN+r.size?r:void 0}function Ir(e,t){var r=tt(t),i=Ar(e,r);i&&!i.text?i=null:i&&i.changes&&(hr(e,i,r,ni(e)),e.curOp.forceUpdate=!0);var n=Pr(i=i||function(e,t){var r=tt(t=Vt(t)),i=e.display.externalMeasured=new sr(e.doc,t,r);i.lineN=r;var n=i.built=tr(e,i);return i.text=n.pre,M(e.display.lineMeasure,n.pre),i}(e,t),t,r);return{line:t,view:i,rect:null,map:n.map,cache:n.cache,before:n.before,hasHeights:!1}}function Hr(e,t,r,i,n){t.before&&(r=-1);var o,l=r+(i||"");return t.cache.hasOwnProperty(l)?o=t.cache[l]:(t.rect||(t.rect=t.view.text.getBoundingClientRect()),t.hasHeights||(function(e,t,r){var i=e.options.lineWrapping,n=i&&Mr(e);if(!t.measure.heights||i&&t.measure.width!=n){var o=t.measure.heights=[];if(i){t.measure.width=n;for(var s=t.text.firstChild.getClientRects(),a=0;a<s.length-1;a++){var l=s[a],c=s[a+1];2<Math.abs(l.bottom-c.bottom)&&o.push((l.bottom+c.top)/2-r.top)}}o.push(r.bottom-r.top)}}(e,t.view,t.rect),t.hasHeights=!0),(o=function(e,t,r,i){var n,o,l,c=zr(t.map,r,i),u=c.node,p=c.start,h=c.end,d=c.collapse;if(3==u.nodeType){for(var f=0;f<4;f++){for(;p&&ne(t.line.text.charAt(c.coverStart+p));)--p;for(;c.coverStart+h<c.coverEnd&&ne(t.line.text.charAt(c.coverStart+h));)++h;if((n=s&&a<9&&0==p&&h==c.coverEnd-c.coverStart?u.parentNode.getBoundingClientRect():Er(S(u,p,h).getClientRects(),i)).left||n.right||0==p)break;h=p,--p,d="right"}s&&a<11&&(n=function(e,t){if(!window.screen||null==screen.logicalXDPI||screen.logicalXDPI==screen.deviceXDPI||!function(e){if(null!=Be)return Be;var t=M(e,_("span","x")),r=t.getBoundingClientRect(),i=S(t,0,1).getBoundingClientRect();return Be=1<Math.abs(r.left-i.left)}(e))return t;var r=screen.logicalXDPI/screen.deviceXDPI,i=screen.logicalYDPI/screen.deviceYDPI;return{left:t.left*r,right:t.right*r,top:t.top*i,bottom:t.bottom*i}}(e.display.measure,n))}else 0<p&&(d=i="right"),n=e.options.lineWrapping&&1<(o=u.getClientRects()).length?o["right"==i?o.length-1:0]:u.getBoundingClientRect();!(s&&a<9)||p||n&&(n.left||n.right)||(n=(l=u.parentNode.getClientRects()[0])?{left:l.left,right:l.left+ii(e.display),top:l.top,bottom:l.bottom}:Wr);for(var g=n.top-t.rect.top,m=n.bottom-t.rect.top,v=(g+m)/2,b=t.view.measure.heights,y=0;y<b.length-1&&!(v<b[y]);y++);var w=y?b[y-1]:0,k=b[y],x={left:("right"==d?n.right:n.left)-t.rect.left,right:("left"==d?n.left:n.right)-t.rect.left,top:w,bottom:k};return n.left||n.right||(x.bogus=!0),e.options.singleCursorHeightPerLine||(x.rtop=g,x.rbottom=m),x}(e,t,r,i)).bogus||(t.cache[l]=o)),{left:o.left,right:o.right,top:n?o.rtop:o.top,bottom:n?o.rbottom:o.bottom}}var Dr,Wr={left:0,right:0,top:0,bottom:0};function zr(e,t,r){for(var i,n,o,s,a,l,c=0;c<e.length;c+=3)if(a=e[c],l=e[c+1],t<a?(n=0,o=1,s="left"):t<l?o=1+(n=t-a):(c==e.length-3||t==l&&e[c+3]>t)&&(n=(o=l-a)-1,l<=t&&(s="right")),null!=n){if(i=e[c+2],a==l&&r==(i.insertLeft?"left":"right")&&(s=r),"left"==r&&0==n)for(;c&&e[c-2]==e[c-3]&&e[c-1].insertLeft;)i=e[2+(c-=3)],s="left";if("right"==r&&n==l-a)for(;c<e.length-3&&e[c+3]==e[c+4]&&!e[c+5].insertLeft;)i=e[(c+=3)+2],s="right";break}return{node:i,start:n,end:o,collapse:s,coverStart:a,coverEnd:l}}function Er(e,t){var r=Wr;if("left"==t)for(var i=0;i<e.length&&(r=e[i]).left==r.right;i++);else for(var n=e.length-1;0<=n&&(r=e[n]).left==r.right;n--);return r}function Rr(e){if(e.measure&&(e.measure.cache={},e.measure.heights=null,e.rest))for(var t=0;t<e.rest.length;t++)e.measure.caches[t]={}}function Fr(e){e.display.externalMeasure=null,N(e.display.lineMeasure);for(var t=0;t<e.display.view.length;t++)Rr(e.display.view[t])}function Br(e){Fr(e),e.display.cachedCharWidth=e.display.cachedTextHeight=e.display.cachedPaddingH=null,e.options.lineWrapping||(e.display.maxLineChanged=!0),e.display.lineNumChars=null}function jr(){return u&&m?-(document.body.getBoundingClientRect().left-parseInt(getComputedStyle(document.body).marginLeft)):window.pageXOffset||(document.documentElement||document.body).scrollLeft}function Vr(){return u&&m?-(document.body.getBoundingClientRect().top-parseInt(getComputedStyle(document.body).marginTop)):window.pageYOffset||(document.documentElement||document.body).scrollTop}function Ur(e){var t=0;if(e.widgets)for(var r=0;r<e.widgets.length;++r)e.widgets[r].above&&(t+=xr(e.widgets[r]));return t}function Gr(e,t,r,i,n){var o;if(n||(o=Ur(t),r.top+=o,r.bottom+=o),"line"==i)return r;i=i||"local";var s,a,l=Kt(t);return"local"==i?l+=Lr(e.display):l-=e.display.viewOffset,"page"!=i&&"window"!=i||(l+=(s=e.display.lineSpace.getBoundingClientRect()).top+("window"==i?0:Vr()),a=s.left+("window"==i?0:jr()),r.left+=a,r.right+=a),r.top+=l,r.bottom+=l,r}function Xr(e,t,r){if("div"==r)return t;var i,n=t.left,o=t.top;"page"==r?(n-=jr(),o-=Vr()):"local"!=r&&r||(n+=(i=e.display.sizer.getBoundingClientRect()).left,o+=i.top);var s=e.display.lineSpace.getBoundingClientRect();return{left:n-s.left,top:o-s.top}}function qr(e,t,r,i,n){return Gr(e,i=i||Ze(e.doc,t.line),Or(e,i,t.ch,n),r)}function Kr(e,t,r,i,n,o){function s(t,s){var a=Hr(e,n,t,s?"right":"left",o);return s?a.left=a.right:a.right=a.left,Gr(e,i,a,r)}i=i||Ze(e.doc,t.line),n=n||Ir(e,i);var a=me(i,e.doc.direction),l=t.ch,c=t.sticky;if(l>=i.text.length?(l=i.text.length,c="before"):l<=0&&(l=0,c="after"),!a)return s("before"==c?l-1:l,"before"==c);function u(e,t,r){return s(r?e-1:e,1==a[t].level!=r)}var p=le(a,l,c),h=ae,d=u(l,p,"before"==c);return null!=h&&(d.other=u(l,h,"before"!=c)),d}function Yr(e,t){var r=0;t=ht(e.doc,t),e.options.lineWrapping||(r=ii(e.display)*t.ch);var i=Ze(e.doc,t.line),n=Kt(i)+Lr(e.display);return{left:r,right:r,top:n,bottom:n+i.height}}function $r(e,t,r,i,n){var o=ot(e,t,r);return o.xRel=n,i&&(o.outside=i),o}function Zr(e,t,r){var i=e.doc;if((r+=e.display.viewOffset)<0)return $r(i.first,0,null,-1,-1);var n=rt(i,r),o=i.first+i.size-1;if(o<n)return $r(i.first+i.size-1,Ze(i,o).text.length,null,1,1);t<0&&(t=0);for(var s=Ze(i,n);;){var a=ti(e,s,n,t,r),l=Bt(s,a.ch+(0<a.xRel||0<a.outside?1:0));if(!l)return a;var c=l.find(1);if(c.line==n)return c;s=Ze(i,n=c.line)}}function Jr(e,t,r,i){i-=Ur(t);var n=t.text.length,o=se(function(t){return Hr(e,r,t-1).bottom<=i},n,0);return{begin:o,end:n=se(function(t){return Hr(e,r,t).top>i},o,n)}}function Qr(e,t,r,i){return Jr(e,t,r=r||Ir(e,t),Gr(e,t,Hr(e,r,i),"line").top)}function ei(e,t,r,i){return!(e.bottom<=r)&&(e.top>r||(i?e.left:e.right)>t)}function ti(e,t,r,i,n){n-=Kt(t);var o,s=Ir(e,t),a=Ur(t),l=0,c=t.text.length,u=!0,p=me(t,e.doc.direction);p&&(l=(u=1!=(o=(e.options.lineWrapping?function(e,t,r,i,n,o,s){var a=Jr(e,t,i,s),l=a.begin,c=a.end;/\s/.test(t.text.charAt(c-1))&&c--;for(var u=null,p=null,h=0;h<n.length;h++){var d,f,g=n[h];g.from>=c||g.to<=l||(f=(d=Hr(e,i,1!=g.level?Math.min(c,g.to)-1:Math.max(l,g.from)).right)<o?o-d+1e9:d-o,(!u||f<p)&&(u=g,p=f))}return(u=u||n[n.length-1]).from<l&&(u={from:l,to:u.to,level:u.level}),u.to>c&&(u={from:u.from,to:c,level:u.level}),u}:function(e,t,r,i,n,o,s){var a,l,c=se(function(a){var l=n[a],c=1!=l.level;return ei(Kr(e,ot(r,c?l.to:l.from,c?"before":"after"),"line",t,i),o,s,!0)},0,n.length-1),u=n[c];return 0<c&&(a=1!=u.level,ei(l=Kr(e,ot(r,a?u.from:u.to,a?"after":"before"),"line",t,i),o,s,!0)&&l.top>s&&(u=n[c-1])),u})(e,t,r,s,p,i,n)).level)?o.from:o.to-1,c=u?o.to:o.from-1);var h,d,f,g,m,v=null,b=null,y=se(function(t){var r=Hr(e,s,t);return r.top+=a,r.bottom+=a,ei(r,i,n,!1)&&(r.top<=n&&r.left<=i&&(v=t,b=r),1)},l,c),w=!1;return b?(h=i-b.left<b.right-i,y=v+((d=h==u)?0:1),f=d?"after":"before",g=h?b.left:b.right):(u||y!=c&&y!=l||y++,f=0==y||y!=t.text.length&&Hr(e,s,y-(u?1:0)).bottom+a<=n==u?"after":"before",g=(m=Kr(e,ot(r,y,f),"line",t,s)).left,w=n<m.top?-1:n>=m.bottom?1:0),$r(r,y=oe(t.text,y,1),f,w,i-g)}function ri(e){if(null!=e.cachedTextHeight)return e.cachedTextHeight;if(null==Dr){Dr=_("pre",null,"CodeMirror-line-like");for(var t=0;t<49;++t)Dr.appendChild(document.createTextNode("x")),Dr.appendChild(_("br"));Dr.appendChild(document.createTextNode("x"))}M(e.measure,Dr);var r=Dr.offsetHeight/50;return 3<r&&(e.cachedTextHeight=r),N(e.measure),r||1}function ii(e){if(null!=e.cachedCharWidth)return e.cachedCharWidth;var t=_("span","xxxxxxxxxx"),r=_("pre",[t],"CodeMirror-line-like");M(e.measure,r);var i=t.getBoundingClientRect(),n=(i.right-i.left)/10;return 2<n&&(e.cachedCharWidth=n),n||10}function ni(e){for(var t=e.display,r={},i={},n=t.gutters.clientLeft,o=t.gutters.firstChild,s=0;o;o=o.nextSibling,++s){var a=e.display.gutterSpecs[s].className;r[a]=o.offsetLeft+o.clientLeft+n,i[a]=o.clientWidth}return{fixedPos:oi(t),gutterTotalWidth:t.gutters.offsetWidth,gutterLeft:r,gutterWidth:i,wrapperWidth:t.wrapper.clientWidth}}function oi(e){return e.scroller.getBoundingClientRect().left-e.sizer.getBoundingClientRect().left}function si(e){var t=ri(e.display),r=e.options.lineWrapping,i=r&&Math.max(5,e.display.scroller.clientWidth/ii(e.display)-3);return function(n){if(Xt(e.doc,n))return 0;var o=0;if(n.widgets)for(var s=0;s<n.widgets.length;s++)n.widgets[s].height&&(o+=n.widgets[s].height);return r?o+(Math.ceil(n.text.length/i)||1)*t:o+t}}function ai(e){var t=e.doc,r=si(e);t.iter(function(e){var t=r(e);t!=e.height&&et(e,t)})}function li(e,t,r,i){var n=e.display;if(!r&&"true"==Pe(t).getAttribute("cm-not-content"))return null;var o,s,a=n.lineSpace.getBoundingClientRect();try{o=t.clientX-a.left,s=t.clientY-a.top}catch(t){return null}var l,c,u=Zr(e,o,s);return i&&0<u.xRel&&(l=Ze(e.doc,u.line).text).length==u.ch&&(c=E(l,l.length,e.options.tabSize)-l.length,u=ot(u.line,Math.max(0,Math.round((o-Tr(e.display).left)/ii(e.display))-c))),u}function ci(e,t){if(t>=e.display.viewTo)return null;if((t-=e.display.viewFrom)<0)return null;for(var r=e.display.view,i=0;i<r.length;i++)if((t-=r[i].size)<0)return i}function ui(e,t,r,i){null==t&&(t=e.doc.first),null==r&&(r=e.doc.first+e.doc.size),i=i||0;var n,o,s,a,l=e.display;i&&r<l.viewTo&&(null==l.updateLineNumbers||l.updateLineNumbers>t)&&(l.updateLineNumbers=t),e.curOp.viewChanged=!0,t>=l.viewTo?Nt&&Ut(e.doc,t)<l.viewTo&&hi(e):r<=l.viewFrom?Nt&&Gt(e.doc,r+i)>l.viewFrom?hi(e):(l.viewFrom+=i,l.viewTo+=i):t<=l.viewFrom&&r>=l.viewTo?hi(e):t<=l.viewFrom?(n=di(e,r,r+i,1))?(l.view=l.view.slice(n.index),l.viewFrom=n.lineN,l.viewTo+=i):hi(e):r>=l.viewTo?(o=di(e,t,t,-1))?(l.view=l.view.slice(0,o.index),l.viewTo=o.lineN):hi(e):(s=di(e,t,t,-1),a=di(e,r,r+i,1),s&&a?(l.view=l.view.slice(0,s.index).concat(ar(e,s.lineN,a.lineN)).concat(l.view.slice(a.index)),l.viewTo+=i):hi(e));var c=l.externalMeasured;c&&(r<c.lineN?c.lineN+=i:t<c.lineN+c.size&&(l.externalMeasured=null))}function pi(e,t,r){e.curOp.viewChanged=!0;var i,n,o=e.display,s=e.display.externalMeasured;s&&t>=s.lineN&&t<s.lineN+s.size&&(o.externalMeasured=null),t<o.viewFrom||t>=o.viewTo||null==(i=o.view[ci(e,t)]).node||-1==F(n=i.changes||(i.changes=[]),r)&&n.push(r)}function hi(e){e.display.viewFrom=e.display.viewTo=e.doc.first,e.display.view=[],e.display.viewOffset=0}function di(e,t,r,i){var n,o=ci(e,t),s=e.display.view;if(!Nt||r==e.doc.first+e.doc.size)return{index:o,lineN:r};for(var a=e.display.viewFrom,l=0;l<o;l++)a+=s[l].size;if(a!=t){if(0<i){if(o==s.length-1)return null;n=a+s[o].size-t,o++}else n=a-t;t+=n,r+=n}for(;Ut(e.doc,r)!=r;){if(o==(i<0?0:s.length-1))return null;r+=i*s[o-(i<0?1:0)].size,o+=i}return{index:o,lineN:r}}function fi(e){for(var t=e.display.view,r=0,i=0;i<t.length;i++){var n=t[i];n.hidden||n.node&&!n.changes||++r}return r}function gi(e){e.display.input.showSelection(e.display.input.prepareSelection())}function mi(e,t){void 0===t&&(t=!0);for(var r,i,n=e.doc,o={},s=o.cursors=document.createDocumentFragment(),a=o.selection=document.createDocumentFragment(),l=0;l<n.sel.ranges.length;l++)!t&&l==n.sel.primIndex||(r=n.sel.ranges[l]).from().line>=e.display.viewTo||r.to().line<e.display.viewFrom||(((i=r.empty())||e.options.showCursorWhenSelecting)&&vi(e,r.head,s),i||yi(e,r,a));return o}function vi(e,t,r){var i,n=Kr(e,t,"div",null,null,!e.options.singleCursorHeightPerLine),o=r.appendChild(_("div"," ","CodeMirror-cursor"));o.style.left=n.left+"px",o.style.top=n.top+"px",o.style.height=Math.max(0,n.bottom-n.top)*e.options.cursorHeight+"px",n.other&&((i=r.appendChild(_("div"," ","CodeMirror-cursor CodeMirror-secondarycursor"))).style.display="",i.style.left=n.other.left+"px",i.style.top=n.other.top+"px",i.style.height=.85*(n.other.bottom-n.other.top)+"px")}function bi(e,t){return e.top-t.top||e.left-t.left}function yi(e,t,r){var i=e.display,n=e.doc,o=document.createDocumentFragment(),s=Tr(e.display),a=s.left,l=Math.max(i.sizerWidth,Mr(e)-i.sizer.offsetLeft)-s.right,c="ltr"==n.direction;function u(e,t,r,i){t<0&&(t=0),t=Math.round(t),i=Math.round(i),o.appendChild(_("div",null,"CodeMirror-selected","position: absolute; left: "+e+"px;\n                             top: "+t+"px; width: "+(null==r?l-e:r)+"px;\n                             height: "+(i-t)+"px"))}function p(t,r,i){var o,s,p=Ze(n,t),h=p.text.length;function d(r,i){return qr(e,ot(t,r),"div",p,i)}function f(t,r,i){var n=Qr(e,p,null,t),o="ltr"==r==("after"==i)?"left":"right";return d("after"==i?n.begin:n.end-(/\s/.test(p.text.charAt(n.end-1))?2:1),o)[o]}var g=me(p,n.direction);return function(e,t,r,i){if(!e)return i(t,r,"ltr",0);for(var n=!1,o=0;o<e.length;++o){var s=e[o];(s.from<r&&s.to>t||t==r&&s.to==t)&&(i(Math.max(s.from,t),Math.min(s.to,r),1==s.level?"rtl":"ltr",o),n=!0)}n||i(t,r,"ltr")}(g,r||0,null==i?h:i,function(e,t,n,p){var m,v,b,y,w,k,x,C="ltr"==n,L=d(e,C?"left":"right"),S=d(t-1,C?"right":"left"),T=null==r&&0==e,N=null==i&&t==h,M=0==p,_=!g||p==g.length-1;S.top-L.top<=3?(m=(c?N:T)&&_,v=(c?T:N)&&M?a:(C?L:S).left,b=m?l:(C?S:L).right,u(v,L.top,b-v,L.bottom)):(x=C?(y=c&&T&&M?a:L.left,w=c?l:f(e,n,"before"),k=c?a:f(t,n,"after"),c&&N&&_?l:S.right):(y=c?f(e,n,"before"):a,w=!c&&T&&M?l:L.right,k=!c&&N&&_?a:S.left,c?f(t,n,"after"):l),u(y,L.top,w-y,L.bottom),L.bottom<S.top&&u(a,L.bottom,null,S.top),u(k,S.top,x-k,S.bottom)),(!o||bi(L,o)<0)&&(o=L),bi(S,o)<0&&(o=S),(!s||bi(L,s)<0)&&(s=L),bi(S,s)<0&&(s=S)}),{start:o,end:s}}var h,d,f,g,m,v=t.from(),b=t.to();v.line==b.line?p(v.line,v.ch,b.ch):(h=Ze(n,v.line),d=Ze(n,b.line),f=Vt(h)==Vt(d),g=p(v.line,v.ch,f?h.text.length+1:null).end,m=p(b.line,f?0:null,b.ch).start,f&&(g.top<m.top-2?(u(g.right,g.top,null,g.bottom),u(a,m.top,m.left,m.bottom)):u(g.right,g.top,m.left-g.right,g.bottom)),g.bottom<m.top&&u(a,g.bottom,null,m.top)),r.appendChild(o)}function wi(e){var t,r;e.state.focused&&(t=e.display,clearInterval(t.blinker),r=!0,t.cursorDiv.style.visibility="",0<e.options.cursorBlinkRate?t.blinker=setInterval(function(){return t.cursorDiv.style.visibility=(r=!r)?"":"hidden"},e.options.cursorBlinkRate):e.options.cursorBlinkRate<0&&(t.cursorDiv.style.visibility="hidden"))}function ki(e){e.state.focused||(e.display.input.focus(),Ci(e))}function xi(e){e.state.delayingBlurEvent=!0,setTimeout(function(){e.state.delayingBlurEvent&&(e.state.delayingBlurEvent=!1,Li(e))},100)}function Ci(e,t){e.state.delayingBlurEvent&&(e.state.delayingBlurEvent=!1),"nocursor"!=e.options.readOnly&&(e.state.focused||(ke(e,"focus",e,t),e.state.focused=!0,I(e.display.wrapper,"CodeMirror-focused"),e.curOp||e.display.selForContextMenu==e.doc.sel||(e.display.input.reset(),l&&setTimeout(function(){return e.display.input.reset(!0)},20)),e.display.input.receivedFocus()),wi(e))}function Li(e,t){e.state.delayingBlurEvent||(e.state.focused&&(ke(e,"blur",e,t),e.state.focused=!1,T(e.display.wrapper,"CodeMirror-focused")),clearInterval(e.display.blinker),setTimeout(function(){e.state.focused||(e.display.shift=!1)},150))}function Si(e){for(var t=e.display,r=t.lineDiv.offsetTop,i=0;i<t.view.length;i++){var n,o,l=t.view[i],c=e.options.lineWrapping,u=void 0,p=0;if(!l.hidden){s&&a<8?(u=(n=l.node.offsetTop+l.node.offsetHeight)-r,r=n):(u=(o=l.node.getBoundingClientRect()).bottom-o.top,!c&&l.text.firstChild&&(p=l.text.firstChild.getBoundingClientRect().right-o.left-1));var h,d=l.line.height-u;if((.005<d||d<-.005)&&(et(l.line,u),Ti(l.line),l.rest))for(var f=0;f<l.rest.length;f++)Ti(l.rest[f]);p>e.display.sizerWidth&&(h=Math.ceil(p/ii(e.display)))>e.display.maxLineLength&&(e.display.maxLineLength=h,e.display.maxLine=l.line,e.display.maxLineChanged=!0)}}}function Ti(e){if(e.widgets)for(var t=0;t<e.widgets.length;++t){var r=e.widgets[t],i=r.node.parentNode;i&&(r.height=i.offsetHeight)}}function Ni(e,t,r){var i,n,o=r&&null!=r.top?Math.max(0,r.top):e.scroller.scrollTop,s=(o=Math.floor(o-Lr(e)),r&&null!=r.bottom?r.bottom:o+e.wrapper.clientHeight),a=rt(t,o),l=rt(t,s);return r&&r.ensure&&(i=r.ensure.from.line,n=r.ensure.to.line,i<a?l=rt(t,Kt(Ze(t,a=i))+e.wrapper.clientHeight):Math.min(n,t.lastLine())>=l&&(a=rt(t,Kt(Ze(t,n))-e.wrapper.clientHeight),l=n)),{from:a,to:Math.max(l,a+1)}}function Mi(e,t){var r=e.display,i=ri(e.display);t.top<0&&(t.top=0);var n=e.curOp&&null!=e.curOp.scrollTop?e.curOp.scrollTop:r.scroller.scrollTop,o=_r(e),s={};t.bottom-t.top>o&&(t.bottom=t.top+o);var a,l=e.doc.height+Sr(r),c=t.top<i,u=t.bottom>l-i;t.top<n?s.scrollTop=c?0:t.top:t.bottom>n+o&&(a=Math.min(t.top,(u?l:t.bottom)-o))!=n&&(s.scrollTop=a);var p=e.curOp&&null!=e.curOp.scrollLeft?e.curOp.scrollLeft:r.scroller.scrollLeft,h=Mr(e)-(e.options.fixedGutter?r.gutters.offsetWidth:0),d=t.right-t.left>h;return d&&(t.right=t.left+h),t.left<10?s.scrollLeft=0:t.left<p?s.scrollLeft=Math.max(0,t.left-(d?0:10)):t.right>h+p-3&&(s.scrollLeft=t.right+(d?0:10)-h),s}function _i(e,t){null!=t&&(Ai(e),e.curOp.scrollTop=(null==e.curOp.scrollTop?e.doc.scrollTop:e.curOp.scrollTop)+t)}function Pi(e){Ai(e);var t=e.getCursor();e.curOp.scrollToPos={from:t,to:t,margin:e.options.cursorScrollMargin}}function Oi(e,t,r){null==t&&null==r||Ai(e),null!=t&&(e.curOp.scrollLeft=t),null!=r&&(e.curOp.scrollTop=r)}function Ai(e){var t=e.curOp.scrollToPos;t&&(e.curOp.scrollToPos=null,Ii(e,Yr(e,t.from),Yr(e,t.to),t.margin))}function Ii(e,t,r,i){var n=Mi(e,{left:Math.min(t.left,r.left),top:Math.min(t.top,r.top)-i,right:Math.max(t.right,r.right),bottom:Math.max(t.bottom,r.bottom)+i});Oi(e,n.scrollLeft,n.scrollTop)}function Hi(e,t){Math.abs(e.doc.scrollTop-t)<2||(r||an(e,{top:t}),Di(e,t,!0),r&&an(e),tn(e,100))}function Di(e,t,r){t=Math.max(0,Math.min(e.display.scroller.scrollHeight-e.display.scroller.clientHeight,t)),e.display.scroller.scrollTop==t&&!r||(e.doc.scrollTop=t,e.display.scrollbars.setScrollTop(t),e.display.scroller.scrollTop!=t&&(e.display.scroller.scrollTop=t))}function Wi(e,t,r,i){t=Math.max(0,Math.min(t,e.display.scroller.scrollWidth-e.display.scroller.clientWidth)),(r?t==e.doc.scrollLeft:Math.abs(e.doc.scrollLeft-t)<2)&&!i||(e.doc.scrollLeft=t,un(e),e.display.scroller.scrollLeft!=t&&(e.display.scroller.scrollLeft=t),e.display.scrollbars.setScrollLeft(t))}function zi(e){var t=e.display,r=t.gutters.offsetWidth,i=Math.round(e.doc.height+Sr(e.display));return{clientHeight:t.scroller.clientHeight,viewHeight:t.wrapper.clientHeight,scrollWidth:t.scroller.scrollWidth,clientWidth:t.scroller.clientWidth,viewWidth:t.wrapper.clientWidth,barLeft:e.options.fixedGutter?r:0,docHeight:i,scrollHeight:i+Nr(e)+t.barHeight,nativeBarWidth:t.nativeBarWidth,gutterWidth:r}}function Ei(e,t,r){this.cm=r;var i=this.vert=_("div",[_("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar"),n=this.horiz=_("div",[_("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar");i.tabIndex=n.tabIndex=-1,e(i),e(n),be(i,"scroll",function(){i.clientHeight&&t(i.scrollTop,"vertical")}),be(n,"scroll",function(){n.clientWidth&&t(n.scrollLeft,"horizontal")}),this.checkedZeroWidth=!1,s&&a<8&&(this.horiz.style.minHeight=this.vert.style.minWidth="18px")}function Ri(){}function Fi(e,t){t=t||zi(e);var r=e.display.barWidth,i=e.display.barHeight;Bi(e,t);for(var n=0;n<4&&r!=e.display.barWidth||i!=e.display.barHeight;n++)r!=e.display.barWidth&&e.options.lineWrapping&&Si(e),Bi(e,zi(e)),r=e.display.barWidth,i=e.display.barHeight}function Bi(e,t){var r=e.display,i=r.scrollbars.update(t);r.sizer.style.paddingRight=(r.barWidth=i.right)+"px",r.sizer.style.paddingBottom=(r.barHeight=i.bottom)+"px",r.heightForcer.style.borderBottom=i.bottom+"px solid transparent",i.right&&i.bottom?(r.scrollbarFiller.style.display="block",r.scrollbarFiller.style.height=i.bottom+"px",r.scrollbarFiller.style.width=i.right+"px"):r.scrollbarFiller.style.display="",i.bottom&&e.options.coverGutterNextToScrollbar&&e.options.fixedGutter?(r.gutterFiller.style.display="block",r.gutterFiller.style.height=i.bottom+"px",r.gutterFiller.style.width=t.gutterWidth+"px"):r.gutterFiller.style.display=""}Ei.prototype.update=function(e){var t,r,i=e.scrollWidth>e.clientWidth+1,n=e.scrollHeight>e.clientHeight+1,o=e.nativeBarWidth;return n?(this.vert.style.display="block",this.vert.style.bottom=i?o+"px":"0",t=e.viewHeight-(i?o:0),this.vert.firstChild.style.height=Math.max(0,e.scrollHeight-e.clientHeight+t)+"px"):(this.vert.style.display="",this.vert.firstChild.style.height="0"),i?(this.horiz.style.display="block",this.horiz.style.right=n?o+"px":"0",this.horiz.style.left=e.barLeft+"px",r=e.viewWidth-e.barLeft-(n?o:0),this.horiz.firstChild.style.width=Math.max(0,e.scrollWidth-e.clientWidth+r)+"px"):(this.horiz.style.display="",this.horiz.firstChild.style.width="0"),!this.checkedZeroWidth&&0<e.clientHeight&&(0==o&&this.zeroWidthHack(),this.checkedZeroWidth=!0),{right:n?o:0,bottom:i?o:0}},Ei.prototype.setScrollLeft=function(e){this.horiz.scrollLeft!=e&&(this.horiz.scrollLeft=e),this.disableHoriz&&this.enableZeroWidthBar(this.horiz,this.disableHoriz,"horiz")},Ei.prototype.setScrollTop=function(e){this.vert.scrollTop!=e&&(this.vert.scrollTop=e),this.disableVert&&this.enableZeroWidthBar(this.vert,this.disableVert,"vert")},Ei.prototype.zeroWidthHack=function(){var e=b&&!d?"12px":"18px";this.horiz.style.height=this.vert.style.width=e,this.horiz.style.pointerEvents=this.vert.style.pointerEvents="none",this.disableHoriz=new R,this.disableVert=new R},Ei.prototype.enableZeroWidthBar=function(e,t,r){e.style.pointerEvents="auto",t.set(1e3,function i(){var n=e.getBoundingClientRect();("vert"==r?document.elementFromPoint(n.right-1,(n.top+n.bottom)/2):document.elementFromPoint((n.right+n.left)/2,n.bottom-1))!=e?e.style.pointerEvents="none":t.set(1e3,i)})},Ei.prototype.clear=function(){var e=this.horiz.parentNode;e.removeChild(this.horiz),e.removeChild(this.vert)},Ri.prototype.update=function(){return{bottom:0,right:0}},Ri.prototype.setScrollLeft=function(){},Ri.prototype.setScrollTop=function(){},Ri.prototype.clear=function(){};var ji={native:Ei,null:Ri};function Vi(e){e.display.scrollbars&&(e.display.scrollbars.clear(),e.display.scrollbars.addClass&&T(e.display.wrapper,e.display.scrollbars.addClass)),e.display.scrollbars=new ji[e.options.scrollbarStyle](function(t){e.display.wrapper.insertBefore(t,e.display.scrollbarFiller),be(t,"mousedown",function(){e.state.focused&&setTimeout(function(){return e.display.input.focus()},0)}),t.setAttribute("cm-not-content","true")},function(t,r){("horizontal"==r?Wi:Hi)(e,t)},e),e.display.scrollbars.addClass&&I(e.display.wrapper,e.display.scrollbars.addClass)}var Ui=0;function Gi(e){var t;e.curOp={cm:e,viewChanged:!1,startHeight:e.doc.height,forceUpdate:!1,updateInput:0,typing:!1,changeObjs:null,cursorActivityHandlers:null,cursorActivityCalled:0,selectionChanged:!1,updateMaxLine:!1,scrollLeft:null,scrollTop:null,scrollToPos:null,focus:!1,id:++Ui},t=e.curOp,lr?lr.ops.push(t):t.ownsGroup=lr={ops:[t],delayedCallbacks:[]}}function Xi(e){var t=e.curOp;t&&function(e,t){var r=e.ownsGroup;if(r)try{!function(e){var t=e.delayedCallbacks,r=0;do{for(;r<t.length;r++)t[r].call(null);for(var i=0;i<e.ops.length;i++){var n=e.ops[i];if(n.cursorActivityHandlers)for(;n.cursorActivityCalled<n.cursorActivityHandlers.length;)n.cursorActivityHandlers[n.cursorActivityCalled++].call(null,n.cm)}}while(r<t.length)}(r)}finally{lr=null,t(r)}}(t,function(e){for(var t=0;t<e.ops.length;t++)e.ops[t].cm.curOp=null;!function(e){for(var t=e.ops,r=0;r<t.length;r++)qi(t[r]);for(var i=0;i<t.length;i++)(n=t[i]).updatedDisplay=n.mustUpdate&&on(n.cm,n.update);for(var n,o=0;o<t.length;o++)Ki(t[o]);for(var s=0;s<t.length;s++)Yi(t[s]);for(var a=0;a<t.length;a++)$i(t[a])}(e)})}function qi(e){var t,r,i=e.cm,n=i.display;!(r=(t=i).display).scrollbarsClipped&&r.scroller.offsetWidth&&(r.nativeBarWidth=r.scroller.offsetWidth-r.scroller.clientWidth,r.heightForcer.style.height=Nr(t)+"px",r.sizer.style.marginBottom=-r.nativeBarWidth+"px",r.sizer.style.borderRightWidth=Nr(t)+"px",r.scrollbarsClipped=!0),e.updateMaxLine&&$t(i),e.mustUpdate=e.viewChanged||e.forceUpdate||null!=e.scrollTop||e.scrollToPos&&(e.scrollToPos.from.line<n.viewFrom||e.scrollToPos.to.line>=n.viewTo)||n.maxLineChanged&&i.options.lineWrapping,e.update=e.mustUpdate&&new nn(i,e.mustUpdate&&{top:e.scrollTop,ensure:e.scrollToPos},e.forceUpdate)}function Ki(e){var t=e.cm,r=t.display;e.updatedDisplay&&Si(t),e.barMeasure=zi(t),r.maxLineChanged&&!t.options.lineWrapping&&(e.adjustWidthTo=Or(t,r.maxLine,r.maxLine.text.length).left+3,t.display.sizerWidth=e.adjustWidthTo,e.barMeasure.scrollWidth=Math.max(r.scroller.clientWidth,r.sizer.offsetLeft+e.adjustWidthTo+Nr(t)+t.display.barWidth),e.maxScrollLeft=Math.max(0,r.sizer.offsetLeft+e.adjustWidthTo-Mr(t))),(e.updatedDisplay||e.selectionChanged)&&(e.preparedSelection=r.input.prepareSelection())}function Yi(e){var t=e.cm;null!=e.adjustWidthTo&&(t.display.sizer.style.minWidth=e.adjustWidthTo+"px",e.maxScrollLeft<t.doc.scrollLeft&&Wi(t,Math.min(t.display.scroller.scrollLeft,e.maxScrollLeft),!0),t.display.maxLineChanged=!1);var r=e.focus&&e.focus==A();e.preparedSelection&&t.display.input.showSelection(e.preparedSelection,r),!e.updatedDisplay&&e.startHeight==t.doc.height||Fi(t,e.barMeasure),e.updatedDisplay&&cn(t,e.barMeasure),e.selectionChanged&&wi(t),t.state.focused&&e.updateInput&&t.display.input.reset(e.typing),r&&ki(e.cm)}function $i(e){var t,r,i,n,o,s,a,l=e.cm,c=l.display,u=l.doc;e.updatedDisplay&&sn(l,e.update),null==c.wheelStartX||null==e.scrollTop&&null==e.scrollLeft&&!e.scrollToPos||(c.wheelStartX=c.wheelStartY=null),null!=e.scrollTop&&Di(l,e.scrollTop,e.forceScroll),null!=e.scrollLeft&&Wi(l,e.scrollLeft,!0,!0),e.scrollToPos&&(t=function(e,t,r,i){null==i&&(i=0),e.options.lineWrapping||t!=r||(r="before"==(t=t.ch?ot(t.line,"before"==t.sticky?t.ch-1:t.ch,"after"):t).sticky?ot(t.line,t.ch+1,"before"):t);for(var n=0;n<5;n++){var o,s=!1,a=Kr(e,t),l=r&&r!=t?Kr(e,r):a,c=Mi(e,o={left:Math.min(a.left,l.left),top:Math.min(a.top,l.top)-i,right:Math.max(a.left,l.left),bottom:Math.max(a.bottom,l.bottom)+i}),u=e.doc.scrollTop,p=e.doc.scrollLeft;if(null!=c.scrollTop&&(Hi(e,c.scrollTop),1<Math.abs(e.doc.scrollTop-u)&&(s=!0)),null!=c.scrollLeft&&(Wi(e,c.scrollLeft),1<Math.abs(e.doc.scrollLeft-p)&&(s=!0)),!s)break}return o}(l,ht(u,e.scrollToPos.from),ht(u,e.scrollToPos.to),e.scrollToPos.margin),i=t,xe(r=l,"scrollCursorIntoView")||(o=(n=r.display).sizer.getBoundingClientRect(),s=null,i.top+o.top<0?s=!0:i.bottom+o.top>(window.innerHeight||document.documentElement.clientHeight)&&(s=!1),null==s||f||(a=_("div","​",null,"position: absolute;\n                         top: "+(i.top-n.viewOffset-Lr(r.display))+"px;\n                         height: "+(i.bottom-i.top+Nr(r)+n.barHeight)+"px;\n                         left: "+i.left+"px; width: "+Math.max(2,i.right-i.left)+"px;"),r.display.lineSpace.appendChild(a),a.scrollIntoView(s),r.display.lineSpace.removeChild(a))));var p=e.maybeHiddenMarkers,h=e.maybeUnhiddenMarkers;if(p)for(var d=0;d<p.length;++d)p[d].lines.length||ke(p[d],"hide");if(h)for(var g=0;g<h.length;++g)h[g].lines.length&&ke(h[g],"unhide");c.wrapper.offsetHeight&&(u.scrollTop=l.display.scroller.scrollTop),e.changeObjs&&ke(l,"changes",l,e.changeObjs),e.update&&e.update.finish()}function Zi(e,t){if(e.curOp)return t();Gi(e);try{return t()}finally{Xi(e)}}function Ji(e,t){return function(){if(e.curOp)return t.apply(e,arguments);Gi(e);try{return t.apply(e,arguments)}finally{Xi(e)}}}function Qi(e){return function(){if(this.curOp)return e.apply(this,arguments);Gi(this);try{return e.apply(this,arguments)}finally{Xi(this)}}}function en(e){return function(){var t=this.cm;if(!t||t.curOp)return e.apply(this,arguments);Gi(t);try{return e.apply(this,arguments)}finally{Xi(t)}}}function tn(e,t){e.doc.highlightFrontier<e.display.viewTo&&e.state.highlight.set(t,W(rn,e))}function rn(e){var t,r,i,n=e.doc;n.highlightFrontier>=e.display.viewTo||(t=+new Date+e.options.workTime,r=bt(e,n.highlightFrontier),i=[],n.iter(r.line,Math.min(n.first+n.size,e.display.viewTo+500),function(o){if(r.line>=e.display.viewFrom){var s=o.styles,a=o.text.length>e.options.maxHighlightLength?qe(n.mode,r.state):null,l=mt(e,o,r,!0);a&&(r.state=a),o.styles=l.styles;var c=o.styleClasses,u=l.classes;u?o.styleClasses=u:c&&(o.styleClasses=null);for(var p=!s||s.length!=o.styles.length||c!=u&&(!c||!u||c.bgClass!=u.bgClass||c.textClass!=u.textClass),h=0;!p&&h<s.length;++h)p=s[h]!=o.styles[h];p&&i.push(r.line),o.stateAfter=r.save(),r.nextLine()}else o.text.length<=e.options.maxHighlightLength&&yt(e,o.text,r),o.stateAfter=r.line%5==0?r.save():null,r.nextLine();if(+new Date>t)return tn(e,e.options.workDelay),!0}),n.highlightFrontier=r.line,n.modeFrontier=Math.max(n.modeFrontier,r.line),i.length&&Zi(e,function(){for(var t=0;t<i.length;t++)pi(e,i[t],"text")}))}var nn=function(e,t,r){var i=e.display;this.viewport=t,this.visible=Ni(i,e.doc,t),this.editorIsHidden=!i.wrapper.offsetWidth,this.wrapperHeight=i.wrapper.clientHeight,this.wrapperWidth=i.wrapper.clientWidth,this.oldDisplayWidth=Mr(e),this.force=r,this.dims=ni(e),this.events=[]};function on(e,t){var r=e.display,i=e.doc;if(t.editorIsHidden)return hi(e),!1;if(!t.force&&t.visible.from>=r.viewFrom&&t.visible.to<=r.viewTo&&(null==r.updateLineNumbers||r.updateLineNumbers>=r.viewTo)&&r.renderedView==r.view&&0==fi(e))return!1;pn(e)&&(hi(e),t.dims=ni(e));var n=i.first+i.size,o=Math.max(t.visible.from-e.options.viewportMargin,i.first),s=Math.min(n,t.visible.to+e.options.viewportMargin);r.viewFrom<o&&o-r.viewFrom<20&&(o=Math.max(i.first,r.viewFrom)),r.viewTo>s&&r.viewTo-s<20&&(s=Math.min(n,r.viewTo)),Nt&&(o=Ut(e.doc,o),s=Gt(e.doc,s));var a,c,u,p,h=o!=r.viewFrom||s!=r.viewTo||r.lastWrapHeight!=t.wrapperHeight||r.lastWrapWidth!=t.wrapperWidth;c=o,u=s,0==(p=(a=e).display).view.length||c>=p.viewTo||u<=p.viewFrom?(p.view=ar(a,c,u),p.viewFrom=c):(p.viewFrom>c?p.view=ar(a,c,p.viewFrom).concat(p.view):p.viewFrom<c&&(p.view=p.view.slice(ci(a,c))),p.viewFrom=c,p.viewTo<u?p.view=p.view.concat(ar(a,p.viewTo,u)):p.viewTo>u&&(p.view=p.view.slice(0,ci(a,u)))),p.viewTo=u,r.viewOffset=Kt(Ze(e.doc,r.viewFrom)),e.display.mover.style.top=r.viewOffset+"px";var d=fi(e);if(!h&&0==d&&!t.force&&r.renderedView==r.view&&(null==r.updateLineNumbers||r.updateLineNumbers>=r.viewTo))return!1;var f,g,m,v=function(e){if(e.hasFocus())return null;var t=A();if(!t||!O(e.display.lineDiv,t))return null;var r,i={activeElt:t};return!window.getSelection||(r=window.getSelection()).anchorNode&&r.extend&&O(e.display.lineDiv,r.anchorNode)&&(i.anchorNode=r.anchorNode,i.anchorOffset=r.anchorOffset,i.focusNode=r.focusNode,i.focusOffset=r.focusOffset),i}(e);return 4<d&&(r.lineDiv.style.display="none"),function(e,t,r){var i,n,o,s,a,c=e.display,u=e.options.lineNumbers,p=c.lineDiv,h=p.firstChild;function d(t){var r=t.nextSibling;return l&&b&&e.display.currentWheelTarget==t?t.style.display="none":t.parentNode.removeChild(t),r}for(var f=c.view,g=c.viewFrom,m=0;m<f.length;m++){var v=f[m];if(!v.hidden)if(v.node&&v.node.parentNode==p){for(;h!=v.node;)h=d(h);var y=u&&null!=t&&t<=g&&v.lineNumber;v.changes&&(-1<F(v.changes,"gutter")&&(y=!1),hr(e,v,g,r)),y&&(N(v.lineNumber),v.lineNumber.appendChild(document.createTextNode(nt(e.options,g)))),h=v.node.nextSibling}else{var w=(o=g,s=r,a=fr(i=e,n=v),n.text=n.node=a.pre,a.bgClass&&(n.bgClass=a.bgClass),a.textClass&&(n.textClass=a.textClass),mr(i,n),vr(i,n,o,s),yr(i,n,s),n.node);p.insertBefore(w,h)}g+=v.size}for(;h;)h=d(h)}(e,r.updateLineNumbers,t.dims),4<d&&(r.lineDiv.style.display=""),r.renderedView=r.view,(f=v)&&f.activeElt&&f.activeElt!=A()&&(f.activeElt.focus(),!/^(INPUT|TEXTAREA)$/.test(f.activeElt.nodeName)&&f.anchorNode&&O(document.body,f.anchorNode)&&O(document.body,f.focusNode)&&(g=window.getSelection(),(m=document.createRange()).setEnd(f.anchorNode,f.anchorOffset),m.collapse(!1),g.removeAllRanges(),g.addRange(m),g.extend(f.focusNode,f.focusOffset))),N(r.cursorDiv),N(r.selectionDiv),r.gutters.style.height=r.sizer.style.minHeight=0,h&&(r.lastWrapHeight=t.wrapperHeight,r.lastWrapWidth=t.wrapperWidth,tn(e,400)),!(r.updateLineNumbers=null)}function sn(e,t){for(var r=t.viewport,i=!0;;i=!1){if(i&&e.options.lineWrapping&&t.oldDisplayWidth!=Mr(e))i&&(t.visible=Ni(e.display,e.doc,r));else if(r&&null!=r.top&&(r={top:Math.min(e.doc.height+Sr(e.display)-_r(e),r.top)}),t.visible=Ni(e.display,e.doc,r),t.visible.from>=e.display.viewFrom&&t.visible.to<=e.display.viewTo)break;if(!on(e,t))break;Si(e);var n=zi(e);gi(e),Fi(e,n),cn(e,n),t.force=!1}t.signal(e,"update",e),e.display.viewFrom==e.display.reportedViewFrom&&e.display.viewTo==e.display.reportedViewTo||(t.signal(e,"viewportChange",e,e.display.viewFrom,e.display.viewTo),e.display.reportedViewFrom=e.display.viewFrom,e.display.reportedViewTo=e.display.viewTo)}function an(e,t){var r,i=new nn(e,t);on(e,i)&&(Si(e),sn(e,i),r=zi(e),gi(e),Fi(e,r),cn(e,r),i.finish())}function ln(e){var t=e.gutters.offsetWidth;e.sizer.style.marginLeft=t+"px"}function cn(e,t){e.display.sizer.style.minHeight=t.docHeight+"px",e.display.heightForcer.style.top=t.docHeight+"px",e.display.gutters.style.height=t.docHeight+e.display.barHeight+Nr(e)+"px"}function un(e){var t=e.display,r=t.view;if(t.alignWidgets||t.gutters.firstChild&&e.options.fixedGutter){for(var i=oi(t)-t.scroller.scrollLeft+e.doc.scrollLeft,n=t.gutters.offsetWidth,o=i+"px",s=0;s<r.length;s++)if(!r[s].hidden){e.options.fixedGutter&&(r[s].gutter&&(r[s].gutter.style.left=o),r[s].gutterBackground&&(r[s].gutterBackground.style.left=o));var a=r[s].alignable;if(a)for(var l=0;l<a.length;l++)a[l].style.left=o}e.options.fixedGutter&&(t.gutters.style.left=i+n+"px")}}function pn(e){if(e.options.lineNumbers){var t=e.doc,r=nt(e.options,t.first+t.size-1),i=e.display;if(r.length!=i.lineNumChars){var n=i.measure.appendChild(_("div",[_("div",r)],"CodeMirror-linenumber CodeMirror-gutter-elt")),o=n.firstChild.offsetWidth,s=n.offsetWidth-o;return i.lineGutter.style.width="",i.lineNumInnerWidth=Math.max(o,i.lineGutter.offsetWidth-s)+1,i.lineNumWidth=i.lineNumInnerWidth+s,i.lineNumChars=i.lineNumInnerWidth?r.length:-1,i.lineGutter.style.width=i.lineNumWidth+"px",ln(e.display),1}}}function hn(e,t){for(var r=[],i=!1,n=0;n<e.length;n++){var o=e[n],s=null;if("string"!=typeof o&&(s=o.style,o=o.className),"CodeMirror-linenumbers"==o){if(!t)continue;i=!0}r.push({className:o,style:s})}return t&&!i&&r.push({className:"CodeMirror-linenumbers",style:null}),r}function dn(e){var t=e.gutters,r=e.gutterSpecs;N(t),e.lineGutter=null;for(var i=0;i<r.length;++i){var n=r[i],o=n.className,s=n.style,a=t.appendChild(_("div",null,"CodeMirror-gutter "+o));s&&(a.style.cssText=s),"CodeMirror-linenumbers"==o&&((e.lineGutter=a).style.width=(e.lineNumWidth||1)+"px")}t.style.display=r.length?"":"none",ln(e)}function fn(e){dn(e.display),ui(e),un(e)}function gn(e,t,i,n){var o=this;this.input=i,o.scrollbarFiller=_("div",null,"CodeMirror-scrollbar-filler"),o.scrollbarFiller.setAttribute("cm-not-content","true"),o.gutterFiller=_("div",null,"CodeMirror-gutter-filler"),o.gutterFiller.setAttribute("cm-not-content","true"),o.lineDiv=P("div",null,"CodeMirror-code"),o.selectionDiv=_("div",null,null,"position: relative; z-index: 1"),o.cursorDiv=_("div",null,"CodeMirror-cursors"),o.measure=_("div",null,"CodeMirror-measure"),o.lineMeasure=_("div",null,"CodeMirror-measure"),o.lineSpace=P("div",[o.measure,o.lineMeasure,o.selectionDiv,o.cursorDiv,o.lineDiv],null,"position: relative; outline: none");var c=P("div",[o.lineSpace],"CodeMirror-lines");o.mover=_("div",[c],null,"position: relative"),o.sizer=_("div",[o.mover],"CodeMirror-sizer"),o.sizerWidth=null,o.heightForcer=_("div",null,null,"position: absolute; height: "+B+"px; width: 1px;"),o.gutters=_("div",null,"CodeMirror-gutters"),o.lineGutter=null,o.scroller=_("div",[o.sizer,o.heightForcer,o.gutters],"CodeMirror-scroll"),o.scroller.setAttribute("tabIndex","-1"),o.wrapper=_("div",[o.scrollbarFiller,o.gutterFiller,o.scroller],"CodeMirror"),s&&a<8&&(o.gutters.style.zIndex=-1,o.scroller.style.paddingRight=0),l||r&&v||(o.scroller.draggable=!0),e&&(e.appendChild?e.appendChild(o.wrapper):e(o.wrapper)),o.viewFrom=o.viewTo=t.first,o.reportedViewFrom=o.reportedViewTo=t.first,o.view=[],o.renderedView=null,o.externalMeasured=null,o.viewOffset=0,o.lastWrapHeight=o.lastWrapWidth=0,o.updateLineNumbers=null,o.nativeBarWidth=o.barHeight=o.barWidth=0,o.scrollbarsClipped=!1,o.lineNumWidth=o.lineNumInnerWidth=o.lineNumChars=null,o.alignWidgets=!1,o.cachedCharWidth=o.cachedTextHeight=o.cachedPaddingH=null,o.maxLine=null,o.maxLineLength=0,o.maxLineChanged=!1,o.wheelDX=o.wheelDY=o.wheelStartX=o.wheelStartY=null,o.shift=!1,o.selForContextMenu=null,o.activeTouch=null,o.gutterSpecs=hn(n.gutters,n.lineNumbers),dn(o),i.init(o)}nn.prototype.signal=function(e,t){Le(e,t)&&this.events.push(arguments)},nn.prototype.finish=function(){for(var e=0;e<this.events.length;e++)ke.apply(null,this.events[e])};var mn=0,vn=null;function bn(e){var t=e.wheelDeltaX,r=e.wheelDeltaY;return null==t&&e.detail&&e.axis==e.HORIZONTAL_AXIS&&(t=e.detail),null==r&&e.detail&&e.axis==e.VERTICAL_AXIS?r=e.detail:null==r&&(r=e.wheelDelta),{x:t,y:r}}function yn(e,t){var i,n,o,s=bn(t),a=s.x,c=s.y,u=e.display,h=u.scroller,d=h.scrollWidth>h.clientWidth,f=h.scrollHeight>h.clientHeight;if(a&&d||c&&f){if(c&&b&&l)e:for(var g=t.target,m=u.view;g!=h;g=g.parentNode)for(var v=0;v<m.length;v++)if(m[v].node==g){e.display.currentWheelTarget=g;break e}if(a&&!r&&!p&&null!=vn)return c&&f&&Hi(e,Math.max(0,h.scrollTop+c*vn)),Wi(e,Math.max(0,h.scrollLeft+a*vn)),(!c||c&&f)&&Te(t),void(u.wheelStartX=null);c&&null!=vn&&(i=c*vn,o=(n=e.doc.scrollTop)+u.wrapper.clientHeight,i<0?n=Math.max(0,n+i-50):o=Math.min(e.doc.height,o+i+50),an(e,{top:n,bottom:o})),mn<20&&(null==u.wheelStartX?(u.wheelStartX=h.scrollLeft,u.wheelStartY=h.scrollTop,u.wheelDX=a,u.wheelDY=c,setTimeout(function(){var e,t,r;null!=u.wheelStartX&&(e=h.scrollLeft-u.wheelStartX,r=(t=h.scrollTop-u.wheelStartY)&&u.wheelDY&&t/u.wheelDY||e&&u.wheelDX&&e/u.wheelDX,u.wheelStartX=u.wheelStartY=null,r&&(vn=(vn*mn+r)/(mn+1),++mn))},200)):(u.wheelDX+=a,u.wheelDY+=c))}}s?vn=-.53:r?vn=15:u?vn=-.7:h&&(vn=-1/3);var wn=function(e,t){this.ranges=e,this.primIndex=t};wn.prototype.primary=function(){return this.ranges[this.primIndex]},wn.prototype.equals=function(e){if(e==this)return!0;if(e.primIndex!=this.primIndex||e.ranges.length!=this.ranges.length)return!1;for(var t=0;t<this.ranges.length;t++){var r=this.ranges[t],i=e.ranges[t];if(!at(r.anchor,i.anchor)||!at(r.head,i.head))return!1}return!0},wn.prototype.deepCopy=function(){for(var e=[],t=0;t<this.ranges.length;t++)e[t]=new kn(lt(this.ranges[t].anchor),lt(this.ranges[t].head));return new wn(e,this.primIndex)},wn.prototype.somethingSelected=function(){for(var e=0;e<this.ranges.length;e++)if(!this.ranges[e].empty())return!0;return!1},wn.prototype.contains=function(e,t){t=t||e;for(var r=0;r<this.ranges.length;r++){var i=this.ranges[r];if(0<=st(t,i.from())&&st(e,i.to())<=0)return r}return-1};var kn=function(e,t){this.anchor=e,this.head=t};function xn(e,t,r){var i=e&&e.options.selectionsMayTouch,n=t[r];t.sort(function(e,t){return st(e.from(),t.from())}),r=F(t,n);for(var o=1;o<t.length;o++){var s,a,l,c=t[o],u=t[o-1],p=st(u.to(),c.from());(i&&!c.empty()?0<p:0<=p)&&(s=ut(u.from(),c.from()),a=ct(u.to(),c.to()),l=u.empty()?c.from()==c.head:u.from()==u.head,o<=r&&--r,t.splice(--o,2,new kn(l?a:s,l?s:a)))}return new wn(t,r)}function Cn(e,t){return new wn([new kn(e,t||e)],0)}function Ln(e){return e.text?ot(e.from.line+e.text.length-1,Y(e.text).length+(1==e.text.length?e.from.ch:0)):e.to}function Sn(e,t){if(st(e,t.from)<0)return e;if(st(e,t.to)<=0)return Ln(t);var r=e.line+t.text.length-(t.to.line-t.from.line)-1,i=e.ch;return e.line==t.to.line&&(i+=Ln(t).ch-t.to.ch),ot(r,i)}function Tn(e,t){for(var r=[],i=0;i<e.sel.ranges.length;i++){var n=e.sel.ranges[i];r.push(new kn(Sn(n.anchor,t),Sn(n.head,t)))}return xn(e.cm,r,e.sel.primIndex)}function Nn(e,t,r){return e.line==t.line?ot(r.line,e.ch-t.ch+r.ch):ot(r.line+(e.line-t.line),e.ch)}function Mn(e){e.doc.mode=Ge(e.options,e.doc.modeOption),_n(e)}function _n(e){e.doc.iter(function(e){e.stateAfter&&(e.stateAfter=null),e.styles&&(e.styles=null)}),e.doc.modeFrontier=e.doc.highlightFrontier=e.doc.first,tn(e,100),e.state.modeGen++,e.curOp&&ui(e)}function Pn(e,t){return 0==t.from.ch&&0==t.to.ch&&""==Y(t.text)&&(!e.cm||e.cm.options.wholeLineUpdateBefore)}function On(e,t,r,i){function n(e){return r?r[e]:null}function o(e,r,n){!function(e,t,r,i){e.text=t,e.stateAfter&&(e.stateAfter=null),e.styles&&(e.styles=null),null!=e.order&&(e.order=null),It(e),Ht(e,r);var n=i?i(e):1;n!=e.height&&et(e,n)}(e,r,n,i),ur(e,"change",e,t)}function s(e,t){for(var r=[],o=e;o<t;++o)r.push(new Zt(h[o],n(o),i));return r}var a,l,c,u=t.from,p=t.to,h=t.text,d=Ze(e,u.line),f=Ze(e,p.line),g=Y(h),m=n(h.length-1),v=p.line-u.line;t.full?(e.insert(0,s(0,h.length)),e.remove(h.length,e.size-h.length)):Pn(e,t)?(a=s(0,h.length-1),o(f,f.text,m),v&&e.remove(u.line,v),a.length&&e.insert(u.line,a)):d==f?1==h.length?o(d,d.text.slice(0,u.ch)+g+d.text.slice(p.ch),m):((l=s(1,h.length-1)).push(new Zt(g+d.text.slice(p.ch),m,i)),o(d,d.text.slice(0,u.ch)+h[0],n(0)),e.insert(u.line+1,l)):1==h.length?(o(d,d.text.slice(0,u.ch)+h[0]+f.text.slice(p.ch),n(0)),e.remove(u.line+1,v)):(o(d,d.text.slice(0,u.ch)+h[0],n(0)),o(f,g+f.text.slice(p.ch),m),c=s(1,h.length-1),1<v&&e.remove(u.line+1,v-1),e.insert(u.line+1,c)),ur(e,"change",e,t)}function An(e,t,r){!function e(i,n,o){if(i.linked)for(var s=0;s<i.linked.length;++s){var a,l=i.linked[s];l.doc!=n&&(a=o&&l.sharedHist,r&&!a||(t(l.doc,a),e(l.doc,i,a)))}}(e,null,!0)}function In(e,t){if(t.cm)throw new Error("This document is already in use.");ai((e.doc=t).cm=e),Mn(e),Hn(e),e.options.lineWrapping||$t(e),e.options.mode=t.modeOption,ui(e)}function Hn(e){("rtl"==e.doc.direction?I:T)(e.display.lineDiv,"CodeMirror-rtl")}function Dn(e){this.done=[],this.undone=[],this.undoDepth=1/0,this.lastModTime=this.lastSelTime=0,this.lastOp=this.lastSelOp=null,this.lastOrigin=this.lastSelOrigin=null,this.generation=this.maxGeneration=e||1}function Wn(e,t){var r={from:lt(t.from),to:Ln(t),text:Je(e,t.from,t.to)};return Fn(e,r,t.from.line,t.to.line+1),An(e,function(e){return Fn(e,r,t.from.line,t.to.line+1)},!0),r}function zn(e){for(;e.length&&Y(e).ranges;)e.pop()}function En(e,t,r,i){var n=e.history;n.undone.length=0;var o,s,a,l=+new Date;if((n.lastOp==i||n.lastOrigin==t.origin&&t.origin&&("+"==t.origin.charAt(0)&&n.lastModTime>l-(e.cm?e.cm.options.historyEventDelay:500)||"*"==t.origin.charAt(0)))&&(o=(a=n).lastOp==i?(zn(a.done),Y(a.done)):a.done.length&&!Y(a.done).ranges?Y(a.done):1<a.done.length&&!a.done[a.done.length-2].ranges?(a.done.pop(),Y(a.done)):void 0))s=Y(o.changes),0==st(t.from,t.to)&&0==st(t.from,s.to)?s.to=Ln(t):o.changes.push(Wn(e,t));else{var c=Y(n.done);for(c&&c.ranges||Rn(e.sel,n.done),o={changes:[Wn(e,t)],generation:n.generation},n.done.push(o);n.done.length>n.undoDepth;)n.done.shift(),n.done[0].ranges||n.done.shift()}n.done.push(r),n.generation=++n.maxGeneration,n.lastModTime=n.lastSelTime=l,n.lastOp=n.lastSelOp=i,n.lastOrigin=n.lastSelOrigin=t.origin,s||ke(e,"historyAdded")}function Rn(e,t){var r=Y(t);r&&r.ranges&&r.equals(e)||t.push(e)}function Fn(e,t,r,i){var n=t["spans_"+e.id],o=0;e.iter(Math.max(e.first,r),Math.min(e.first+e.size,i),function(r){r.markedSpans&&((n=n||(t["spans_"+e.id]={}))[o]=r.markedSpans),++o})}function Bn(e){if(!e)return null;for(var t,r=0;r<e.length;++r)e[r].marker.explicitlyCleared?t=t||e.slice(0,r):t&&t.push(e[r]);return t?t.length?t:null:e}function jn(e,t){var r=function(e,t){var r=t["spans_"+e.id];if(!r)return null;for(var i=[],n=0;n<t.text.length;++n)i.push(Bn(r[n]));return i}(e,t),i=Ot(e,t);if(!r)return i;if(!i)return r;for(var n=0;n<r.length;++n){var o=r[n],s=i[n];if(o&&s)e:for(var a=0;a<s.length;++a){for(var l=s[a],c=0;c<o.length;++c)if(o[c].marker==l.marker)continue e;o.push(l)}else s&&(r[n]=s)}return r}function Vn(e,t,r){for(var i=[],n=0;n<e.length;++n){var o=e[n];if(o.ranges)i.push(r?wn.prototype.deepCopy.call(o):o);else{var s=o.changes,a=[];i.push({changes:a});for(var l=0;l<s.length;++l){var c=s[l],u=void 0;if(a.push({from:c.from,to:c.to,text:c.text}),t)for(var p in c)(u=p.match(/^spans_(\d+)$/))&&-1<F(t,Number(u[1]))&&(Y(a)[p]=c[p],delete c[p])}}}return i}function Un(e,t,r,i){if(i){var n,o=e.anchor;return r&&((n=st(t,o)<0)!=st(r,o)<0?(o=t,t=r):n!=st(t,r)<0&&(t=r)),new kn(o,t)}return new kn(r||t,t)}function Gn(e,t,r,i,n){null==n&&(n=e.cm&&(e.cm.display.shift||e.extend)),$n(e,new wn([Un(e.sel.primary(),t,r,n)],0),i)}function Xn(e,t,r){for(var i=[],n=e.cm&&(e.cm.display.shift||e.extend),o=0;o<e.sel.ranges.length;o++)i[o]=Un(e.sel.ranges[o],t[o],null,n);$n(e,xn(e.cm,i,e.sel.primIndex),r)}function qn(e,t,r,i){var n=e.sel.ranges.slice(0);n[t]=r,$n(e,xn(e.cm,n,e.sel.primIndex),i)}function Kn(e,t,r,i){$n(e,Cn(t,r),i)}function Yn(e,t,r){var i=e.history.done,n=Y(i);n&&n.ranges?Zn(e,i[i.length-1]=t,r):$n(e,t,r)}function $n(e,t,r){Zn(e,t,r),function(e,t,r,i){var n,o,s,a,l,c=e.history,u=i&&i.origin;r==c.lastSelOp||u&&c.lastSelOrigin==u&&(c.lastModTime==c.lastSelTime&&c.lastOrigin==u||(n=e,o=u,s=Y(c.done),a=t,"*"==(l=o.charAt(0))||"+"==l&&s.ranges.length==a.ranges.length&&s.somethingSelected()==a.somethingSelected()&&new Date-n.history.lastSelTime<=(n.cm?n.cm.options.historyEventDelay:500)))?c.done[c.done.length-1]=t:Rn(t,c.done),c.lastSelTime=+new Date,c.lastSelOrigin=u,c.lastSelOp=r,i&&!1!==i.clearRedo&&zn(c.undone)}(e,e.sel,e.cm?e.cm.curOp.id:NaN,r)}function Zn(e,t,r){var i,n,o,s;(Le(e,"beforeSelectionChange")||e.cm&&Le(e.cm,"beforeSelectionChange"))&&(i=e,o=r,s={ranges:(n=t).ranges,update:function(e){this.ranges=[];for(var t=0;t<e.length;t++)this.ranges[t]=new kn(ht(i,e[t].anchor),ht(i,e[t].head))},origin:o&&o.origin},ke(i,"beforeSelectionChange",i,s),i.cm&&ke(i.cm,"beforeSelectionChange",i.cm,s),t=s.ranges!=n.ranges?xn(i.cm,s.ranges,s.ranges.length-1):n);var a=r&&r.bias||(st(t.primary().head,e.sel.primary().head)<0?-1:1);Jn(e,eo(e,t,a,!0)),r&&!1===r.scroll||!e.cm||Pi(e.cm)}function Jn(e,t){t.equals(e.sel)||(e.sel=t,e.cm&&(e.cm.curOp.updateInput=1,e.cm.curOp.selectionChanged=!0,Ce(e.cm)),ur(e,"cursorActivity",e))}function Qn(e){Jn(e,eo(e,e.sel,null,!1))}function eo(e,t,r,i){for(var n,o=0;o<t.ranges.length;o++){var s=t.ranges[o],a=t.ranges.length==e.sel.ranges.length&&e.sel.ranges[o],l=ro(e,s.anchor,a&&a.anchor,r,i),c=ro(e,s.head,a&&a.head,r,i);!n&&l==s.anchor&&c==s.head||((n=n||t.ranges.slice(0,o))[o]=new kn(l,c))}return n?xn(e.cm,n,t.primIndex):t}function to(e,t,r,i,n){var o=Ze(e,t.line);if(o.markedSpans)for(var s=0;s<o.markedSpans.length;++s){var a=o.markedSpans[s],l=a.marker,c="selectLeft"in l?!l.selectLeft:l.inclusiveLeft,u="selectRight"in l?!l.selectRight:l.inclusiveRight;if((null==a.from||(c?a.from<=t.ch:a.from<t.ch))&&(null==a.to||(u?a.to>=t.ch:a.to>t.ch))){if(n&&(ke(l,"beforeCursorEnter"),l.explicitlyCleared)){if(o.markedSpans){--s;continue}break}if(!l.atomic)continue;if(r){var p=l.find(i<0?1:-1),h=void 0;if((i<0?u:c)&&(p=io(e,p,-i,p&&p.line==t.line?o:null)),p&&p.line==t.line&&(h=st(p,r))&&(i<0?h<0:0<h))return to(e,p,t,i,n)}var d=l.find(i<0?-1:1);return(i<0?c:u)&&(d=io(e,d,i,d.line==t.line?o:null)),d?to(e,d,t,i,n):null}}return t}function ro(e,t,r,i,n){var o=i||1;return to(e,t,r,o,n)||!n&&to(e,t,r,o,!0)||to(e,t,r,-o,n)||!n&&to(e,t,r,-o,!0)||(e.cantEdit=!0,ot(e.first,0))}function io(e,t,r,i){return r<0&&0==t.ch?t.line>e.first?ht(e,ot(t.line-1)):null:0<r&&t.ch==(i||Ze(e,t.line)).text.length?t.line<e.first+e.size-1?ot(t.line+1,0):null:new ot(t.line,t.ch+r)}function no(e){e.setSelection(ot(e.firstLine(),0),ot(e.lastLine()),V)}function oo(e,t,r){var i={canceled:!1,from:t.from,to:t.to,text:t.text,origin:t.origin,cancel:function(){return i.canceled=!0}};return r&&(i.update=function(t,r,n,o){t&&(i.from=ht(e,t)),r&&(i.to=ht(e,r)),n&&(i.text=n),void 0!==o&&(i.origin=o)}),ke(e,"beforeChange",e,i),e.cm&&ke(e.cm,"beforeChange",e.cm,i),i.canceled?(e.cm&&(e.cm.curOp.updateInput=2),null):{from:i.from,to:i.to,text:i.text,origin:i.origin}}function so(e,t,r){if(e.cm){if(!e.cm.curOp)return Ji(e.cm,so)(e,t,r);if(e.cm.state.suppressEdits)return}if(!(Le(e,"beforeChange")||e.cm&&Le(e.cm,"beforeChange"))||(t=oo(e,t,!0))){var i=Tt&&!r&&function(e,t,r){var i=null;if(e.iter(t.line,r.line+1,function(e){if(e.markedSpans)for(var t=0;t<e.markedSpans.length;++t){var r=e.markedSpans[t].marker;!r.readOnly||i&&-1!=F(i,r)||(i=i||[]).push(r)}}),!i)return null;for(var n=[{from:t,to:r}],o=0;o<i.length;++o)for(var s=i[o],a=s.find(0),l=0;l<n.length;++l){var c,u,p,h=n[l];st(h.to,a.from)<0||0<st(h.from,a.to)||(c=[l,1],u=st(h.from,a.from),p=st(h.to,a.to),(u<0||!s.inclusiveLeft&&!u)&&c.push({from:h.from,to:a.from}),(0<p||!s.inclusiveRight&&!p)&&c.push({from:a.to,to:h.to}),n.splice.apply(n,c),l+=c.length-3)}return n}(e,t.from,t.to);if(i)for(var n=i.length-1;0<=n;--n)ao(e,{from:i[n].from,to:i[n].to,text:n?[""]:t.text,origin:t.origin});else ao(e,t)}}function ao(e,t){var r,i;1==t.text.length&&""==t.text[0]&&0==st(t.from,t.to)||(r=Tn(e,t),En(e,t,r,e.cm?e.cm.curOp.id:NaN),uo(e,t,r,Ot(e,t)),i=[],An(e,function(e,r){r||-1!=F(i,e.history)||(go(e.history,t),i.push(e.history)),uo(e,t,null,Ot(e,t))}))}function lo(e,t,r){var i=e.cm&&e.cm.state.suppressEdits;if(!i||r){for(var n,o=e.history,s=e.sel,a="undo"==t?o.done:o.undone,l="undo"==t?o.undone:o.done,c=0;c<a.length&&(n=a[c],r?!n.ranges||n.equals(e.sel):n.ranges);c++);if(c!=a.length){for(o.lastOrigin=o.lastSelOrigin=null;;){if(!(n=a.pop()).ranges){if(i)return void a.push(n);break}if(Rn(n,l),r&&!n.equals(e.sel))return void $n(e,n,{clearRedo:!1});s=n}var u=[];Rn(s,l),l.push({changes:u,generation:o.generation}),o.generation=n.generation||++o.maxGeneration;for(var p=Le(e,"beforeChange")||e.cm&&Le(e.cm,"beforeChange"),h=function(r){var i=n.changes[r];if(i.origin=t,p&&!oo(e,i,!1))return a.length=0,{};u.push(Wn(e,i));var o=r?Tn(e,i):Y(a);uo(e,i,o,jn(e,i)),!r&&e.cm&&e.cm.scrollIntoView({from:i.from,to:Ln(i)});var s=[];An(e,function(e,t){t||-1!=F(s,e.history)||(go(e.history,i),s.push(e.history)),uo(e,i,null,jn(e,i))})},d=n.changes.length-1;0<=d;--d){var f=h(d);if(f)return f.v}}}}function co(e,t){if(0!=t&&(e.first+=t,e.sel=new wn($(e.sel.ranges,function(e){return new kn(ot(e.anchor.line+t,e.anchor.ch),ot(e.head.line+t,e.head.ch))}),e.sel.primIndex),e.cm)){ui(e.cm,e.first,e.first-t,t);for(var r=e.cm.display,i=r.viewFrom;i<r.viewTo;i++)pi(e.cm,i,"gutter")}}function uo(e,t,r,i){if(e.cm&&!e.cm.curOp)return Ji(e.cm,uo)(e,t,r,i);var n,o;t.to.line<e.first?co(e,t.text.length-1-(t.to.line-t.from.line)):t.from.line>e.lastLine()||(t.from.line<e.first&&(co(e,n=t.text.length-1-(e.first-t.from.line)),t={from:ot(e.first,0),to:ot(t.to.line+n,t.to.ch),text:[Y(t.text)],origin:t.origin}),o=e.lastLine(),t.to.line>o&&(t={from:t.from,to:ot(o,Ze(e,o).text.length),text:[t.text[0]],origin:t.origin}),t.removed=Je(e,t.from,t.to),r=r||Tn(e,t),e.cm?function(e,t,r){var i=e.doc,n=e.display,o=t.from,s=t.to,a=!1,l=o.line;e.options.lineWrapping||(l=tt(Vt(Ze(i,o.line))),i.iter(l,s.line+1,function(e){if(e==n.maxLine)return a=!0})),-1<i.sel.contains(t.from,t.to)&&Ce(e),On(i,t,r,si(e)),e.options.lineWrapping||(i.iter(l,o.line+t.text.length,function(e){var t=Yt(e);t>n.maxLineLength&&(n.maxLine=e,n.maxLineLength=t,n.maxLineChanged=!0,a=!1)}),a&&(e.curOp.updateMaxLine=!0)),function(e,t){if(e.modeFrontier=Math.min(e.modeFrontier,t),!(e.highlightFrontier<t-10)){for(var r=e.first,i=t-1;r<i;i--){var n=Ze(e,i).stateAfter;if(n&&(!(n instanceof ft)||i+n.lookAhead<t)){r=i+1;break}}e.highlightFrontier=Math.min(e.highlightFrontier,r)}}(i,o.line),tn(e,400);var c=t.text.length-(s.line-o.line)-1;t.full?ui(e):o.line!=s.line||1!=t.text.length||Pn(e.doc,t)?ui(e,o.line,s.line+1,c):pi(e,o.line,"text");var u,p=Le(e,"changes"),h=Le(e,"change");(h||p)&&(u={from:o,to:s,text:t.text,removed:t.removed,origin:t.origin},h&&ur(e,"change",e,u),p&&(e.curOp.changeObjs||(e.curOp.changeObjs=[])).push(u)),e.display.selForContextMenu=null}(e.cm,t,i):On(e,t,i),Zn(e,r,V),e.cantEdit&&ro(e,ot(e.firstLine(),0))&&(e.cantEdit=!1))}function po(e,t,r,i,n){var o;st(i=i||r,r)<0&&(r=(o=[i,r])[0],i=o[1]),"string"==typeof t&&(t=e.splitLines(t)),so(e,{from:r,to:i,text:t,origin:n})}function ho(e,t,r,i){r<e.line?e.line+=i:t<e.line&&(e.line=t,e.ch=0)}function fo(e,t,r,i){for(var n=0;n<e.length;++n){var o=e[n],s=!0;if(o.ranges){o.copied||((o=e[n]=o.deepCopy()).copied=!0);for(var a=0;a<o.ranges.length;a++)ho(o.ranges[a].anchor,t,r,i),ho(o.ranges[a].head,t,r,i)}else{for(var l=0;l<o.changes.length;++l){var c=o.changes[l];if(r<c.from.line)c.from=ot(c.from.line+i,c.from.ch),c.to=ot(c.to.line+i,c.to.ch);else if(t<=c.to.line){s=!1;break}}s||(e.splice(0,n+1),n=0)}}}function go(e,t){var r=t.from.line,i=t.to.line,n=t.text.length-(i-r)-1;fo(e.done,r,i,n),fo(e.undone,r,i,n)}function mo(e,t,r,i){var n=t,o=t;return"number"==typeof t?o=Ze(e,pt(e,t)):n=tt(t),null==n?null:(i(o,n)&&e.cm&&pi(e.cm,n,r),o)}function vo(e){this.lines=e,this.parent=null;for(var t=0,r=0;r<e.length;++r)e[r].parent=this,t+=e[r].height;this.height=t}function bo(e){this.children=e;for(var t=0,r=0,i=0;i<e.length;++i){var n=e[i];t+=n.chunkSize(),r+=n.height,n.parent=this}this.size=t,this.height=r,this.parent=null}function yo(e,t,r){if(r)for(var i in r)r.hasOwnProperty(i)&&(this[i]=r[i]);this.doc=e,this.node=t}function wo(e,t,r){Kt(t)<(e.curOp&&e.curOp.scrollTop||e.doc.scrollTop)&&_i(e,r)}kn.prototype.from=function(){return ut(this.anchor,this.head)},kn.prototype.to=function(){return ct(this.anchor,this.head)},kn.prototype.empty=function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch},vo.prototype={chunkSize:function(){return this.lines.length},removeInner:function(e,t){for(var r,i=e,n=e+t;i<n;++i){var o=this.lines[i];this.height-=o.height,(r=o).parent=null,It(r),ur(o,"delete")}this.lines.splice(e,t)},collapse:function(e){e.push.apply(e,this.lines)},insertInner:function(e,t,r){this.height+=r,this.lines=this.lines.slice(0,e).concat(t).concat(this.lines.slice(e));for(var i=0;i<t.length;++i)t[i].parent=this},iterN:function(e,t,r){for(var i=e+t;e<i;++e)if(r(this.lines[e]))return!0}},bo.prototype={chunkSize:function(){return this.size},removeInner:function(e,t){this.size-=t;for(var r,i=0;i<this.children.length;++i){var n=this.children[i],o=n.chunkSize();if(e<o){var s=Math.min(t,o-e),a=n.height;if(n.removeInner(e,s),this.height-=a-n.height,o==s&&(this.children.splice(i--,1),n.parent=null),0==(t-=s))break;e=0}else e-=o}this.size-t<25&&(1<this.children.length||!(this.children[0]instanceof vo))&&(r=[],this.collapse(r),this.children=[new vo(r)],this.children[0].parent=this)},collapse:function(e){for(var t=0;t<this.children.length;++t)this.children[t].collapse(e)},insertInner:function(e,t,r){this.size+=t.length,this.height+=r;for(var i=0;i<this.children.length;++i){var n=this.children[i],o=n.chunkSize();if(e<=o){if(n.insertInner(e,t,r),n.lines&&50<n.lines.length){for(var s=n.lines.length%25+25,a=s;a<n.lines.length;){var l=new vo(n.lines.slice(a,a+=25));n.height-=l.height,this.children.splice(++i,0,l),l.parent=this}n.lines=n.lines.slice(0,s),this.maybeSpill()}break}e-=o}},maybeSpill:function(){if(!(this.children.length<=10)){var e=this;do{var t,r,i=new bo(e.children.splice(e.children.length-5,5));e.parent?(e.size-=i.size,e.height-=i.height,t=F(e.parent.children,e),e.parent.children.splice(t+1,0,i)):(((r=new bo(e.children)).parent=e).children=[r,i],e=r),i.parent=e.parent}while(10<e.children.length);e.parent.maybeSpill()}},iterN:function(e,t,r){for(var i=0;i<this.children.length;++i){var n=this.children[i],o=n.chunkSize();if(e<o){var s=Math.min(t,o-e);if(n.iterN(e,s,r))return!0;if(0==(t-=s))break;e=0}else e-=o}}},yo.prototype.clear=function(){var e=this.doc.cm,t=this.line.widgets,r=this.line,i=tt(r);if(null!=i&&t){for(var n=0;n<t.length;++n)t[n]==this&&t.splice(n--,1);t.length||(r.widgets=null);var o=xr(this);et(r,Math.max(0,r.height-o)),e&&(Zi(e,function(){wo(e,r,-o),pi(e,i,"widget")}),ur(e,"lineWidgetCleared",e,this,i))}},yo.prototype.changed=function(){var e=this,t=this.height,r=this.doc.cm,i=this.line;this.height=null;var n=xr(this)-t;n&&(Xt(this.doc,i)||et(i,i.height+n),r&&Zi(r,function(){r.curOp.forceUpdate=!0,wo(r,i,n),ur(r,"lineWidgetChanged",r,e,tt(i))}))},Se(yo);var ko=0,xo=function(e,t){this.lines=[],this.type=t,this.doc=e,this.id=++ko};function Co(e,t,r,i,n){if(i&&i.shared)return function(e,t,r,i,n){(i=z(i)).shared=!1;var o=[Co(e,t,r,i,n)],s=o[0],a=i.widgetNode;return An(e,function(e){a&&(i.widgetNode=a.cloneNode(!0)),o.push(Co(e,ht(e,t),ht(e,r),i,n));for(var l=0;l<e.linked.length;++l)if(e.linked[l].isParent)return;s=Y(o)}),new Lo(o,s)}(e,t,r,i,n);if(e.cm&&!e.cm.curOp)return Ji(e.cm,Co)(e,t,r,i,n);var o=new xo(e,n),s=st(t,r);if(i&&z(i,o,!1),0<s||0==s&&!1!==o.clearWhenEmpty)return o;if(o.replacedWith&&(o.collapsed=!0,o.widgetNode=P("span",[o.replacedWith],"CodeMirror-widget"),i.handleMouseEvents||o.widgetNode.setAttribute("cm-ignore-events","true"),i.insertLeft&&(o.widgetNode.insertLeft=!0)),o.collapsed){if(jt(e,t.line,t,r,o)||t.line!=r.line&&jt(e,r.line,t,r,o))throw new Error("Inserting collapsed marker partially overlapping an existing one");Nt=!0}o.addToHistory&&En(e,{from:t,to:r,origin:"markText"},e.sel,NaN);var a,l=t.line,c=e.cm;if(e.iter(l,r.line+1,function(e){var i,n;c&&o.collapsed&&!c.options.lineWrapping&&Vt(e)==c.display.maxLine&&(a=!0),o.collapsed&&l!=t.line&&et(e,0),i=e,n=new Mt(o,l==t.line?t.ch:null,l==r.line?r.ch:null),i.markedSpans=i.markedSpans?i.markedSpans.concat([n]):[n],n.marker.attachLine(i),++l}),o.collapsed&&e.iter(t.line,r.line+1,function(t){Xt(e,t)&&et(t,0)}),o.clearOnEnter&&be(o,"beforeCursorEnter",function(){return o.clear()}),o.readOnly&&(Tt=!0,(e.history.done.length||e.history.undone.length)&&e.clearHistory()),o.collapsed&&(o.id=++ko,o.atomic=!0),c){if(a&&(c.curOp.updateMaxLine=!0),o.collapsed)ui(c,t.line,r.line+1);else if(o.className||o.startStyle||o.endStyle||o.css||o.attributes||o.title)for(var u=t.line;u<=r.line;u++)pi(c,u,"text");o.atomic&&Qn(c.doc),ur(c,"markerAdded",c,o)}return o}xo.prototype.clear=function(){var e=this;if(!this.explicitlyCleared){var t,r=this.doc.cm,i=r&&!r.curOp;i&&Gi(r),!Le(this,"clear")||(t=this.find())&&ur(this,"clear",t.from,t.to);for(var n=null,o=null,s=0;s<this.lines.length;++s){var a=e.lines[s],l=_t(a.markedSpans,e);r&&!e.collapsed?pi(r,tt(a),"text"):r&&(null!=l.to&&(o=tt(a)),null!=l.from&&(n=tt(a))),a.markedSpans=Pt(a.markedSpans,l),null==l.from&&e.collapsed&&!Xt(e.doc,a)&&r&&et(a,ri(r.display))}if(r&&this.collapsed&&!r.options.lineWrapping)for(var c=0;c<this.lines.length;++c){var u=Vt(e.lines[c]),p=Yt(u);p>r.display.maxLineLength&&(r.display.maxLine=u,r.display.maxLineLength=p,r.display.maxLineChanged=!0)}null!=n&&r&&this.collapsed&&ui(r,n,o+1),this.lines.length=0,this.explicitlyCleared=!0,this.atomic&&this.doc.cantEdit&&(this.doc.cantEdit=!1,r&&Qn(r.doc)),r&&ur(r,"markerCleared",r,this,n,o),i&&Xi(r),this.parent&&this.parent.clear()}},xo.prototype.find=function(e,t){var r,i;null==e&&"bookmark"==this.type&&(e=1);for(var n=0;n<this.lines.length;++n){var o=this.lines[n],s=_t(o.markedSpans,this);if(null!=s.from&&(r=ot(t?o:tt(o),s.from),-1==e))return r;if(null!=s.to&&(i=ot(t?o:tt(o),s.to),1==e))return i}return r&&{from:r,to:i}},xo.prototype.changed=function(){var e=this,t=this.find(-1,!0),r=this,i=this.doc.cm;t&&i&&Zi(i,function(){var n,o,s=t.line,a=tt(t.line),l=Ar(i,a);l&&(Rr(l),i.curOp.selectionChanged=i.curOp.forceUpdate=!0),i.curOp.updateMaxLine=!0,Xt(r.doc,s)||null==r.height||(n=r.height,r.height=null,(o=xr(r)-n)&&et(s,s.height+o)),ur(i,"markerChanged",i,e)})},xo.prototype.attachLine=function(e){var t;!this.lines.length&&this.doc.cm&&((t=this.doc.cm.curOp).maybeHiddenMarkers&&-1!=F(t.maybeHiddenMarkers,this)||(t.maybeUnhiddenMarkers||(t.maybeUnhiddenMarkers=[])).push(this)),this.lines.push(e)},xo.prototype.detachLine=function(e){var t;this.lines.splice(F(this.lines,e),1),!this.lines.length&&this.doc.cm&&((t=this.doc.cm.curOp).maybeHiddenMarkers||(t.maybeHiddenMarkers=[])).push(this)},Se(xo);var Lo=function(e,t){this.markers=e,this.primary=t;for(var r=0;r<e.length;++r)e[r].parent=this};function So(e){return e.findMarks(ot(e.first,0),e.clipPos(ot(e.lastLine())),function(e){return e.parent})}function To(e){for(var t=function(t){var r=e[t],i=[r.primary.doc];An(r.primary.doc,function(e){return i.push(e)});for(var n=0;n<r.markers.length;n++){var o=r.markers[n];-1==F(i,o.doc)&&(o.parent=null,r.markers.splice(n--,1))}},r=0;r<e.length;r++)t(r)}Lo.prototype.clear=function(){if(!this.explicitlyCleared){this.explicitlyCleared=!0;for(var e=0;e<this.markers.length;++e)this.markers[e].clear();ur(this,"clear")}},Lo.prototype.find=function(e,t){return this.primary.find(e,t)},Se(Lo);var No=0,Mo=function(e,t,r,i,n){if(!(this instanceof Mo))return new Mo(e,t,r,i,n);null==r&&(r=0),bo.call(this,[new vo([new Zt("",null)])]),this.first=r,this.scrollTop=this.scrollLeft=0,this.cantEdit=!1,this.cleanGeneration=1,this.modeFrontier=this.highlightFrontier=r;var o=ot(r,0);this.sel=Cn(o),this.history=new Dn(null),this.id=++No,this.modeOption=t,this.lineSep=i,this.direction="rtl"==n?"rtl":"ltr",this.extend=!1,"string"==typeof e&&(e=this.splitLines(e)),On(this,{from:o,to:o,text:e}),$n(this,Cn(o),V)};Mo.prototype=J(bo.prototype,{constructor:Mo,iter:function(e,t,r){r?this.iterN(e-this.first,t-e,r):this.iterN(this.first,this.first+this.size,e)},insert:function(e,t){for(var r=0,i=0;i<t.length;++i)r+=t[i].height;this.insertInner(e-this.first,t,r)},remove:function(e,t){this.removeInner(e-this.first,t)},getValue:function(e){var t=Qe(this,this.first,this.first+this.size);return!1===e?t:t.join(e||this.lineSeparator())},setValue:en(function(e){var t=ot(this.first,0),r=this.first+this.size-1;so(this,{from:t,to:ot(r,Ze(this,r).text.length),text:this.splitLines(e),origin:"setValue",full:!0},!0),this.cm&&Oi(this.cm,0,0),$n(this,Cn(t),V)}),replaceRange:function(e,t,r,i){po(this,e,t=ht(this,t),r=r?ht(this,r):t,i)},getRange:function(e,t,r){var i=Je(this,ht(this,e),ht(this,t));return!1===r?i:i.join(r||this.lineSeparator())},getLine:function(e){var t=this.getLineHandle(e);return t&&t.text},getLineHandle:function(e){if(it(this,e))return Ze(this,e)},getLineNumber:tt,getLineHandleVisualStart:function(e){return"number"==typeof e&&(e=Ze(this,e)),Vt(e)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(e){return ht(this,e)},getCursor:function(e){var t=this.sel.primary();return null==e||"head"==e?t.head:"anchor"==e?t.anchor:"end"==e||"to"==e||!1===e?t.to():t.from()},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:en(function(e,t,r){Kn(this,ht(this,"number"==typeof e?ot(e,t||0):e),null,r)}),setSelection:en(function(e,t,r){Kn(this,ht(this,e),ht(this,t||e),r)}),extendSelection:en(function(e,t,r){Gn(this,ht(this,e),t&&ht(this,t),r)}),extendSelections:en(function(e,t){Xn(this,dt(this,e),t)}),extendSelectionsBy:en(function(e,t){Xn(this,dt(this,$(this.sel.ranges,e)),t)}),setSelections:en(function(e,t,r){if(e.length){for(var i=[],n=0;n<e.length;n++)i[n]=new kn(ht(this,e[n].anchor),ht(this,e[n].head));null==t&&(t=Math.min(e.length-1,this.sel.primIndex)),$n(this,xn(this.cm,i,t),r)}}),addSelection:en(function(e,t,r){var i=this.sel.ranges.slice(0);i.push(new kn(ht(this,e),ht(this,t||e))),$n(this,xn(this.cm,i,i.length-1),r)}),getSelection:function(e){for(var t=this.sel.ranges,r=0;r<t.length;r++)var i=Je(this,t[r].from(),t[r].to()),n=n?n.concat(i):i;return!1===e?n:n.join(e||this.lineSeparator())},getSelections:function(e){for(var t=[],r=this.sel.ranges,i=0;i<r.length;i++){var n=Je(this,r[i].from(),r[i].to());!1!==e&&(n=n.join(e||this.lineSeparator())),t[i]=n}return t},replaceSelection:function(e,t,r){for(var i=[],n=0;n<this.sel.ranges.length;n++)i[n]=e;this.replaceSelections(i,t,r||"+input")},replaceSelections:en(function(e,t,r){for(var i=[],n=this.sel,o=0;o<n.ranges.length;o++){var s=n.ranges[o];i[o]={from:s.from(),to:s.to(),text:this.splitLines(e[o]),origin:r}}for(var a=t&&"end"!=t&&function(e,t,r){for(var i=[],n=p=ot(e.first,0),o=0;o<t.length;o++){var s,a,l=t[o],c=Nn(l.from,p,n),u=Nn(Ln(l),p,n),p=l.to;n=u;"around"==r?(a=st((s=e.sel.ranges[o]).head,s.anchor)<0,i[o]=new kn(a?u:c,a?c:u)):i[o]=new kn(c,c)}return new wn(i,e.sel.primIndex)}(this,i,t),l=i.length-1;0<=l;l--)so(this,i[l]);a?Yn(this,a):this.cm&&Pi(this.cm)}),undo:en(function(){lo(this,"undo")}),redo:en(function(){lo(this,"redo")}),undoSelection:en(function(){lo(this,"undo",!0)}),redoSelection:en(function(){lo(this,"redo",!0)}),setExtending:function(e){this.extend=e},getExtending:function(){return this.extend},historySize:function(){for(var e=this.history,t=0,r=0,i=0;i<e.done.length;i++)e.done[i].ranges||++t;for(var n=0;n<e.undone.length;n++)e.undone[n].ranges||++r;return{undo:t,redo:r}},clearHistory:function(){var e=this;this.history=new Dn(this.history.maxGeneration),An(this,function(t){return t.history=e.history},!0)},markClean:function(){this.cleanGeneration=this.changeGeneration(!0)},changeGeneration:function(e){return e&&(this.history.lastOp=this.history.lastSelOp=this.history.lastOrigin=null),this.history.generation},isClean:function(e){return this.history.generation==(e||this.cleanGeneration)},getHistory:function(){return{done:Vn(this.history.done),undone:Vn(this.history.undone)}},setHistory:function(e){var t=this.history=new Dn(this.history.maxGeneration);t.done=Vn(e.done.slice(0),null,!0),t.undone=Vn(e.undone.slice(0),null,!0)},setGutterMarker:en(function(e,t,r){return mo(this,e,"gutter",function(e){var i=e.gutterMarkers||(e.gutterMarkers={});return!(i[t]=r)&&re(i)&&(e.gutterMarkers=null),1})}),clearGutter:en(function(e){var t=this;this.iter(function(r){r.gutterMarkers&&r.gutterMarkers[e]&&mo(t,r,"gutter",function(){return r.gutterMarkers[e]=null,re(r.gutterMarkers)&&(r.gutterMarkers=null),1})})}),lineInfo:function(e){var t;if("number"==typeof e){if(!it(this,e))return null;if(!(e=Ze(this,t=e)))return null}else if(null==(t=tt(e)))return null;return{line:t,handle:e,text:e.text,gutterMarkers:e.gutterMarkers,textClass:e.textClass,bgClass:e.bgClass,wrapClass:e.wrapClass,widgets:e.widgets}},addLineClass:en(function(e,t,r){return mo(this,e,"gutter"==t?"gutter":"class",function(e){var i="text"==t?"textClass":"background"==t?"bgClass":"gutter"==t?"gutterClass":"wrapClass";if(e[i]){if(L(r).test(e[i]))return;e[i]+=" "+r}else e[i]=r;return 1})}),removeLineClass:en(function(e,t,r){return mo(this,e,"gutter"==t?"gutter":"class",function(e){var i="text"==t?"textClass":"background"==t?"bgClass":"gutter"==t?"gutterClass":"wrapClass",n=e[i];if(n){if(null==r)e[i]=null;else{var o=n.match(L(r));if(!o)return;var s=o.index+o[0].length;e[i]=n.slice(0,o.index)+(o.index&&s!=n.length?" ":"")+n.slice(s)||null}return 1}})}),addLineWidget:en(function(e,t,r){return n=e,o=new yo(i=this,t,r),(s=i.cm)&&o.noHScroll&&(s.display.alignWidgets=!0),mo(i,n,"widget",function(e){var t,r=e.widgets||(e.widgets=[]);return null==o.insertAt?r.push(o):r.splice(Math.min(r.length-1,Math.max(0,o.insertAt)),0,o),o.line=e,s&&!Xt(i,e)&&(t=Kt(e)<i.scrollTop,et(e,e.height+xr(o)),t&&_i(s,o.height),s.curOp.forceUpdate=!0),1}),s&&ur(s,"lineWidgetAdded",s,o,"number"==typeof n?n:tt(n)),o;var i,n,o,s}),removeLineWidget:function(e){e.clear()},markText:function(e,t,r){return Co(this,ht(this,e),ht(this,t),r,r&&r.type||"range")},setBookmark:function(e,t){var r={replacedWith:t&&(null==t.nodeType?t.widget:t),insertLeft:t&&t.insertLeft,clearWhenEmpty:!1,shared:t&&t.shared,handleMouseEvents:t&&t.handleMouseEvents};return Co(this,e=ht(this,e),e,r,"bookmark")},findMarksAt:function(e){var t=[],r=Ze(this,(e=ht(this,e)).line).markedSpans;if(r)for(var i=0;i<r.length;++i){var n=r[i];(null==n.from||n.from<=e.ch)&&(null==n.to||n.to>=e.ch)&&t.push(n.marker.parent||n.marker)}return t},findMarks:function(e,t,r){e=ht(this,e),t=ht(this,t);var i=[],n=e.line;return this.iter(e.line,t.line+1,function(o){var s=o.markedSpans;if(s)for(var a=0;a<s.length;a++){var l=s[a];null!=l.to&&n==e.line&&e.ch>=l.to||null==l.from&&n!=e.line||null!=l.from&&n==t.line&&l.from>=t.ch||r&&!r(l.marker)||i.push(l.marker.parent||l.marker)}++n}),i},getAllMarks:function(){var e=[];return this.iter(function(t){var r=t.markedSpans;if(r)for(var i=0;i<r.length;++i)null!=r[i].from&&e.push(r[i].marker)}),e},posFromIndex:function(e){var t,r=this.first,i=this.lineSeparator().length;return this.iter(function(n){var o=n.text.length+i;if(e<o)return t=e,!0;e-=o,++r}),ht(this,ot(r,t))},indexFromPos:function(e){var t=(e=ht(this,e)).ch;if(e.line<this.first||e.ch<0)return 0;var r=this.lineSeparator().length;return this.iter(this.first,e.line,function(e){t+=e.text.length+r}),t},copy:function(e){var t=new Mo(Qe(this,this.first,this.first+this.size),this.modeOption,this.first,this.lineSep,this.direction);return t.scrollTop=this.scrollTop,t.scrollLeft=this.scrollLeft,t.sel=this.sel,t.extend=!1,e&&(t.history.undoDepth=this.history.undoDepth,t.setHistory(this.getHistory())),t},linkedDoc:function(e){e=e||{};var t=this.first,r=this.first+this.size;null!=e.from&&e.from>t&&(t=e.from),null!=e.to&&e.to<r&&(r=e.to);var i=new Mo(Qe(this,t,r),e.mode||this.modeOption,t,this.lineSep,this.direction);return e.sharedHist&&(i.history=this.history),(this.linked||(this.linked=[])).push({doc:i,sharedHist:e.sharedHist}),i.linked=[{doc:this,isParent:!0,sharedHist:e.sharedHist}],function(e,t){for(var r=0;r<t.length;r++){var i,n=t[r],o=n.find(),s=e.clipPos(o.from),a=e.clipPos(o.to);st(s,a)&&(i=Co(e,s,a,n.primary,n.primary.type),n.markers.push(i),i.parent=n)}}(i,So(this)),i},unlinkDoc:function(e){var t;if(e instanceof ws&&(e=e.doc),this.linked)for(var r=0;r<this.linked.length;++r)if(this.linked[r].doc==e){this.linked.splice(r,1),e.unlinkDoc(this),To(So(this));break}e.history==this.history&&(t=[e.id],An(e,function(e){return t.push(e.id)},!0),e.history=new Dn(null),e.history.done=Vn(this.history.done,t),e.history.undone=Vn(this.history.undone,t))},iterLinkedDocs:function(e){An(this,e)},getMode:function(){return this.mode},getEditor:function(){return this.cm},splitLines:function(e){return this.lineSep?e.split(this.lineSep):Ee(e)},lineSeparator:function(){return this.lineSep||"\n"},setDirection:en(function(e){var t;"rtl"!=e&&(e="ltr"),e!=this.direction&&(this.direction=e,this.iter(function(e){return e.order=null}),this.cm&&Zi(t=this.cm,function(){Hn(t),ui(t)}))})}),Mo.prototype.eachLine=Mo.prototype.iter;var _o=0;function Po(e){var t=this;if(Oo(t),!xe(t,e)&&!Cr(t.display,e)){Te(e),s&&(_o=+new Date);var r=li(t,e,!0),i=e.dataTransfer.files;if(r&&!t.isReadOnly())if(i&&i.length&&window.FileReader&&window.File)for(var n=i.length,o=Array(n),a=0,l=function(){++a==n&&Ji(t,function(){var e={from:r=ht(t.doc,r),to:r,text:t.doc.splitLines(o.filter(function(e){return null!=e}).join(t.doc.lineSeparator())),origin:"paste"};so(t.doc,e),Yn(t.doc,Cn(ht(t.doc,r),ht(t.doc,Ln(e))))})()},c=function(e,r){var i;t.options.allowDropFileTypes&&-1==F(t.options.allowDropFileTypes,e.type)?l():((i=new FileReader).onerror=l,i.onload=function(){var e=i.result;/[\x00-\x08\x0e-\x1f]{2}/.test(e)||(o[r]=e),l()},i.readAsText(e))},u=0;u<i.length;u++)c(i[u],u);else{if(t.state.draggingText&&-1<t.doc.sel.contains(r))return t.state.draggingText(e),void setTimeout(function(){return t.display.input.focus()},20);try{var p,h=e.dataTransfer.getData("Text");if(h){if(t.state.draggingText&&!t.state.draggingText.copy&&(p=t.listSelections()),Zn(t.doc,Cn(r,r)),p)for(var d=0;d<p.length;++d)po(t.doc,"",p[d].anchor,p[d].head,"drag");t.replaceSelection(h,"around","paste"),t.display.input.focus()}}catch(e){}}}}function Oo(e){e.display.dragCursor&&(e.display.lineSpace.removeChild(e.display.dragCursor),e.display.dragCursor=null)}function Ao(e){if(document.getElementsByClassName){for(var t=document.getElementsByClassName("CodeMirror"),r=[],i=0;i<t.length;i++){var n=t[i].CodeMirror;n&&r.push(n)}r.length&&r[0].operation(function(){for(var t=0;t<r.length;t++)e(r[t])})}}var Io=!1;function Ho(e){var t=e.display;t.cachedCharWidth=t.cachedTextHeight=t.cachedPaddingH=null,t.scrollbarsClipped=!1,e.setSize()}for(var Do={3:"Pause",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",106:"*",107:"=",109:"-",110:".",111:"/",145:"ScrollLock",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"},Wo=0;Wo<10;Wo++)Do[Wo+48]=Do[Wo+96]=String(Wo);for(var zo=65;zo<=90;zo++)Do[zo]=String.fromCharCode(zo);for(var Eo=1;Eo<=12;Eo++)Do[Eo+111]=Do[Eo+63235]="F"+Eo;var Ro={};function Fo(e){var t,r,i,n,o=e.split(/-(?!$)/);e=o[o.length-1];for(var s=0;s<o.length-1;s++){var a=o[s];if(/^(cmd|meta|m)$/i.test(a))n=!0;else if(/^a(lt)?$/i.test(a))t=!0;else if(/^(c|ctrl|control)$/i.test(a))r=!0;else{if(!/^s(hift)?$/i.test(a))throw new Error("Unrecognized modifier name: "+a);i=!0}}return t&&(e="Alt-"+e),r&&(e="Ctrl-"+e),n&&(e="Cmd-"+e),i&&(e="Shift-"+e),e}function Bo(e,t,r,i){var n=(t=Go(t)).call?t.call(e,i):t[e];if(!1===n)return"nothing";if("..."===n)return"multi";if(null!=n&&r(n))return"handled";if(t.fallthrough){if("[object Array]"!=Object.prototype.toString.call(t.fallthrough))return Bo(e,t.fallthrough,r,i);for(var o=0;o<t.fallthrough.length;o++){var s=Bo(e,t.fallthrough[o],r,i);if(s)return s}}}function jo(e){var t="string"==typeof e?e:Do[e.keyCode];return"Ctrl"==t||"Alt"==t||"Shift"==t||"Mod"==t}function Vo(e,t,r){var i=e;return t.altKey&&"Alt"!=i&&(e="Alt-"+e),(x?t.metaKey:t.ctrlKey)&&"Ctrl"!=i&&(e="Ctrl-"+e),(x?t.ctrlKey:t.metaKey)&&"Cmd"!=i&&(e="Cmd-"+e),!r&&t.shiftKey&&"Shift"!=i&&(e="Shift-"+e),e}function Uo(e,t){if(p&&34==e.keyCode&&e.char)return!1;var r=Do[e.keyCode];return null!=r&&!e.altGraphKey&&(3==e.keyCode&&e.code&&(r=e.code),Vo(r,e,t))}function Go(e){return"string"==typeof e?Ro[e]:e}function Xo(e,t){for(var r=e.doc.sel.ranges,i=[],n=0;n<r.length;n++){for(var o=t(r[n]);i.length&&st(o.from,Y(i).to)<=0;){var s=i.pop();if(st(s.from,o.from)<0){o.from=s.from;break}}i.push(o)}Zi(e,function(){for(var t=i.length-1;0<=t;t--)po(e.doc,"",i[t].from,i[t].to,"+delete");Pi(e)})}function qo(e,t,r){var i=oe(e.text,t+r,r);return i<0||i>e.text.length?null:i}function Ko(e,t,r){var i=qo(e,t.ch,r);return null==i?null:new ot(t.line,i,r<0?"after":"before")}function Yo(e,t,r,i,n){if(e){"rtl"==t.doc.direction&&(n=-n);var o=me(r,t.doc.direction);if(o){var s,a,l,c=n<0?Y(o):o[0],u=n<0==(1==c.level)?"after":"before";return 0<c.level||"rtl"==t.doc.direction?(s=Ir(t,r),a=n<0?r.text.length-1:0,l=Hr(t,s,a).top,a=se(function(e){return Hr(t,s,e).top==l},n<0==(1==c.level)?c.from:c.to-1,a),"before"==u&&(a=qo(r,a,1))):a=n<0?c.to:c.from,new ot(i,a,u)}}return new ot(i,n<0?r.text.length:0,n<0?"before":"after")}Ro.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite",Esc:"singleSelection"},Ro.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Up":"goLineUp","Ctrl-Down":"goLineDown","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"},Ro.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Alt-F":"goWordRight","Alt-B":"goWordLeft","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-D":"delWordAfter","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars","Ctrl-O":"openLine"},Ro.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Home":"goDocStart","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineLeft","Cmd-Right":"goLineRight","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delWrappedLineLeft","Cmd-Delete":"delWrappedLineRight","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection","Ctrl-Up":"goDocStart","Ctrl-Down":"goDocEnd",fallthrough:["basic","emacsy"]},Ro.default=b?Ro.macDefault:Ro.pcDefault;var $o={selectAll:no,singleSelection:function(e){return e.setSelection(e.getCursor("anchor"),e.getCursor("head"),V)},killLine:function(e){return Xo(e,function(t){if(t.empty()){var r=Ze(e.doc,t.head.line).text.length;return t.head.ch==r&&t.head.line<e.lastLine()?{from:t.head,to:ot(t.head.line+1,0)}:{from:t.head,to:ot(t.head.line,r)}}return{from:t.from(),to:t.to()}})},deleteLine:function(e){return Xo(e,function(t){return{from:ot(t.from().line,0),to:ht(e.doc,ot(t.to().line+1,0))}})},delLineLeft:function(e){return Xo(e,function(e){return{from:ot(e.from().line,0),to:e.from()}})},delWrappedLineLeft:function(e){return Xo(e,function(t){var r=e.charCoords(t.head,"div").top+5;return{from:e.coordsChar({left:0,top:r},"div"),to:t.from()}})},delWrappedLineRight:function(e){return Xo(e,function(t){var r=e.charCoords(t.head,"div").top+5,i=e.coordsChar({left:e.display.lineDiv.offsetWidth+100,top:r},"div");return{from:t.from(),to:i}})},undo:function(e){return e.undo()},redo:function(e){return e.redo()},undoSelection:function(e){return e.undoSelection()},redoSelection:function(e){return e.redoSelection()},goDocStart:function(e){return e.extendSelection(ot(e.firstLine(),0))},goDocEnd:function(e){return e.extendSelection(ot(e.lastLine()))},goLineStart:function(e){return e.extendSelectionsBy(function(t){return Zo(e,t.head.line)},{origin:"+move",bias:1})},goLineStartSmart:function(e){return e.extendSelectionsBy(function(t){return Jo(e,t.head)},{origin:"+move",bias:1})},goLineEnd:function(e){return e.extendSelectionsBy(function(t){return function(e,t){var r=Ze(e.doc,t),i=function(e){for(var t;t=Ft(e);)e=t.find(1,!0).line;return e}(r);return i!=r&&(t=tt(i)),Yo(!0,e,r,t,-1)}(e,t.head.line)},{origin:"+move",bias:-1})},goLineRight:function(e){return e.extendSelectionsBy(function(t){var r=e.cursorCoords(t.head,"div").top+5;return e.coordsChar({left:e.display.lineDiv.offsetWidth+100,top:r},"div")},G)},goLineLeft:function(e){return e.extendSelectionsBy(function(t){var r=e.cursorCoords(t.head,"div").top+5;return e.coordsChar({left:0,top:r},"div")},G)},goLineLeftSmart:function(e){return e.extendSelectionsBy(function(t){var r=e.cursorCoords(t.head,"div").top+5,i=e.coordsChar({left:0,top:r},"div");return i.ch<e.getLine(i.line).search(/\S/)?Jo(e,t.head):i},G)},goLineUp:function(e){return e.moveV(-1,"line")},goLineDown:function(e){return e.moveV(1,"line")},goPageUp:function(e){return e.moveV(-1,"page")},goPageDown:function(e){return e.moveV(1,"page")},goCharLeft:function(e){return e.moveH(-1,"char")},goCharRight:function(e){return e.moveH(1,"char")},goColumnLeft:function(e){return e.moveH(-1,"column")},goColumnRight:function(e){return e.moveH(1,"column")},goWordLeft:function(e){return e.moveH(-1,"word")},goGroupRight:function(e){return e.moveH(1,"group")},goGroupLeft:function(e){return e.moveH(-1,"group")},goWordRight:function(e){return e.moveH(1,"word")},delCharBefore:function(e){return e.deleteH(-1,"char")},delCharAfter:function(e){return e.deleteH(1,"char")},delWordBefore:function(e){return e.deleteH(-1,"word")},delWordAfter:function(e){return e.deleteH(1,"word")},delGroupBefore:function(e){return e.deleteH(-1,"group")},delGroupAfter:function(e){return e.deleteH(1,"group")},indentAuto:function(e){return e.indentSelection("smart")},indentMore:function(e){return e.indentSelection("add")},indentLess:function(e){return e.indentSelection("subtract")},insertTab:function(e){return e.replaceSelection("\t")},insertSoftTab:function(e){for(var t=[],r=e.listSelections(),i=e.options.tabSize,n=0;n<r.length;n++){var o=r[n].from(),s=E(e.getLine(o.line),o.ch,i);t.push(K(i-s%i))}e.replaceSelections(t)},defaultTab:function(e){e.somethingSelected()?e.indentSelection("add"):e.execCommand("insertTab")},transposeChars:function(e){return Zi(e,function(){for(var t,r,i,n=e.listSelections(),o=[],s=0;s<n.length;s++)n[s].empty()&&(t=n[s].head,(r=Ze(e.doc,t.line).text)&&(t.ch==r.length&&(t=new ot(t.line,t.ch-1)),0<t.ch?(t=new ot(t.line,t.ch+1),e.replaceRange(r.charAt(t.ch-1)+r.charAt(t.ch-2),ot(t.line,t.ch-2),t,"+transpose")):t.line>e.doc.first&&(i=Ze(e.doc,t.line-1).text)&&(t=new ot(t.line,1),e.replaceRange(r.charAt(0)+e.doc.lineSeparator()+i.charAt(i.length-1),ot(t.line-1,i.length-1),t,"+transpose"))),o.push(new kn(t,t)));e.setSelections(o)})},newlineAndIndent:function(e){return Zi(e,function(){for(var t=e.listSelections(),r=t.length-1;0<=r;r--)e.replaceRange(e.doc.lineSeparator(),t[r].anchor,t[r].head,"+input");t=e.listSelections();for(var i=0;i<t.length;i++)e.indentLine(t[i].from().line,null,!0);Pi(e)})},openLine:function(e){return e.replaceSelection("\n","start")},toggleOverwrite:function(e){return e.toggleOverwrite()}};function Zo(e,t){var r=Ze(e.doc,t),i=Vt(r);return i!=r&&(t=tt(i)),Yo(!0,e,i,t,1)}function Jo(e,t){var r=Zo(e,t.line),i=Ze(e.doc,r.line),n=me(i,e.doc.direction);if(n&&0!=n[0].level)return r;var o=Math.max(r.ch,i.text.search(/\S/)),s=t.line==r.line&&t.ch<=o&&t.ch;return ot(r.line,s?0:o,r.sticky)}function Qo(e,t,r){if("string"==typeof t&&!(t=$o[t]))return!1;e.display.input.ensurePolled();var i=e.display.shift,n=!1;try{e.isReadOnly()&&(e.state.suppressEdits=!0),r&&(e.display.shift=!1),n=t(e)!=j}finally{e.display.shift=i,e.state.suppressEdits=!1}return n}var es=new R;function ts(e,t,r,i){var n=e.state.keySeq;if(n){if(jo(t))return"handled";if(/\'$/.test(t)?e.state.keySeq=null:es.set(50,function(){e.state.keySeq==n&&(e.state.keySeq=null,e.display.input.reset())}),rs(e,n+" "+t,r,i))return!0}return rs(e,t,r,i)}function rs(e,t,r,i){var n=function(e,t,r){for(var i=0;i<e.state.keyMaps.length;i++){var n=Bo(t,e.state.keyMaps[i],r,e);if(n)return n}return e.options.extraKeys&&Bo(t,e.options.extraKeys,r,e)||Bo(t,e.options.keyMap,r,e)}(e,t,i);return"multi"==n&&(e.state.keySeq=t),"handled"==n&&ur(e,"keyHandled",e,t,r),"handled"!=n&&"multi"!=n||(Te(r),wi(e)),!!n}function is(e,t){var r=Uo(t,!0);return!!r&&(t.shiftKey&&!e.state.keySeq?ts(e,"Shift-"+r,t,function(t){return Qo(e,t,!0)})||ts(e,r,t,function(t){if("string"==typeof t?/^go[A-Z]/.test(t):t.motion)return Qo(e,t)}):ts(e,r,t,function(t){return Qo(e,t)}))}var ns=null;function os(e){var t,i,n,o=this;function l(e){18!=e.keyCode&&e.altKey||(T(n,"CodeMirror-crosshair"),we(document,"keyup",l),we(document,"mouseover",l))}e.target&&e.target!=o.display.input.getField()||(o.curOp.focus=A(),xe(o,e)||(s&&a<11&&27==e.keyCode&&(e.returnValue=!1),t=e.keyCode,o.display.shift=16==t||e.shiftKey,i=is(o,e),p&&(ns=i?t:null,!i&&88==t&&!Fe&&(b?e.metaKey:e.ctrlKey)&&o.replaceSelection("",null,"cut")),r&&!b&&!i&&46==t&&e.shiftKey&&!e.ctrlKey&&document.execCommand&&document.execCommand("cut"),18!=t||/\bCodeMirror-crosshair\b/.test(o.display.lineDiv.className)||(I(n=o.display.lineDiv,"CodeMirror-crosshair"),be(document,"keyup",l),be(document,"mouseover",l))))}function ss(e){16==e.keyCode&&(this.doc.sel.shift=!1),xe(this,e)}function as(e){var t=this;if(!(e.target&&e.target!=t.display.input.getField()||Cr(t.display,e)||xe(t,e)||e.ctrlKey&&!e.altKey||b&&e.metaKey)){var r,i,n=e.keyCode,o=e.charCode;if(p&&n==ns)return ns=null,void Te(e);p&&(!e.which||e.which<10)&&is(t,e)||"\b"!=(r=String.fromCharCode(null==o?n:o))&&(ts(i=t,"'"+r+"'",e,function(e){return Qo(i,e,!0)})||t.display.input.onKeyPress(e))}}var ls,cs,us=function(e,t,r){this.time=e,this.pos=t,this.button=r};function ps(e){var t,r,i,n,o,c,u=this,p=u.display;xe(u,e)||p.activeTouch&&p.input.supportsTouch()||(p.input.ensurePolled(),p.shift=e.shiftKey,Cr(p,e)?l||(p.scroller.draggable=!1,setTimeout(function(){return p.scroller.draggable=!0},100)):fs(u,e)||(t=li(u,e),r=Oe(e),i=t?(n=t,o=r,c=+new Date,cs&&cs.compare(c,n,o)?(ls=cs=null,"triple"):ls&&ls.compare(c,n,o)?(cs=new us(c,n,o),ls=null,"double"):(ls=new us(c,n,o),cs=null,"single")):"single",window.focus(),1==r&&u.state.selectingText&&u.state.selectingText(e),t&&function(e,t,r,i,n){var o="Click";return"double"==i?o="Double"+o:"triple"==i&&(o="Triple"+o),ts(e,Vo(o=(1==t?"Left":2==t?"Middle":"Right")+o,n),n,function(t){if("string"==typeof t&&(t=$o[t]),!t)return!1;var i=!1;try{e.isReadOnly()&&(e.state.suppressEdits=!0),i=t(e,r)!=j}finally{e.state.suppressEdits=!1}return i})}(u,r,t,i,e)||(1==r?t?function(e,t,r,i){s?setTimeout(W(ki,e),0):e.curOp.focus=A();var n,o=function(e,t,r){var i,n=e.getOption("configureMouse"),o=n?n(e,t,r):{};return null==o.unit&&(i=y?r.shiftKey&&r.metaKey:r.altKey,o.unit=i?"rectangle":"single"==t?"char":"double"==t?"word":"line"),null!=o.extend&&!e.doc.extend||(o.extend=e.doc.extend||r.shiftKey),null==o.addNew&&(o.addNew=b?r.metaKey:r.ctrlKey),null==o.moveOnDrag&&(o.moveOnDrag=!(b?r.altKey:r.ctrlKey)),o}(e,r,i),c=e.doc.sel;(e.options.dragDrop&&He&&!e.isReadOnly()&&"single"==r&&-1<(n=c.contains(t))&&(st((n=c.ranges[n]).from(),t)<0||0<t.xRel)&&(0<st(n.to(),t)||t.xRel<0)?function(e,t,r,i){var n=e.display,o=!1,c=Ji(e,function(t){l&&(n.scroller.draggable=!1),e.state.draggingText=!1,we(n.wrapper.ownerDocument,"mouseup",c),we(n.wrapper.ownerDocument,"mousemove",u),we(n.scroller,"dragstart",p),we(n.scroller,"drop",c),o||(Te(t),i.addNew||Gn(e.doc,r,null,null,i.extend),l&&!h||s&&9==a?setTimeout(function(){n.wrapper.ownerDocument.body.focus({preventScroll:!0}),n.input.focus()},20):n.input.focus())}),u=function(e){o=o||10<=Math.abs(t.clientX-e.clientX)+Math.abs(t.clientY-e.clientY)},p=function(){return o=!0};l&&(n.scroller.draggable=!0),(e.state.draggingText=c).copy=!i.moveOnDrag,n.scroller.dragDrop&&n.scroller.dragDrop(),be(n.wrapper.ownerDocument,"mouseup",c),be(n.wrapper.ownerDocument,"mousemove",u),be(n.scroller,"dragstart",p),be(n.scroller,"drop",c),xi(e),setTimeout(function(){return n.input.focus()},20)}:function(e,t,r,i){var n=e.display,o=e.doc;Te(t);var s,a,l,c=o.sel,u=c.ranges;i.addNew&&!i.extend?(a=o.sel.contains(r),s=-1<a?u[a]:new kn(r,r)):(s=o.sel.primary(),a=o.sel.primIndex),"rectangle"==i.unit?(i.addNew||(s=new kn(r,r)),r=li(e,t,!0,!0),a=-1):(l=hs(e,r,i.unit),s=i.extend?Un(s,l.anchor,l.head,i.extend):l),i.addNew?-1==a?(a=u.length,$n(o,xn(e,u.concat([s]),a),{scroll:!1,origin:"*mouse"})):1<u.length&&u[a].empty()&&"char"==i.unit&&!i.extend?($n(o,xn(e,u.slice(0,a).concat(u.slice(a+1)),0),{scroll:!1,origin:"*mouse"}),c=o.sel):qn(o,a,s,U):($n(o,new wn([s],a=0),U),c=o.sel);var p=r;var h=n.wrapper.getBoundingClientRect(),d=0;function f(t){e.state.selectingText=!1,d=1/0,t&&(Te(t),n.input.focus()),we(n.wrapper.ownerDocument,"mousemove",g),we(n.wrapper.ownerDocument,"mouseup",m),o.history.lastSelOrigin=null}var g=Ji(e,function(t){(0!==t.buttons&&Oe(t)?function t(l){var u,f,g=++d,m=li(e,l,!0,"rectangle"==i.unit);m&&(0!=st(m,p)?(e.curOp.focus=A(),function(t){if(0!=st(p,t))if(p=t,"rectangle"==i.unit){for(var n=[],l=e.options.tabSize,u=E(Ze(o,r.line).text,r.ch,l),h=E(Ze(o,t.line).text,t.ch,l),d=Math.min(u,h),f=Math.max(u,h),g=Math.min(r.line,t.line),m=Math.min(e.lastLine(),Math.max(r.line,t.line));g<=m;g++){var v=Ze(o,g).text,b=X(v,d,l);d==f?n.push(new kn(ot(g,b),ot(g,b))):v.length>b&&n.push(new kn(ot(g,b),ot(g,X(v,f,l))))}n.length||n.push(new kn(r,r)),$n(o,xn(e,c.ranges.slice(0,a).concat(n),a),{origin:"*mouse",scroll:!1}),e.scrollIntoView(t)}else{var y,w=s,k=hs(e,t,i.unit),x=w.anchor,C=(x=0<st(k.anchor,x)?(y=k.head,ut(w.from(),k.anchor)):(y=k.anchor,ct(w.to(),k.head)),c.ranges.slice(0));C[a]=function(e,t){var r=t.anchor,i=t.head,n=Ze(e.doc,r.line);if(0==st(r,i)&&r.sticky==i.sticky)return t;var o=me(n);if(!o)return t;var s=le(o,r.ch,r.sticky),a=o[s];if(a.from!=r.ch&&a.to!=r.ch)return t;var l,c,u,p=s+(a.from==r.ch==(1!=a.level)?0:1);if(0==p||p==o.length)return t;var h=o[p+((l=i.line!=r.line?0<(i.line-r.line)*("ltr"==e.doc.direction?1:-1):(u=(c=le(o,i.ch,i.sticky))-s||(i.ch-r.ch)*(1==a.level?-1:1),c==p-1||c==p?u<0:0<u))?-1:0)],d=l==(1==h.level),f=d?h.from:h.to,g=d?"after":"before";return r.ch==f&&r.sticky==g?t:new kn(new ot(r.line,f,g),i)}(e,new kn(ht(o,x),y)),$n(o,xn(e,C,a),U)}}(m),u=Ni(n,o),(m.line>=u.to||m.line<u.from)&&setTimeout(Ji(e,function(){d==g&&t(l)}),150)):(f=l.clientY<h.top?-20:l.clientY>h.bottom?20:0)&&setTimeout(Ji(e,function(){d==g&&(n.scroller.scrollTop+=f,t(l))}),50))}:f)(t)}),m=Ji(e,f);e.state.selectingText=m,be(n.wrapper.ownerDocument,"mousemove",g),be(n.wrapper.ownerDocument,"mouseup",m)})(e,i,t,o)}(u,t,i,e):Pe(e)==p.scroller&&Te(e):2==r?(t&&Gn(u.doc,t),setTimeout(function(){return p.input.focus()},20)):3==r&&(C?u.display.input.onContextMenu(e):xi(u)))))}function hs(e,t,r){if("char"==r)return new kn(t,t);if("word"==r)return e.findWordAt(t);if("line"==r)return new kn(ot(t.line,0),ht(e.doc,ot(t.line+1,0)));var i=r(e,t);return new kn(i.from,i.to)}function ds(e,t,r,i){var n,o;if(t.touches)n=t.touches[0].clientX,o=t.touches[0].clientY;else try{n=t.clientX,o=t.clientY}catch(t){return!1}if(n>=Math.floor(e.display.gutters.getBoundingClientRect().right))return!1;i&&Te(t);var s=e.display,a=s.lineDiv.getBoundingClientRect();if(o>a.bottom||!Le(e,r))return Me(t);o-=a.top-s.viewOffset;for(var l=0;l<e.display.gutterSpecs.length;++l){var c=s.gutters.childNodes[l];if(c&&c.getBoundingClientRect().right>=n)return ke(e,r,e,rt(e.doc,o),e.display.gutterSpecs[l].className,t),Me(t)}}function fs(e,t){return ds(e,t,"gutterClick",!0)}function gs(e,t){var r,i;Cr(e.display,t)||(i=t,Le(r=e,"gutterContextMenu")&&ds(r,i,"gutterContextMenu",!1))||xe(e,t,"contextmenu")||C||e.display.input.onContextMenu(t)}function ms(e){e.display.wrapper.className=e.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+e.options.theme.replace(/(^|\s)\s*/g," cm-s-"),Br(e)}us.prototype.compare=function(e,t,r){return this.time+400>e&&0==st(t,this.pos)&&r==this.button};var vs={toString:function(){return"CodeMirror.Init"}},bs={},ys={};function ws(e,t){var r=this;if(!(this instanceof ws))return new ws(e,t);this.options=t=t?z(t):{},z(bs,t,!1);var i=t.value;"string"==typeof i?i=new Mo(i,t.mode,null,t.lineSeparator,t.direction):t.mode&&(i.modeOption=t.mode),this.doc=i;var n=new ws.inputStyles[t.inputStyle](this),o=this.display=new gn(e,i,n,t);for(var c in ms(o.wrapper.CodeMirror=this),t.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap"),Vi(this),this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,delayingBlurEvent:!1,focused:!1,suppressEdits:!1,pasteIncoming:-1,cutIncoming:-1,selectingText:!1,draggingText:!1,highlight:new R,keySeq:null,specialChars:null},t.autofocus&&!v&&o.input.focus(),s&&a<11&&setTimeout(function(){return r.display.input.reset(!0)},20),function(e){var t=e.display;be(t.scroller,"mousedown",Ji(e,ps)),be(t.scroller,"dblclick",s&&a<11?Ji(e,function(t){var r,i;xe(e,t)||!(r=li(e,t))||fs(e,t)||Cr(e.display,t)||(Te(t),i=e.findWordAt(r),Gn(e.doc,i.anchor,i.head))}):function(t){return xe(e,t)||Te(t)}),be(t.scroller,"contextmenu",function(t){return gs(e,t)}),be(t.input.getField(),"contextmenu",function(r){t.scroller.contains(r.target)||gs(e,r)});var r,i={end:0};function n(){t.activeTouch&&(r=setTimeout(function(){return t.activeTouch=null},1e3),(i=t.activeTouch).end=+new Date)}function o(e,t){if(null==t.left)return 1;var r=t.left-e.left,i=t.top-e.top;return 400<r*r+i*i}be(t.scroller,"touchstart",function(n){var o;xe(e,n)||function(e){if(1==e.touches.length){var t=e.touches[0];return t.radiusX<=1&&t.radiusY<=1}}(n)||fs(e,n)||(t.input.ensurePolled(),clearTimeout(r),o=+new Date,t.activeTouch={start:o,moved:!1,prev:o-i.end<=300?i:null},1==n.touches.length&&(t.activeTouch.left=n.touches[0].pageX,t.activeTouch.top=n.touches[0].pageY))}),be(t.scroller,"touchmove",function(){t.activeTouch&&(t.activeTouch.moved=!0)}),be(t.scroller,"touchend",function(r){var i,s,a=t.activeTouch;a&&!Cr(t,r)&&null!=a.left&&!a.moved&&new Date-a.start<300&&(i=e.coordsChar(t.activeTouch,"page"),s=!a.prev||o(a,a.prev)?new kn(i,i):!a.prev.prev||o(a,a.prev.prev)?e.findWordAt(i):new kn(ot(i.line,0),ht(e.doc,ot(i.line+1,0))),e.setSelection(s.anchor,s.head),e.focus(),Te(r)),n()}),be(t.scroller,"touchcancel",n),be(t.scroller,"scroll",function(){t.scroller.clientHeight&&(Hi(e,t.scroller.scrollTop),Wi(e,t.scroller.scrollLeft,!0),ke(e,"scroll",e))}),be(t.scroller,"mousewheel",function(t){return yn(e,t)}),be(t.scroller,"DOMMouseScroll",function(t){return yn(e,t)}),be(t.wrapper,"scroll",function(){return t.wrapper.scrollTop=t.wrapper.scrollLeft=0}),t.dragFunctions={enter:function(t){xe(e,t)||_e(t)},over:function(t){var r,i,n;xe(e,t)||((n=li(r=e,t))&&(vi(r,n,i=document.createDocumentFragment()),r.display.dragCursor||(r.display.dragCursor=_("div",null,"CodeMirror-cursors CodeMirror-dragcursors"),r.display.lineSpace.insertBefore(r.display.dragCursor,r.display.cursorDiv)),M(r.display.dragCursor,i)),_e(t))},start:function(t){return r=e,i=t,void(s&&(!r.state.draggingText||new Date-_o<100)?_e(i):xe(r,i)||Cr(r.display,i)||(i.dataTransfer.setData("Text",r.getSelection()),i.dataTransfer.effectAllowed="copyMove",i.dataTransfer.setDragImage&&!h&&((n=_("img",null,null,"position: fixed; left: 0; top: 0;")).src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",p&&(n.width=n.height=1,r.display.wrapper.appendChild(n),n._top=n.offsetTop),i.dataTransfer.setDragImage(n,0,0),p&&n.parentNode.removeChild(n))));var r,i,n},drop:Ji(e,Po),leave:function(t){xe(e,t)||Oo(e)}};var l=t.input.getField();be(l,"keyup",function(t){return ss.call(e,t)}),be(l,"keydown",Ji(e,os)),be(l,"keypress",Ji(e,as)),be(l,"focus",function(t){return Ci(e,t)}),be(l,"blur",function(t){return Li(e,t)})}(this),function(){var e;Io||(be(window,"resize",function(){null==e&&(e=setTimeout(function(){e=null,Ao(Ho)},100))}),be(window,"blur",function(){return Ao(Li)}),Io=!0)}(),Gi(this),this.curOp.forceUpdate=!0,In(this,i),t.autofocus&&!v||this.hasFocus()?setTimeout(W(Ci,this),20):Li(this),ys)ys.hasOwnProperty(c)&&ys[c](r,t[c],vs);pn(this),t.finishInit&&t.finishInit(this);for(var u=0;u<ks.length;++u)ks[u](r);Xi(this),l&&t.lineWrapping&&"optimizelegibility"==getComputedStyle(o.lineDiv).textRendering&&(o.lineDiv.style.textRendering="auto")}ws.defaults=bs,ws.optionHandlers=ys;var ks=[];function xs(e,t,r,i){var n,o=e.doc;null==r&&(r="add"),"smart"==r&&(o.mode.indent?n=bt(e,t).state:r="prev");var s=e.options.tabSize,a=Ze(o,t),l=E(a.text,null,s);a.stateAfter&&(a.stateAfter=null);var c,u=a.text.match(/^\s*/)[0];if(i||/\S/.test(a.text)){if("smart"==r&&((c=o.mode.indent(n,a.text.slice(u.length),a.text))==j||150<c)){if(!i)return;r="prev"}}else c=0,r="not";"prev"==r?c=t>o.first?E(Ze(o,t-1).text,null,s):0:"add"==r?c=l+e.options.indentUnit:"subtract"==r?c=l-e.options.indentUnit:"number"==typeof r&&(c=l+r),c=Math.max(0,c);var p="",h=0;if(e.options.indentWithTabs)for(var d=Math.floor(c/s);d;--d)h+=s,p+="\t";if(h<c&&(p+=K(c-h)),p!=u)return po(o,p,ot(t,0),ot(t,u.length),"+input"),!(a.stateAfter=null);for(var f=0;f<o.sel.ranges.length;f++){var g=o.sel.ranges[f];if(g.head.line==t&&g.head.ch<u.length){var m=ot(t,u.length);qn(o,f,new kn(m,m));break}}}ws.defineInitHook=function(e){return ks.push(e)};var Cs,Ls,Ss,Ts,Ns,Ms=null;function _s(e){Ms=e}function Ps(e,t,r,i,n){var o=e.doc;e.display.shift=!1,i=i||o.sel;var s=new Date-200,a="paste"==n||e.state.pasteIncoming>s,l=Ee(t),c=null;if(a&&1<i.ranges.length)if(Ms&&Ms.text.join("\n")==t){if(i.ranges.length%Ms.text.length==0){c=[];for(var u=0;u<Ms.text.length;u++)c.push(o.splitLines(Ms.text[u]))}}else l.length==i.ranges.length&&e.options.pasteLinesPerSelection&&(c=$(l,function(e){return[e]}));for(var p=e.curOp.updateInput,h=i.ranges.length-1;0<=h;h--){var d=i.ranges[h],f=d.from(),g=d.to();d.empty()&&(r&&0<r?f=ot(f.line,f.ch-r):e.state.overwrite&&!a?g=ot(g.line,Math.min(Ze(o,g.line).text.length,g.ch+Y(l).length)):a&&Ms&&Ms.lineWise&&Ms.text.join("\n")==t&&(f=g=ot(f.line,0)));var m={from:f,to:g,text:c?c[h%c.length]:l,origin:n||(a?"paste":e.state.cutIncoming>s?"cut":"+input")};so(e.doc,m),ur(e,"inputRead",e,m)}t&&!a&&As(e,t),Pi(e),e.curOp.updateInput<2&&(e.curOp.updateInput=p),e.curOp.typing=!0,e.state.pasteIncoming=e.state.cutIncoming=-1}function Os(e,t){var r=e.clipboardData&&e.clipboardData.getData("Text");return r&&(e.preventDefault(),t.isReadOnly()||t.options.disableInput||Zi(t,function(){return Ps(t,r,0,null,"paste")}),1)}function As(e,t){if(e.options.electricChars&&e.options.smartIndent)for(var r=e.doc.sel,i=r.ranges.length-1;0<=i;i--){var n=r.ranges[i];if(!(100<n.head.ch||i&&r.ranges[i-1].head.line==n.head.line)){var o=e.getModeAt(n.head),s=!1;if(o.electricChars){for(var a=0;a<o.electricChars.length;a++)if(-1<t.indexOf(o.electricChars.charAt(a))){s=xs(e,n.head.line,"smart");break}}else o.electricInput&&o.electricInput.test(Ze(e.doc,n.head.line).text.slice(0,n.head.ch))&&(s=xs(e,n.head.line,"smart"));s&&ur(e,"electricInput",e,n.head.line)}}}function Is(e){for(var t=[],r=[],i=0;i<e.doc.sel.ranges.length;i++){var n=e.doc.sel.ranges[i].head.line,o={anchor:ot(n,0),head:ot(n+1,0)};r.push(o),t.push(e.getRange(o.anchor,o.head))}return{text:t,ranges:r}}function Hs(e,t,r,i){e.setAttribute("autocorrect",r?"":"off"),e.setAttribute("autocapitalize",i?"":"off"),e.setAttribute("spellcheck",!!t)}function Ds(){var e=_("textarea",null,null,"position: absolute; bottom: -1em; padding: 0; width: 1px; height: 1em; outline: none"),t=_("div",[e],null,"overflow: hidden; position: relative; width: 3px; height: 0px;");return l?e.style.width="1000px":e.setAttribute("wrap","off"),g&&(e.style.border="1px solid black"),Hs(e),t}function Ws(e,t,r,i,n){var o=t,s=r,a=Ze(e,t.line),l=n&&"rtl"==e.direction?-r:r;function c(i){var o,s=n?function(e,t,r,i){var n=me(t,e.doc.direction);if(!n)return Ko(t,r,i);r.ch>=t.text.length?(r.ch=t.text.length,r.sticky="before"):r.ch<=0&&(r.ch=0,r.sticky="after");var o=le(n,r.ch,r.sticky),s=n[o];if("ltr"==e.doc.direction&&s.level%2==0&&(0<i?s.to>r.ch:s.from<r.ch))return Ko(t,r,i);function a(e,r){return qo(t,e instanceof ot?e.ch:e,r)}function l(r){return e.options.lineWrapping?(c=c||Ir(e,t),Qr(e,t,c,r)):{begin:0,end:t.text.length}}var c,u=l("before"==r.sticky?a(r,-1):r.ch);if("rtl"==e.doc.direction||1==s.level){var p=1==s.level==i<0,h=a(r,p?1:-1);if(null!=h&&(p?h<=s.to&&h<=u.end:h>=s.from&&h>=u.begin)){var d=p?"before":"after";return new ot(r.line,h,d)}}function f(e,t,i){for(var o=function(e,t){return t?new ot(r.line,a(e,1),"before"):new ot(r.line,e,"after")};0<=e&&e<n.length;e+=t){var s=n[e],l=0<t==(1!=s.level),c=l?i.begin:a(i.end,-1);if(s.from<=c&&c<s.to)return o(c,l);if(c=l?s.from:a(s.to,-1),i.begin<=c&&c<i.end)return o(c,l)}}var g=f(o+i,i,u);if(g)return g;var m=0<i?u.end:a(u.begin,-1);return null==m||0<i&&m==t.text.length||!(g=f(0<i?0:n.length-1,i,l(m)))?null:g}(e.cm,a,t,r):Ko(a,t,r);if(null==s){if(i||(o=t.line+l)<e.first||o>=e.first+e.size||(t=new ot(o,t.ch,t.sticky),!(a=Ze(e,o))))return;t=Yo(n,e.cm,a,t.line,l)}else t=s;return 1}if("char"==i)c();else if("column"==i)c(!0);else if("word"==i||"group"==i)for(var u=null,p="group"==i,h=e.cm&&e.cm.getHelper(t,"wordChars"),d=!0;!(r<0)||c(!d);d=!1){var f=a.text.charAt(t.ch)||"\n",g=te(f,h)?"w":p&&"\n"==f?"n":!p||/\s/.test(f)?null:"p";if(!p||d||g||(g="s"),u&&u!=g){r<0&&(r=1,c(),t.sticky="after");break}if(g&&(u=g),0<r&&!c(!d))break}var m=ro(e,t,o,s,!0);return at(o,m)&&(m.hitSide=!0),m}function zs(e,t,r,i){var n,o,s,a,l=e.doc,c=t.left;for("page"==i?(n=Math.min(e.display.wrapper.clientHeight,window.innerHeight||document.documentElement.clientHeight),o=Math.max(n-.5*ri(e.display),3),s=(0<r?t.bottom:t.top)+r*o):"line"==i&&(s=0<r?t.bottom+3:t.top-3);(a=Zr(e,c,s)).outside;){if(r<0?s<=0:s>=l.height){a.hitSide=!0;break}s+=5*r}return a}function Es(e){this.cm=e,this.lastAnchorNode=this.lastAnchorOffset=this.lastFocusNode=this.lastFocusOffset=null,this.polling=new R,this.composing=null,this.gracePeriod=!1,this.readDOMTimeout=null}function Rs(e,t){var r=Ar(e,t.line);if(!r||r.hidden)return null;var i=Ze(e.doc,t.line),n=Pr(r,i,t.line),o=me(i,e.doc.direction),s="left";o&&(s=le(o,t.ch)%2?"right":"left");var a=zr(n.map,t.ch,s);return a.offset="right"==a.collapse?a.end:a.start,a}function Fs(e,t){return t&&(e.bad=!0),e}function Bs(e,t,r){var i;if(t==e.display.lineDiv){if(!(i=e.display.lineDiv.childNodes[r]))return Fs(e.clipPos(ot(e.display.viewTo-1)),!0);t=null,r=0}else for(i=t;;i=i.parentNode){if(!i||i==e.display.lineDiv)return null;if(i.parentNode&&i.parentNode==e.display.lineDiv)break}for(var n=0;n<e.display.view.length;n++){var o=e.display.view[n];if(o.node==i)return js(o,t,r)}}function js(e,t,r){var i=e.text.firstChild,n=!1;if(!t||!O(i,t))return Fs(ot(tt(e.line),0),!0);if(t==i&&(n=!0,t=i.childNodes[r],r=0,!t)){var o=e.rest?Y(e.rest):e.line;return Fs(ot(tt(o),o.text.length),n)}var s=3==t.nodeType?t:null,a=t;for(s||1!=t.childNodes.length||3!=t.firstChild.nodeType||(s=t.firstChild,r=r&&s.nodeValue.length);a.parentNode!=i;)a=a.parentNode;var l=e.measure,c=l.maps;function u(t,r,i){for(var n=-1;n<(c?c.length:0);n++)for(var o=n<0?l.map:c[n],s=0;s<o.length;s+=3){var a=o[s+2];if(a==t||a==r){var u=tt(n<0?e.line:e.rest[n]),p=o[s]+i;return(i<0||a!=t)&&(p=o[s+(i?1:0)]),ot(u,p)}}}var p=u(s,a,r);if(p)return Fs(p,n);for(var h=a.nextSibling,d=s?s.nodeValue.length-r:0;h;h=h.nextSibling){if(p=u(h,h.firstChild,0))return Fs(ot(p.line,p.ch-d),n);d+=h.textContent.length}for(var f=a.previousSibling,g=r;f;f=f.previousSibling){if(p=u(f,f.firstChild,-1))return Fs(ot(p.line,p.ch+g),n);g+=f.textContent.length}}function Vs(e){this.cm=e,this.prevInput="",this.pollingFast=!1,this.polling=new R,this.hasSelection=!1,this.composing=null}function Us(e,t,r,i){Cs.defaults[e]=t,r&&(Ls[e]=i?function(e,t,i){i!=vs&&r(e,t,i)}:r)}Es.prototype.init=function(e){var t=this,r=this,i=r.cm,n=r.div=e.lineDiv;function o(e){for(var t=e.target;t;t=t.parentNode){if(t==n)return 1;if(/\bCodeMirror-(?:line)?widget\b/.test(t.className))break}}function s(e){if(o(e)&&!xe(i,e)){if(i.somethingSelected())_s({lineWise:!1,text:i.getSelections()}),"cut"==e.type&&i.replaceSelection("",null,"cut");else{if(!i.options.lineWiseCopyCut)return;var t=Is(i);_s({lineWise:!0,text:t.text}),"cut"==e.type&&i.operation(function(){i.setSelections(t.ranges,0,V),i.replaceSelection("",null,"cut")})}if(e.clipboardData){e.clipboardData.clearData();var s=Ms.text.join("\n");if(e.clipboardData.setData("Text",s),e.clipboardData.getData("Text")==s)return void e.preventDefault()}var a=Ds(),l=a.firstChild;i.display.lineSpace.insertBefore(a,i.display.lineSpace.firstChild),l.value=Ms.text.join("\n");var c=document.activeElement;D(l),setTimeout(function(){i.display.lineSpace.removeChild(a),c.focus(),c==n&&r.showPrimarySelection()},50)}}Hs(n,i.options.spellcheck,i.options.autocorrect,i.options.autocapitalize),be(n,"paste",function(e){!o(e)||xe(i,e)||Os(e,i)||a<=11&&setTimeout(Ji(i,function(){return t.updateFromDOM()}),20)}),be(n,"compositionstart",function(e){t.composing={data:e.data,done:!1}}),be(n,"compositionupdate",function(e){t.composing||(t.composing={data:e.data,done:!1})}),be(n,"compositionend",function(e){t.composing&&(e.data!=t.composing.data&&t.readFromDOMSoon(),t.composing.done=!0)}),be(n,"touchstart",function(){return r.forceCompositionEnd()}),be(n,"input",function(){t.composing||t.readFromDOMSoon()}),be(n,"copy",s),be(n,"cut",s)},Es.prototype.screenReaderLabelChanged=function(e){e?this.div.setAttribute("aria-label",e):this.div.removeAttribute("aria-label")},Es.prototype.prepareSelection=function(){var e=mi(this.cm,!1);return e.focus=document.activeElement==this.div,e},Es.prototype.showSelection=function(e,t){e&&this.cm.display.view.length&&((e.focus||t)&&this.showPrimarySelection(),this.showMultipleSelections(e))},Es.prototype.getSelection=function(){return this.cm.display.wrapper.ownerDocument.getSelection()},Es.prototype.showPrimarySelection=function(){var e=this.getSelection(),t=this.cm,i=t.doc.sel.primary(),n=i.from(),o=i.to();if(t.display.viewTo==t.display.viewFrom||n.line>=t.display.viewTo||o.line<t.display.viewFrom)e.removeAllRanges();else{var s=Bs(t,e.anchorNode,e.anchorOffset),a=Bs(t,e.focusNode,e.focusOffset);if(!s||s.bad||!a||a.bad||0!=st(ut(s,a),n)||0!=st(ct(s,a),o)){var l,c,u=t.display.view,p=n.line>=t.display.viewFrom&&Rs(t,n)||{node:u[0].measure.map[2],offset:0},h=o.line<t.display.viewTo&&Rs(t,o);if(h||(h={node:(c=(l=u[u.length-1].measure).maps?l.maps[l.maps.length-1]:l.map)[c.length-1],offset:c[c.length-2]-c[c.length-3]}),p&&h){var d,f=e.rangeCount&&e.getRangeAt(0);try{d=S(p.node,p.offset,h.offset,h.node)}catch(e){}d&&(!r&&t.state.focused?(e.collapse(p.node,p.offset),d.collapsed||(e.removeAllRanges(),e.addRange(d))):(e.removeAllRanges(),e.addRange(d)),f&&null==e.anchorNode?e.addRange(f):r&&this.startGracePeriod()),this.rememberSelection()}else e.removeAllRanges()}}},Es.prototype.startGracePeriod=function(){var e=this;clearTimeout(this.gracePeriod),this.gracePeriod=setTimeout(function(){e.gracePeriod=!1,e.selectionChanged()&&e.cm.operation(function(){return e.cm.curOp.selectionChanged=!0})},20)},Es.prototype.showMultipleSelections=function(e){M(this.cm.display.cursorDiv,e.cursors),M(this.cm.display.selectionDiv,e.selection)},Es.prototype.rememberSelection=function(){var e=this.getSelection();this.lastAnchorNode=e.anchorNode,this.lastAnchorOffset=e.anchorOffset,this.lastFocusNode=e.focusNode,this.lastFocusOffset=e.focusOffset},Es.prototype.selectionInEditor=function(){var e=this.getSelection();if(!e.rangeCount)return!1;var t=e.getRangeAt(0).commonAncestorContainer;return O(this.div,t)},Es.prototype.focus=function(){"nocursor"!=this.cm.options.readOnly&&(this.selectionInEditor()&&document.activeElement==this.div||this.showSelection(this.prepareSelection(),!0),this.div.focus())},Es.prototype.blur=function(){this.div.blur()},Es.prototype.getField=function(){return this.div},Es.prototype.supportsTouch=function(){return!0},Es.prototype.receivedFocus=function(){var e=this;this.selectionInEditor()?this.pollSelection():Zi(this.cm,function(){return e.cm.curOp.selectionChanged=!0}),this.polling.set(this.cm.options.pollInterval,function t(){e.cm.state.focused&&(e.pollSelection(),e.polling.set(e.cm.options.pollInterval,t))})},Es.prototype.selectionChanged=function(){var e=this.getSelection();return e.anchorNode!=this.lastAnchorNode||e.anchorOffset!=this.lastAnchorOffset||e.focusNode!=this.lastFocusNode||e.focusOffset!=this.lastFocusOffset},Es.prototype.pollSelection=function(){if(null==this.readDOMTimeout&&!this.gracePeriod&&this.selectionChanged()){var e,t,r=this.getSelection(),i=this.cm;if(m&&u&&this.cm.display.gutterSpecs.length&&function(e){for(var t=r.anchorNode;t;t=t.parentNode)if(/CodeMirror-gutter-wrapper/.test(t.className))return 1}())return this.cm.triggerOnKeyDown({type:"keydown",keyCode:8,preventDefault:Math.abs}),this.blur(),void this.focus();this.composing||(this.rememberSelection(),e=Bs(i,r.anchorNode,r.anchorOffset),t=Bs(i,r.focusNode,r.focusOffset),e&&t&&Zi(i,function(){$n(i.doc,Cn(e,t),V),(e.bad||t.bad)&&(i.curOp.selectionChanged=!0)}))}},Es.prototype.pollContent=function(){null!=this.readDOMTimeout&&(clearTimeout(this.readDOMTimeout),this.readDOMTimeout=null);var e,t,r,i=this.cm,n=i.display,o=i.doc.sel.primary(),s=o.from(),a=o.to();if(0==s.ch&&s.line>i.firstLine()&&(s=ot(s.line-1,Ze(i.doc,s.line-1).length)),a.ch==Ze(i.doc,a.line).text.length&&a.line<i.lastLine()&&(a=ot(a.line+1,0)),s.line<n.viewFrom||a.line>n.viewTo-1)return!1;r=s.line==n.viewFrom||0==(e=ci(i,s.line))?(t=tt(n.view[0].line),n.view[0].node):(t=tt(n.view[e].line),n.view[e-1].node.nextSibling);var l,c=ci(i,a.line),u=c==n.view.length-1?(l=n.viewTo-1,n.lineDiv.lastChild):(l=tt(n.view[c+1].line)-1,n.view[c+1].node.previousSibling);if(!r)return!1;for(var p=i.doc.splitLines(function(e,t,r,i,n){var o="",s=!1,a=e.doc.lineSeparator(),l=!1;function c(){s&&(o+=a,l&&(o+=a),s=l=!1)}function u(e){e&&(c(),o+=e)}function p(t){if(1==t.nodeType){var r=t.getAttribute("cm-text");if(r)return void u(r);var o,h=t.getAttribute("cm-marker");if(h){var d=e.findMarks(ot(i,0),ot(n+1,0),(m=+h,function(e){return e.id==m}));return void(d.length&&(o=d[0].find(0))&&u(Je(e.doc,o.from,o.to).join(a)))}if("false"==t.getAttribute("contenteditable"))return;var f=/^(pre|div|p|li|table|br)$/i.test(t.nodeName);if(!/^br$/i.test(t.nodeName)&&0==t.textContent.length)return;f&&c();for(var g=0;g<t.childNodes.length;g++)p(t.childNodes[g]);/^(pre|p)$/i.test(t.nodeName)&&(l=!0),f&&(s=!0)}else 3==t.nodeType&&u(t.nodeValue.replace(/\u200b/g,"").replace(/\u00a0/g," "));var m}for(;p(t),t!=r;)t=t.nextSibling,l=!1;return o}(i,r,u,t,l)),h=Je(i.doc,ot(t,0),ot(l,Ze(i.doc,l).text.length));1<p.length&&1<h.length;)if(Y(p)==Y(h))p.pop(),h.pop(),l--;else{if(p[0]!=h[0])break;p.shift(),h.shift(),t++}for(var d=0,f=0,g=p[0],m=h[0],v=Math.min(g.length,m.length);d<v&&g.charCodeAt(d)==m.charCodeAt(d);)++d;for(var b=Y(p),y=Y(h),w=Math.min(b.length-(1==p.length?d:0),y.length-(1==h.length?d:0));f<w&&b.charCodeAt(b.length-f-1)==y.charCodeAt(y.length-f-1);)++f;if(1==p.length&&1==h.length&&t==s.line)for(;d&&d>s.ch&&b.charCodeAt(b.length-f-1)==y.charCodeAt(y.length-f-1);)d--,f++;p[p.length-1]=b.slice(0,b.length-f).replace(/^\u200b+/,""),p[0]=p[0].slice(d).replace(/\u200b+$/,"");var k=ot(t,d),x=ot(l,h.length?Y(h).length-f:0);return 1<p.length||p[0]||st(k,x)?(po(i.doc,p,k,x,"+input"),!0):void 0},Es.prototype.ensurePolled=function(){this.forceCompositionEnd()},Es.prototype.reset=function(){this.forceCompositionEnd()},Es.prototype.forceCompositionEnd=function(){this.composing&&(clearTimeout(this.readDOMTimeout),this.composing=null,this.updateFromDOM(),this.div.blur(),this.div.focus())},Es.prototype.readFromDOMSoon=function(){var e=this;null==this.readDOMTimeout&&(this.readDOMTimeout=setTimeout(function(){if(e.readDOMTimeout=null,e.composing){if(!e.composing.done)return;e.composing=null}e.updateFromDOM()},80))},Es.prototype.updateFromDOM=function(){var e=this;!this.cm.isReadOnly()&&this.pollContent()||Zi(this.cm,function(){return ui(e.cm)})},Es.prototype.setUneditable=function(e){e.contentEditable="false"},Es.prototype.onKeyPress=function(e){0==e.charCode||this.composing||(e.preventDefault(),this.cm.isReadOnly()||Ji(this.cm,Ps)(this.cm,String.fromCharCode(null==e.charCode?e.keyCode:e.charCode),0))},Es.prototype.readOnlyChanged=function(e){this.div.contentEditable=String("nocursor"!=e)},Es.prototype.onContextMenu=function(){},Es.prototype.resetPosition=function(){},Es.prototype.needsContentAttribute=!0,Vs.prototype.init=function(e){var t=this,r=this,i=this.cm;this.createField(e);var n=this.textarea;function o(e){if(!xe(i,e)){if(i.somethingSelected())_s({lineWise:!1,text:i.getSelections()});else{if(!i.options.lineWiseCopyCut)return;var t=Is(i);_s({lineWise:!0,text:t.text}),"cut"==e.type?i.setSelections(t.ranges,null,V):(r.prevInput="",n.value=t.text.join("\n"),D(n))}"cut"==e.type&&(i.state.cutIncoming=+new Date)}}e.wrapper.insertBefore(this.wrapper,e.wrapper.firstChild),g&&(n.style.width="0px"),be(n,"input",function(){s&&9<=a&&t.hasSelection&&(t.hasSelection=null),r.poll()}),be(n,"paste",function(e){xe(i,e)||Os(e,i)||(i.state.pasteIncoming=+new Date,r.fastPoll())}),be(n,"cut",o),be(n,"copy",o),be(e.scroller,"paste",function(t){if(!Cr(e,t)&&!xe(i,t)){if(!n.dispatchEvent)return i.state.pasteIncoming=+new Date,void r.focus();var o=new Event("paste");o.clipboardData=t.clipboardData,n.dispatchEvent(o)}}),be(e.lineSpace,"selectstart",function(t){Cr(e,t)||Te(t)}),be(n,"compositionstart",function(){var e=i.getCursor("from");r.composing&&r.composing.range.clear(),r.composing={start:e,range:i.markText(e,i.getCursor("to"),{className:"CodeMirror-composing"})}}),be(n,"compositionend",function(){r.composing&&(r.poll(),r.composing.range.clear(),r.composing=null)})},Vs.prototype.createField=function(e){this.wrapper=Ds(),this.textarea=this.wrapper.firstChild},Vs.prototype.screenReaderLabelChanged=function(e){e?this.textarea.setAttribute("aria-label",e):this.textarea.removeAttribute("aria-label")},Vs.prototype.prepareSelection=function(){var e,t,r,i=this.cm,n=i.display,o=i.doc,s=mi(i);return i.options.moveInputWithCursor&&(e=Kr(i,o.sel.primary().head,"div"),t=n.wrapper.getBoundingClientRect(),r=n.lineDiv.getBoundingClientRect(),s.teTop=Math.max(0,Math.min(n.wrapper.clientHeight-10,e.top+r.top-t.top)),s.teLeft=Math.max(0,Math.min(n.wrapper.clientWidth-10,e.left+r.left-t.left))),s},Vs.prototype.showSelection=function(e){var t=this.cm.display;M(t.cursorDiv,e.cursors),M(t.selectionDiv,e.selection),null!=e.teTop&&(this.wrapper.style.top=e.teTop+"px",this.wrapper.style.left=e.teLeft+"px")},Vs.prototype.reset=function(e){var t,r;this.contextMenuPending||this.composing||((t=this.cm).somethingSelected()?(this.prevInput="",r=t.getSelection(),this.textarea.value=r,t.state.focused&&D(this.textarea),s&&9<=a&&(this.hasSelection=r)):e||(this.prevInput=this.textarea.value="",s&&9<=a&&(this.hasSelection=null)))},Vs.prototype.getField=function(){return this.textarea},Vs.prototype.supportsTouch=function(){return!1},Vs.prototype.focus=function(){if("nocursor"!=this.cm.options.readOnly&&(!v||A()!=this.textarea))try{this.textarea.focus()}catch(e){}},Vs.prototype.blur=function(){this.textarea.blur()},Vs.prototype.resetPosition=function(){this.wrapper.style.top=this.wrapper.style.left=0},Vs.prototype.receivedFocus=function(){this.slowPoll()},Vs.prototype.slowPoll=function(){var e=this;this.pollingFast||this.polling.set(this.cm.options.pollInterval,function(){e.poll(),e.cm.state.focused&&e.slowPoll()})},Vs.prototype.fastPoll=function(){var e=!1,t=this;t.pollingFast=!0,t.polling.set(20,function r(){t.poll()||e?(t.pollingFast=!1,t.slowPoll()):(e=!0,t.polling.set(60,r))})},Vs.prototype.poll=function(){var e=this,t=this.cm,r=this.textarea,i=this.prevInput;if(this.contextMenuPending||!t.state.focused||Re(r)&&!i&&!this.composing||t.isReadOnly()||t.options.disableInput||t.state.keySeq)return!1;var n=r.value;if(n==i&&!t.somethingSelected())return!1;if(s&&9<=a&&this.hasSelection===n||b&&/[\uf700-\uf7ff]/.test(n))return t.display.input.reset(),!1;if(t.doc.sel==t.display.selForContextMenu){var o=n.charCodeAt(0);if(8203!=o||i||(i="​"),8666==o)return this.reset(),this.cm.execCommand("undo")}for(var l=0,c=Math.min(i.length,n.length);l<c&&i.charCodeAt(l)==n.charCodeAt(l);)++l;return Zi(t,function(){Ps(t,n.slice(l),i.length-l,null,e.composing?"*compose":null),1e3<n.length||-1<n.indexOf("\n")?r.value=e.prevInput="":e.prevInput=n,e.composing&&(e.composing.range.clear(),e.composing.range=t.markText(e.composing.start,t.getCursor("to"),{className:"CodeMirror-composing"}))}),!0},Vs.prototype.ensurePolled=function(){this.pollingFast&&this.poll()&&(this.pollingFast=!1)},Vs.prototype.onKeyPress=function(){s&&9<=a&&(this.hasSelection=null),this.fastPoll()},Vs.prototype.onContextMenu=function(e){var t=this,r=t.cm,i=r.display,n=t.textarea;t.contextMenuPending&&t.contextMenuPending();var o,c,u,h,d,f=li(r,e),g=i.scroller.scrollTop;function m(){var e,o;null!=n.selectionStart&&(o="​"+((e=r.somethingSelected())?n.value:""),n.value="⇚",n.value=o,t.prevInput=e?"":"​",n.selectionStart=1,n.selectionEnd=o.length,i.selForContextMenu=r.doc.sel)}function v(){var e,l;t.contextMenuPending==v&&(t.contextMenuPending=!1,t.wrapper.style.cssText=c,n.style.cssText=o,s&&a<9&&i.scrollbars.setScrollTop(i.scroller.scrollTop=g),null!=n.selectionStart&&((!s||s&&a<9)&&m(),e=0,l=function(){i.selForContextMenu==r.doc.sel&&0==n.selectionStart&&0<n.selectionEnd&&"​"==t.prevInput?Ji(r,no)(r):e++<10?i.detectingSelectAll=setTimeout(l,500):(i.selForContextMenu=null,i.input.reset())},i.detectingSelectAll=setTimeout(l,200)))}f&&!p&&(r.options.resetSelectionOnContextMenu&&-1==r.doc.sel.contains(f)&&Ji(r,$n)(r.doc,Cn(f),V),o=n.style.cssText,c=t.wrapper.style.cssText,u=t.wrapper.offsetParent.getBoundingClientRect(),t.wrapper.style.cssText="position: static",n.style.cssText="position: absolute; width: 30px; height: 30px;\n      top: "+(e.clientY-u.top-5)+"px; left: "+(e.clientX-u.left-5)+"px;\n      z-index: 1000; background: "+(s?"rgba(255, 255, 255, .05)":"transparent")+";\n      outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);",l&&(h=window.scrollY),i.input.focus(),l&&window.scrollTo(null,h),i.input.reset(),r.somethingSelected()||(n.value=t.prevInput=" "),t.contextMenuPending=v,i.selForContextMenu=r.doc.sel,clearTimeout(i.detectingSelectAll),s&&9<=a&&m(),C?(_e(e),d=function(){we(window,"mouseup",d),setTimeout(v,20)},be(window,"mouseup",d)):setTimeout(v,50))},Vs.prototype.readOnlyChanged=function(e){e||this.reset(),this.textarea.disabled="nocursor"==e},Vs.prototype.setUneditable=function(){},Vs.prototype.needsContentAttribute=!1,Ls=(Cs=ws).optionHandlers,Cs.defineOption=Us,Cs.Init=vs,Us("value","",function(e,t){return e.setValue(t)},!0),Us("mode",null,function(e,t){e.doc.modeOption=t,Mn(e)},!0),Us("indentUnit",2,Mn,!0),Us("indentWithTabs",!1),Us("smartIndent",!0),Us("tabSize",4,function(e){_n(e),Br(e),ui(e)},!0),Us("lineSeparator",null,function(e,t){if(e.doc.lineSep=t){var r=[],i=e.doc.first;e.doc.iter(function(e){for(var n=0;;){var o=e.text.indexOf(t,n);if(-1==o)break;n=o+t.length,r.push(ot(i,o))}i++});for(var n=r.length-1;0<=n;n--)po(e.doc,t,r[n],ot(r[n].line,r[n].ch+t.length))}}),Us("specialChars",/[\u0000-\u001f\u007f-\u009f\u00ad\u061c\u200b-\u200f\u2028\u2029\ufeff\ufff9-\ufffc]/g,function(e,t,r){e.state.specialChars=new RegExp(t.source+(t.test("\t")?"":"|\t"),"g"),r!=vs&&e.refresh()}),Us("specialCharPlaceholder",function(e){var t=_("span","•","cm-invalidchar");return t.title="\\u"+e.charCodeAt(0).toString(16),t.setAttribute("aria-label",t.title),t},function(e){return e.refresh()},!0),Us("electricChars",!0),Us("inputStyle",v?"contenteditable":"textarea",function(){throw new Error("inputStyle can not (yet) be changed in a running editor")},!0),Us("spellcheck",!1,function(e,t){return e.getInputField().spellcheck=t},!0),Us("autocorrect",!1,function(e,t){return e.getInputField().autocorrect=t},!0),Us("autocapitalize",!1,function(e,t){return e.getInputField().autocapitalize=t},!0),Us("rtlMoveVisually",!w),Us("wholeLineUpdateBefore",!0),Us("theme","default",function(e){ms(e),fn(e)},!0),Us("keyMap","default",function(e,t,r){var i=Go(t),n=r!=vs&&Go(r);n&&n.detach&&n.detach(e,i),i.attach&&i.attach(e,n||null)}),Us("extraKeys",null),Us("configureMouse",null),Us("lineWrapping",!1,function(e){e.options.lineWrapping?(I(e.display.wrapper,"CodeMirror-wrap"),e.display.sizer.style.minWidth="",e.display.sizerWidth=null):(T(e.display.wrapper,"CodeMirror-wrap"),$t(e)),ai(e),ui(e),Br(e),setTimeout(function(){return Fi(e)},100)},!0),Us("gutters",[],function(e,t){e.display.gutterSpecs=hn(t,e.options.lineNumbers),fn(e)},!0),Us("fixedGutter",!0,function(e,t){e.display.gutters.style.left=t?oi(e.display)+"px":"0",e.refresh()},!0),Us("coverGutterNextToScrollbar",!1,function(e){return Fi(e)},!0),Us("scrollbarStyle","native",function(e){Vi(e),Fi(e),e.display.scrollbars.setScrollTop(e.doc.scrollTop),e.display.scrollbars.setScrollLeft(e.doc.scrollLeft)},!0),Us("lineNumbers",!1,function(e,t){e.display.gutterSpecs=hn(e.options.gutters,t),fn(e)},!0),Us("firstLineNumber",1,fn,!0),Us("lineNumberFormatter",function(e){return e},fn,!0),Us("showCursorWhenSelecting",!1,gi,!0),Us("resetSelectionOnContextMenu",!0),Us("lineWiseCopyCut",!0),Us("pasteLinesPerSelection",!0),Us("selectionsMayTouch",!1),Us("readOnly",!1,function(e,t){"nocursor"==t&&(Li(e),e.display.input.blur()),e.display.input.readOnlyChanged(t)}),Us("screenReaderLabel",null,function(e,t){t=""===t?null:t,e.display.input.screenReaderLabelChanged(t)}),Us("disableInput",!1,function(e,t){t||e.display.input.reset()},!0),Us("dragDrop",!0,function(e,t,r){var i,n;!t!=!(r&&r!=vs)&&(i=e.display.dragFunctions,(n=t?be:we)(e.display.scroller,"dragstart",i.start),n(e.display.scroller,"dragenter",i.enter),n(e.display.scroller,"dragover",i.over),n(e.display.scroller,"dragleave",i.leave),n(e.display.scroller,"drop",i.drop))}),Us("allowDropFileTypes",null),Us("cursorBlinkRate",530),Us("cursorScrollMargin",0),Us("cursorHeight",1,gi,!0),Us("singleCursorHeightPerLine",!0,gi,!0),Us("workTime",100),Us("workDelay",100),Us("flattenSpans",!0,_n,!0),Us("addModeClass",!1,_n,!0),Us("pollInterval",100),Us("undoDepth",200,function(e,t){return e.doc.history.undoDepth=t}),Us("historyEventDelay",1250),Us("viewportMargin",10,function(e){return e.refresh()},!0),Us("maxHighlightLength",1e4,_n,!0),Us("moveInputWithCursor",!0,function(e,t){t||e.display.input.resetPosition()}),Us("tabindex",null,function(e,t){return e.display.input.getField().tabIndex=t||""}),Us("autofocus",null),Us("direction","ltr",function(e,t){return e.doc.setDirection(t)},!0),Us("phrases",null),Ts=(Ss=ws).optionHandlers,Ns=Ss.helpers={},Ss.prototype={constructor:Ss,focus:function(){window.focus(),this.display.input.focus()},setOption:function(e,t){var r=this.options,i=r[e];r[e]==t&&"mode"!=e||(r[e]=t,Ts.hasOwnProperty(e)&&Ji(this,Ts[e])(this,t,i),ke(this,"optionChange",this,e))},getOption:function(e){return this.options[e]},getDoc:function(){return this.doc},addKeyMap:function(e,t){this.state.keyMaps[t?"push":"unshift"](Go(e))},removeKeyMap:function(e){for(var t=this.state.keyMaps,r=0;r<t.length;++r)if(t[r]==e||t[r].name==e)return t.splice(r,1),!0},addOverlay:Qi(function(e,t){var r=e.token?e:Ss.getMode(this.options,e);if(r.startState)throw new Error("Overlays may not be stateful.");!function(e,t,r){for(var i=0,n=r(t);i<e.length&&r(e[i])<=n;)i++;e.splice(i,0,t)}(this.state.overlays,{mode:r,modeSpec:e,opaque:t&&t.opaque,priority:t&&t.priority||0},function(e){return e.priority}),this.state.modeGen++,ui(this)}),removeOverlay:Qi(function(e){for(var t=this.state.overlays,r=0;r<t.length;++r){var i=t[r].modeSpec;if(i==e||"string"==typeof e&&i.name==e)return t.splice(r,1),this.state.modeGen++,void ui(this)}}),indentLine:Qi(function(e,t,r){"string"!=typeof t&&"number"!=typeof t&&(t=null==t?this.options.smartIndent?"smart":"prev":t?"add":"subtract"),it(this.doc,e)&&xs(this,e,t,r)}),indentSelection:Qi(function(e){for(var t=this,r=this.doc.sel.ranges,i=-1,n=0;n<r.length;n++){var o=r[n];if(o.empty())o.head.line>i&&(xs(t,o.head.line,e,!0),i=o.head.line,n==t.doc.sel.primIndex&&Pi(t));else{for(var s=o.from(),a=o.to(),l=Math.max(i,s.line),c=(i=Math.min(t.lastLine(),a.line-(a.ch?0:1))+1,l);c<i;++c)xs(t,c,e);var u=t.doc.sel.ranges;0==s.ch&&r.length==u.length&&0<u[n].from().ch&&qn(t.doc,n,new kn(s,u[n].to()),V)}}}),getTokenAt:function(e,t){return Ct(this,e,t)},getLineTokens:function(e,t){return Ct(this,ot(e),t,!0)},getTokenTypeAt:function(e){e=ht(this.doc,e);var t,r=vt(this,Ze(this.doc,e.line)),i=0,n=(r.length-1)/2,o=e.ch;if(0==o)t=r[2];else for(;;){var s=i+n>>1;if((s?r[2*s-1]:0)>=o)n=s;else{if(!(r[2*s+1]<o)){t=r[2*s+2];break}i=1+s}}var a=t?t.indexOf("overlay "):-1;return a<0?t:0==a?null:t.slice(0,a-1)},getModeAt:function(e){var t=this.doc.mode;return t.innerMode?Ss.innerMode(t,this.getTokenAt(e).state).mode:t},getHelper:function(e,t){return this.getHelpers(e,t)[0]},getHelpers:function(e,t){var r=[];if(!Ns.hasOwnProperty(t))return r;var i=Ns[t],n=this.getModeAt(e);if("string"==typeof n[t])i[n[t]]&&r.push(i[n[t]]);else if(n[t])for(var o=0;o<n[t].length;o++){var s=i[n[t][o]];s&&r.push(s)}else n.helperType&&i[n.helperType]?r.push(i[n.helperType]):i[n.name]&&r.push(i[n.name]);for(var a=0;a<i._global.length;a++){var l=i._global[a];l.pred(n,this)&&-1==F(r,l.val)&&r.push(l.val)}return r},getStateAfter:function(e,t){var r=this.doc;return bt(this,(e=pt(r,null==e?r.first+r.size-1:e))+1,t).state},cursorCoords:function(e,t){var r=this.doc.sel.primary();return Kr(this,null==e?r.head:"object"==typeof e?ht(this.doc,e):e?r.from():r.to(),t||"page")},charCoords:function(e,t){return qr(this,ht(this.doc,e),t||"page")},coordsChar:function(e,t){return Zr(this,(e=Xr(this,e,t||"page")).left,e.top)},lineAtHeight:function(e,t){return e=Xr(this,{top:e,left:0},t||"page").top,rt(this.doc,e+this.display.viewOffset)},heightAtLine:function(e,t,r){var i,n=!1,o="number"==typeof e?(i=this.doc.first+this.doc.size-1,e<this.doc.first?e=this.doc.first:i<e&&(e=i,n=!0),Ze(this.doc,e)):e;return Gr(this,o,{top:0,left:0},t||"page",r||n).top+(n?this.doc.height-Kt(o):0)},defaultTextHeight:function(){return ri(this.display)},defaultCharWidth:function(){return ii(this.display)},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(e,t,r,i,n){var o,s,a,l,c=this.display,u=(e=Kr(this,ht(this.doc,e))).bottom,p=e.left;t.style.position="absolute",t.setAttribute("cm-ignore-events","true"),this.display.input.setUneditable(t),c.sizer.appendChild(t),"over"==i?u=e.top:"above"!=i&&"near"!=i||(o=Math.max(c.wrapper.clientHeight,this.doc.height),s=Math.max(c.sizer.clientWidth,c.lineSpace.clientWidth),("above"==i||e.bottom+t.offsetHeight>o)&&e.top>t.offsetHeight?u=e.top-t.offsetHeight:e.bottom+t.offsetHeight<=o&&(u=e.bottom),p+t.offsetWidth>s&&(p=s-t.offsetWidth)),t.style.top=u+"px",t.style.left=t.style.right="","right"==n?(p=c.sizer.clientWidth-t.offsetWidth,t.style.right="0px"):("left"==n?p=0:"middle"==n&&(p=(c.sizer.clientWidth-t.offsetWidth)/2),t.style.left=p+"px"),r&&(null!=(l=Mi(a=this,{left:p,top:u,right:p+t.offsetWidth,bottom:u+t.offsetHeight})).scrollTop&&Hi(a,l.scrollTop),null!=l.scrollLeft&&Wi(a,l.scrollLeft))},triggerOnKeyDown:Qi(os),triggerOnKeyPress:Qi(as),triggerOnKeyUp:ss,triggerOnMouseDown:Qi(ps),execCommand:function(e){if($o.hasOwnProperty(e))return $o[e].call(null,this)},triggerElectric:Qi(function(e){As(this,e)}),findPosH:function(e,t,r,i){var n=1;t<0&&(n=-1,t=-t);for(var o=ht(this.doc,e),s=0;s<t&&!(o=Ws(this.doc,o,n,r,i)).hitSide;++s);return o},moveH:Qi(function(e,t){var r=this;this.extendSelectionsBy(function(i){return r.display.shift||r.doc.extend||i.empty()?Ws(r.doc,i.head,e,t,r.options.rtlMoveVisually):e<0?i.from():i.to()},G)}),deleteH:Qi(function(e,t){var r=this.doc.sel,i=this.doc;r.somethingSelected()?i.replaceSelection("",null,"+delete"):Xo(this,function(r){var n=Ws(i,r.head,e,t,!1);return e<0?{from:n,to:r.head}:{from:r.head,to:n}})}),findPosV:function(e,t,r,i){var n=1,o=i;t<0&&(n=-1,t=-t);for(var s=ht(this.doc,e),a=0;a<t;++a){var l=Kr(this,s,"div");if(null==o?o=l.left:l.left=o,(s=zs(this,l,n,r)).hitSide)break}return s},moveV:Qi(function(e,t){var r=this,i=this.doc,n=[],o=!this.display.shift&&!i.extend&&i.sel.somethingSelected();if(i.extendSelectionsBy(function(s){if(o)return e<0?s.from():s.to();var a=Kr(r,s.head,"div");null!=s.goalColumn&&(a.left=s.goalColumn),n.push(a.left);var l=zs(r,a,e,t);return"page"==t&&s==i.sel.primary()&&_i(r,qr(r,l,"div").top-a.top),l},G),n.length)for(var s=0;s<i.sel.ranges.length;s++)i.sel.ranges[s].goalColumn=n[s]}),findWordAt:function(e){var t=Ze(this.doc,e.line).text,r=e.ch,i=e.ch;if(t){var n=this.getHelper(e,"wordChars");"before"!=e.sticky&&i!=t.length||!r?++i:--r;for(var o=t.charAt(r),s=te(o,n)?function(e){return te(e,n)}:/\s/.test(o)?function(e){return/\s/.test(e)}:function(e){return!/\s/.test(e)&&!te(e)};0<r&&s(t.charAt(r-1));)--r;for(;i<t.length&&s(t.charAt(i));)++i}return new kn(ot(e.line,r),ot(e.line,i))},toggleOverwrite:function(e){null!=e&&e==this.state.overwrite||(((this.state.overwrite=!this.state.overwrite)?I:T)(this.display.cursorDiv,"CodeMirror-overwrite"),ke(this,"overwriteToggle",this,this.state.overwrite))},hasFocus:function(){return this.display.input.getField()==A()},isReadOnly:function(){return!(!this.options.readOnly&&!this.doc.cantEdit)},scrollTo:Qi(function(e,t){Oi(this,e,t)}),getScrollInfo:function(){var e=this.display.scroller;return{left:e.scrollLeft,top:e.scrollTop,height:e.scrollHeight-Nr(this)-this.display.barHeight,width:e.scrollWidth-Nr(this)-this.display.barWidth,clientHeight:_r(this),clientWidth:Mr(this)}},scrollIntoView:Qi(function(e,t){var r;null==e?(e={from:this.doc.sel.primary().head,to:null},null==t&&(t=this.options.cursorScrollMargin)):"number"==typeof e?e={from:ot(e,0),to:null}:null==e.from&&(e={from:e,to:null}),e.to||(e.to=e.from),e.margin=t||0,null!=e.from.line?(r=e,Ai(this),this.curOp.scrollToPos=r):Ii(this,e.from,e.to,e.margin)}),setSize:Qi(function(e,t){function r(e){return"number"==typeof e||/^\d+$/.test(String(e))?e+"px":e}var i=this;null!=e&&(this.display.wrapper.style.width=r(e)),null!=t&&(this.display.wrapper.style.height=r(t)),this.options.lineWrapping&&Fr(this);var n=this.display.viewFrom;this.doc.iter(n,this.display.viewTo,function(e){if(e.widgets)for(var t=0;t<e.widgets.length;t++)if(e.widgets[t].noHScroll){pi(i,n,"widget");break}++n}),this.curOp.forceUpdate=!0,ke(this,"refresh",this)}),operation:function(e){return Zi(this,e)},startOperation:function(){return Gi(this)},endOperation:function(){return Xi(this)},refresh:Qi(function(){var e=this.display.cachedTextHeight;ui(this),this.curOp.forceUpdate=!0,Br(this),Oi(this,this.doc.scrollLeft,this.doc.scrollTop),ln(this.display),(null==e||.5<Math.abs(e-ri(this.display))||this.options.lineWrapping)&&ai(this),ke(this,"refresh",this)}),swapDoc:Qi(function(e){var t=this.doc;return t.cm=null,this.state.selectingText&&this.state.selectingText(),In(this,e),Br(this),this.display.input.reset(),Oi(this,e.scrollLeft,e.scrollTop),this.curOp.forceScroll=!0,ur(this,"swapDoc",this,t),t}),phrase:function(e){var t=this.options.phrases;return t&&Object.prototype.hasOwnProperty.call(t,e)?t[e]:e},getInputField:function(){return this.display.input.getField()},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}},Se(Ss),Ss.registerHelper=function(e,t,r){Ns.hasOwnProperty(e)||(Ns[e]=Ss[e]={_global:[]}),Ns[e][t]=r},Ss.registerGlobalHelper=function(e,t,r,i){Ss.registerHelper(e,t,i),Ns[e]._global.push({pred:r,val:i})};var Gs,Xs="iter insert remove copy getEditor constructor".split(" ");for(var qs in Mo.prototype)Mo.prototype.hasOwnProperty(qs)&&F(Xs,qs)<0&&(ws.prototype[qs]=function(e){return function(){return e.apply(this.doc,arguments)}}(Mo.prototype[qs]));return Se(Mo),ws.inputStyles={textarea:Vs,contenteditable:Es},ws.defineMode=function(e){ws.defaults.mode||"null"==e||(ws.defaults.mode=e),function(e,t){2<arguments.length&&(t.dependencies=Array.prototype.slice.call(arguments,2)),je[e]=t}.apply(this,arguments)},ws.defineMIME=function(e,t){Ve[e]=t},ws.defineMode("null",function(){return{token:function(e){return e.skipToEnd()}}}),ws.defineMIME("text/plain","null"),ws.defineExtension=function(e,t){ws.prototype[e]=t},ws.defineDocExtension=function(e,t){Mo.prototype[e]=t},ws.fromTextArea=function(e,t){var r;function i(){e.value=a.getValue()}if((t=t?z(t):{}).value=e.value,!t.tabindex&&e.tabIndex&&(t.tabindex=e.tabIndex),!t.placeholder&&e.placeholder&&(t.placeholder=e.placeholder),null==t.autofocus&&(r=A(),t.autofocus=r==e||null!=e.getAttribute("autofocus")&&r==document.body),e.form&&(be(e.form,"submit",i),!t.leaveSubmitMethodAlone)){var n=e.form,o=n.submit;try{var s=n.submit=function(){i(),n.submit=o,n.submit(),n.submit=s}}catch(r){}}t.finishInit=function(r){r.save=i,r.getTextArea=function(){return e},r.toTextArea=function(){r.toTextArea=isNaN,i(),e.parentNode.removeChild(r.getWrapperElement()),e.style.display="",e.form&&(we(e.form,"submit",i),t.leaveSubmitMethodAlone||"function"!=typeof e.form.submit||(e.form.submit=o))}},e.style.display="none";var a=ws(function(t){return e.parentNode.insertBefore(t,e.nextSibling)},t);return a},(Gs=ws).off=we,Gs.on=be,Gs.wheelEventPixels=function(e){var t=bn(e);return t.x*=vn,t.y*=vn,t},Gs.Doc=Mo,Gs.splitLines=Ee,Gs.countColumn=E,Gs.findColumn=X,Gs.isWordChar=ee,Gs.Pass=j,Gs.signal=ke,Gs.Line=Zt,Gs.changeEnd=Ln,Gs.scrollbarModel=ji,Gs.Pos=ot,Gs.cmpPos=st,Gs.modes=je,Gs.mimeModes=Ve,Gs.resolveMode=Ue,Gs.getMode=Ge,Gs.modeExtensions=Xe,Gs.extendMode=function(e,t){z(t,Xe.hasOwnProperty(e)?Xe[e]:Xe[e]={})},Gs.copyState=qe,Gs.startState=Ye,Gs.innerMode=Ke,Gs.commands=$o,Gs.keyMap=Ro,Gs.keyName=Uo,Gs.isModifierKey=jo,Gs.lookupKey=Bo,Gs.normalizeKeyMap=function(e){var t={};for(var r in e)if(e.hasOwnProperty(r)){var i=e[r];if(/^(name|fallthrough|(de|at)tach)$/.test(r))continue;if("..."==i){delete e[r];continue}for(var n=$(r.split(" "),Fo),o=0;o<n.length;o++){var s=void 0,a=o==n.length-1?(s=n.join(" "),i):(s=n.slice(0,o+1).join(" "),"..."),l=t[s];if(l){if(l!=a)throw new Error("Inconsistent bindings for "+s)}else t[s]=a}delete e[r]}for(var c in t)e[c]=t[c];return e},Gs.StringStream=$e,Gs.SharedTextMarker=Lo,Gs.TextMarker=xo,Gs.LineWidget=yo,Gs.e_preventDefault=Te,Gs.e_stopPropagation=Ne,Gs.e_stop=_e,Gs.addClass=I,Gs.contains=O,Gs.rmClass=T,Gs.keyNames=Do,ws.version="5.54.0",ws}),CodeMirror.defineMode("css",function(e,t){"use strict";t.propertyKeywords||(t=CodeMirror.resolveMode("text/css"));var r,i,n=e.indentUnit,o=t.tokenHooks,s=t.mediaTypes||{},a=t.mediaFeatures||{},l=t.propertyKeywords||{},c=t.colorKeywords||{},u=t.valueKeywords||{},p=t.fontProperties||{},h=t.allowNested;function d(e,t){return r=t,e}function f(e){return function(t,i){for(var n,o=!1;null!=(n=t.next());){if(n==e&&!o){")"==e&&t.backUp(1);break}o=!o&&"\\"==n}return n!=e&&(o||")"==e)||(i.tokenize=null),r="string"}}function g(e,t){return e.next(),e.match(/\s*[\"\']/,!1)?t.tokenize=null:t.tokenize=f(")"),r="(",null}function m(e,t,r){this.type=e,this.indent=t,this.prev=r}function v(e,t,r){return e.context=new m(r,t.indentation()+n,e.context),r}function b(e){return e.context=e.context.prev,e.context.type}function y(e,t,r){return x[r.context.type](e,t,r)}function w(e,t,r,i){for(var n=i||1;0<n;n--)r.context=r.context.prev;return y(e,t,r)}function k(e){var t=e.current().toLowerCase();i=u.hasOwnProperty(t)?"atom":c.hasOwnProperty(t)?"keyword":"variable"}var x={top:function(e,t,r){if("{"==e)return v(r,t,"block");if("}"==e&&r.context.prev)return b(r);if("@media"==e)return v(r,t,"media");if("@font-face"==e)return"font_face_before";if(e&&"@"==e.charAt(0))return v(r,t,"at");if("hash"==e)i="builtin";else if("word"==e)i="tag";else{if("variable-definition"==e)return"maybeprop";if("interpolation"==e)return v(r,t,"interpolation");if(":"==e)return"pseudo";if(h&&"("==e)return v(r,t,"params")}return r.context.type},block:function(e,t,r){return"word"==e?l.hasOwnProperty(t.current().toLowerCase())?(i="property","maybeprop"):h?(i=t.match(/^\s*:/,!1)?"property":"tag","block"):(i+=" error","maybeprop"):"meta"==e?"block":h||"hash"!=e&&"qualifier"!=e?x.top(e,t,r):(i="error","block")},maybeprop:function(e,t,r){return":"==e?v(r,t,"prop"):y(e,t,r)},prop:function(e,t,r){if(";"==e)return b(r);if("{"==e&&h)return v(r,t,"propBlock");if("}"==e||"{"==e)return w(e,t,r);if("("==e)return v(r,t,"parens");if("hash"!=e||/^#([0-9a-fA-f]{3}|[0-9a-fA-f]{6})$/.test(t.current())){if("word"==e)k(t);else if("interpolation"==e)return v(r,t,"interpolation")}else i+=" error";return"prop"},propBlock:function(e,t,r){return"}"==e?b(r):"word"==e?(i="property","maybeprop"):r.context.type},parens:function(e,t,r){return"{"==e||"}"==e?w(e,t,r):")"==e?b(r):"parens"},pseudo:function(e,t,r){return"word"==e?(i="variable-3",r.context.type):y(e,t,r)},media:function(e,t,r){return"("==e?v(r,t,"media_parens"):"}"==e?w(e,t,r):"{"==e?b(r)&&v(r,t,h?"block":"top"):("word"==e&&(n=t.current().toLowerCase(),i="only"==n||"not"==n||"and"==n?"keyword":s.hasOwnProperty(n)?"attribute":a.hasOwnProperty(n)?"property":"error"),r.context.type);var n},media_parens:function(e,t,r){return")"==e?b(r):"{"==e||"}"==e?w(e,t,r,2):x.media(e,t,r)},font_face_before:function(e,t,r){return"{"==e?v(r,t,"font_face"):y(e,t,r)},font_face:function(e,t,r){return"}"==e?b(r):"word"==e?(i=p.hasOwnProperty(t.current().toLowerCase())?"property":"error","maybeprop"):"font_face"},at:function(e,t,r){return";"==e?b(r):"{"==e||"}"==e?w(e,t,r):("word"==e?i="tag":"hash"==e&&(i="builtin"),"at")},interpolation:function(e,t,r){return"}"==e?b(r):"{"==e||";"==e?w(e,t,r):("variable"!=e&&(i="error"),"interpolation")},params:function(e,t,r){return")"==e?b(r):"{"==e||"}"==e?w(e,t,r):("word"==e&&k(t),"params")}};return{startState:function(e){return{tokenize:null,state:"top",context:new m("top",e||0,null)}},token:function(e,t){if(!t.tokenize&&e.eatSpace())return null;var n=(t.tokenize||function(e,t){var i=e.next();if(o[i]){var n=o[i](e,t);if(!1!==n)return n}return"@"==i?(e.eatWhile(/[\w\\\-]/),d("def",e.current())):"="==i||("~"==i||"|"==i)&&e.eat("=")?(r="compare",null):'"'==i||"'"==i?(t.tokenize=f(i),t.tokenize(e,t)):"#"==i?(e.eatWhile(/[\w\\\-]/),r="hash","atom"):"!"==i?(e.match(/^\s*\w*/),r="important","keyword"):/\d/.test(i)||"."==i&&e.eat(/\d/)?(e.eatWhile(/[\w.%]/),r="unit","number"):"-"!==i?/[,+>*\/]/.test(i)?(r="select-op",null):"."==i&&e.match(/^-?[_a-z][_a-z0-9-]*/i)?r="qualifier":/[:;{}\[\]\(\)]/.test(i)?d(null,i):"u"==i&&e.match("rl(")?(e.backUp(1),t.tokenize=g,r="word","property"):/[\w\\\-]/.test(i)?(e.eatWhile(/[\w\\\-]/),r="word","property"):r=null:/[\d.]/.test(e.peek())?(e.eatWhile(/[\w.%]/),r="unit","number"):e.match(/^[^-]+-/)?r="meta":void 0})(e,t);return n&&"object"==typeof n&&(r=n[1],n=n[0]),i=n,t.state=x[t.state](r,e,t),i},indent:function(e,t){var r=e.context,i=t&&t.charAt(0),o=r.indent;return!r.prev||("}"!=i||"block"!=r.type&&"top"!=r.type&&"interpolation"!=r.type&&"font_face"!=r.type)&&(")"!=i||"parens"!=r.type&&"params"!=r.type&&"media_parens"!=r.type)&&("{"!=i||"at"!=r.type&&"media"!=r.type)||(o=r.indent-n,r=r.prev),o},electricChars:"}",blockCommentStart:"/*",blockCommentEnd:"*/",fold:"brace"}}),function(){function e(e){for(var t={},r=0;r<e.length;++r)t[e[r]]=!0;return t}var t=["all","aural","braille","handheld","print","projection","screen","tty","tv","embossed"],r=e(t),i=["width","min-width","max-width","height","min-height","max-height","device-width","min-device-width","max-device-width","device-height","min-device-height","max-device-height","aspect-ratio","min-aspect-ratio","max-aspect-ratio","device-aspect-ratio","min-device-aspect-ratio","max-device-aspect-ratio","color","min-color","max-color","color-index","min-color-index","max-color-index","monochrome","min-monochrome","max-monochrome","resolution","min-resolution","max-resolution","scan","grid"],n=e(i),o=["align-content","align-items","align-self","alignment-adjust","alignment-baseline","anchor-point","animation","animation-delay","animation-direction","animation-duration","animation-iteration-count","animation-name","animation-play-state","animation-timing-function","appearance","azimuth","backface-visibility","background","background-attachment","background-clip","background-color","background-image","background-origin","background-position","background-repeat","background-size","baseline-shift","binding","bleed","bookmark-label","bookmark-level","bookmark-state","bookmark-target","border","border-bottom","border-bottom-color","border-bottom-left-radius","border-bottom-right-radius","border-bottom-style","border-bottom-width","border-collapse","border-color","border-image","border-image-outset","border-image-repeat","border-image-slice","border-image-source","border-image-width","border-left","border-left-color","border-left-style","border-left-width","border-radius","border-right","border-right-color","border-right-style","border-right-width","border-spacing","border-style","border-top","border-top-color","border-top-left-radius","border-top-right-radius","border-top-style","border-top-width","border-width","bottom","box-decoration-break","box-shadow","box-sizing","break-after","break-before","break-inside","caption-side","clear","clip","color","color-profile","column-count","column-fill","column-gap","column-rule","column-rule-color","column-rule-style","column-rule-width","column-span","column-width","columns","content","counter-increment","counter-reset","crop","cue","cue-after","cue-before","cursor","direction","display","dominant-baseline","drop-initial-after-adjust","drop-initial-after-align","drop-initial-before-adjust","drop-initial-before-align","drop-initial-size","drop-initial-value","elevation","empty-cells","fit","fit-position","flex","flex-basis","flex-direction","flex-flow","flex-grow","flex-shrink","flex-wrap","float","float-offset","flow-from","flow-into","font","font-feature-settings","font-family","font-kerning","font-language-override","font-size","font-size-adjust","font-stretch","font-style","font-synthesis","font-variant","font-variant-alternates","font-variant-caps","font-variant-east-asian","font-variant-ligatures","font-variant-numeric","font-variant-position","font-weight","grid-cell","grid-column","grid-column-align","grid-column-sizing","grid-column-span","grid-columns","grid-flow","grid-row","grid-row-align","grid-row-sizing","grid-row-span","grid-rows","grid-template","hanging-punctuation","height","hyphens","icon","image-orientation","image-rendering","image-resolution","inline-box-align","justify-content","left","letter-spacing","line-break","line-height","line-stacking","line-stacking-ruby","line-stacking-shift","line-stacking-strategy","list-style","list-style-image","list-style-position","list-style-type","margin","margin-bottom","margin-left","margin-right","margin-top","marker-offset","marks","marquee-direction","marquee-loop","marquee-play-count","marquee-speed","marquee-style","max-height","max-width","min-height","min-width","move-to","nav-down","nav-index","nav-left","nav-right","nav-up","opacity","order","orphans","outline","outline-color","outline-offset","outline-style","outline-width","overflow","overflow-style","overflow-wrap","overflow-x","overflow-y","padding","padding-bottom","padding-left","padding-right","padding-top","page","page-break-after","page-break-before","page-break-inside","page-policy","pause","pause-after","pause-before","perspective","perspective-origin","pitch","pitch-range","play-during","position","presentation-level","punctuation-trim","quotes","region-break-after","region-break-before","region-break-inside","region-fragment","rendering-intent","resize","rest","rest-after","rest-before","richness","right","rotation","rotation-point","ruby-align","ruby-overhang","ruby-position","ruby-span","shape-inside","shape-outside","size","speak","speak-as","speak-header","speak-numeral","speak-punctuation","speech-rate","stress","string-set","tab-size","table-layout","target","target-name","target-new","target-position","text-align","text-align-last","text-decoration","text-decoration-color","text-decoration-line","text-decoration-skip","text-decoration-style","text-emphasis","text-emphasis-color","text-emphasis-position","text-emphasis-style","text-height","text-indent","text-justify","text-outline","text-overflow","text-shadow","text-size-adjust","text-space-collapse","text-transform","text-underline-position","text-wrap","top","transform","transform-origin","transform-style","transition","transition-delay","transition-duration","transition-property","transition-timing-function","unicode-bidi","vertical-align","visibility","voice-balance","voice-duration","voice-family","voice-pitch","voice-range","voice-rate","voice-stress","voice-volume","volume","white-space","widows","width","word-break","word-spacing","word-wrap","z-index","zoom","clip-path","clip-rule","mask","enable-background","filter","flood-color","flood-opacity","lighting-color","stop-color","stop-opacity","pointer-events","color-interpolation","color-interpolation-filters","color-profile","color-rendering","fill","fill-opacity","fill-rule","image-rendering","marker","marker-end","marker-mid","marker-start","shape-rendering","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","text-rendering","baseline-shift","dominant-baseline","glyph-orientation-horizontal","glyph-orientation-vertical","kerning","text-anchor","writing-mode"],s=e(o),a=["aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","grey","green","greenyellow","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","snow","springgreen","steelblue","tan","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen"],l=e(a),c=["above","absolute","activeborder","activecaption","afar","after-white-space","ahead","alias","all","all-scroll","alternate","always","amharic","amharic-abegede","antialiased","appworkspace","arabic-indic","armenian","asterisks","auto","avoid","avoid-column","avoid-page","avoid-region","background","backwards","baseline","below","bidi-override","binary","bengali","blink","block","block-axis","bold","bolder","border","border-box","both","bottom","break","break-all","break-word","button","button-bevel","buttonface","buttonhighlight","buttonshadow","buttontext","cambodian","capitalize","caps-lock-indicator","caption","captiontext","caret","cell","center","checkbox","circle","cjk-earthly-branch","cjk-heavenly-stem","cjk-ideographic","clear","clip","close-quote","col-resize","collapse","column","compact","condensed","contain","content","content-box","context-menu","continuous","copy","cover","crop","cross","crosshair","currentcolor","cursive","dashed","decimal","decimal-leading-zero","default","default-button","destination-atop","destination-in","destination-out","destination-over","devanagari","disc","discard","document","dot-dash","dot-dot-dash","dotted","double","down","e-resize","ease","ease-in","ease-in-out","ease-out","element","ellipse","ellipsis","embed","end","ethiopic","ethiopic-abegede","ethiopic-abegede-am-et","ethiopic-abegede-gez","ethiopic-abegede-ti-er","ethiopic-abegede-ti-et","ethiopic-halehame-aa-er","ethiopic-halehame-aa-et","ethiopic-halehame-am-et","ethiopic-halehame-gez","ethiopic-halehame-om-et","ethiopic-halehame-sid-et","ethiopic-halehame-so-et","ethiopic-halehame-ti-er","ethiopic-halehame-ti-et","ethiopic-halehame-tig","ew-resize","expanded","extra-condensed","extra-expanded","fantasy","fast","fill","fixed","flat","footnotes","forwards","from","geometricPrecision","georgian","graytext","groove","gujarati","gurmukhi","hand","hangul","hangul-consonant","hebrew","help","hidden","hide","higher","highlight","highlighttext","hiragana","hiragana-iroha","horizontal","hsl","hsla","icon","ignore","inactiveborder","inactivecaption","inactivecaptiontext","infinite","infobackground","infotext","inherit","initial","inline","inline-axis","inline-block","inline-table","inset","inside","intrinsic","invert","italic","justify","kannada","katakana","katakana-iroha","keep-all","khmer","landscape","lao","large","larger","left","level","lighter","line-through","linear","lines","list-item","listbox","listitem","local","logical","loud","lower","lower-alpha","lower-armenian","lower-greek","lower-hexadecimal","lower-latin","lower-norwegian","lower-roman","lowercase","ltr","malayalam","match","media-controls-background","media-current-time-display","media-fullscreen-button","media-mute-button","media-play-button","media-return-to-realtime-button","media-rewind-button","media-seek-back-button","media-seek-forward-button","media-slider","media-sliderthumb","media-time-remaining-display","media-volume-slider","media-volume-slider-container","media-volume-sliderthumb","medium","menu","menulist","menulist-button","menulist-text","menulist-textfield","menutext","message-box","middle","min-intrinsic","mix","mongolian","monospace","move","multiple","myanmar","n-resize","narrower","ne-resize","nesw-resize","no-close-quote","no-drop","no-open-quote","no-repeat","none","normal","not-allowed","nowrap","ns-resize","nw-resize","nwse-resize","oblique","octal","open-quote","optimizeLegibility","optimizeSpeed","oriya","oromo","outset","outside","outside-shape","overlay","overline","padding","padding-box","painted","page","paused","persian","plus-darker","plus-lighter","pointer","polygon","portrait","pre","pre-line","pre-wrap","preserve-3d","progress","push-button","radio","read-only","read-write","read-write-plaintext-only","rectangle","region","relative","repeat","repeat-x","repeat-y","reset","reverse","rgb","rgba","ridge","right","round","row-resize","rtl","run-in","running","s-resize","sans-serif","scroll","scrollbar","se-resize","searchfield","searchfield-cancel-button","searchfield-decoration","searchfield-results-button","searchfield-results-decoration","semi-condensed","semi-expanded","separate","serif","show","sidama","single","skip-white-space","slide","slider-horizontal","slider-vertical","sliderthumb-horizontal","sliderthumb-vertical","slow","small","small-caps","small-caption","smaller","solid","somali","source-atop","source-in","source-out","source-over","space","square","square-button","start","static","status-bar","stretch","stroke","sub","subpixel-antialiased","super","sw-resize","table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row","table-row-group","telugu","text","text-bottom","text-top","textarea","textfield","thai","thick","thin","threeddarkshadow","threedface","threedhighlight","threedlightshadow","threedshadow","tibetan","tigre","tigrinya-er","tigrinya-er-abegede","tigrinya-et","tigrinya-et-abegede","to","top","transparent","ultra-condensed","ultra-expanded","underline","up","upper-alpha","upper-armenian","upper-greek","upper-hexadecimal","upper-latin","upper-norwegian","upper-roman","uppercase","urdu","url","vertical","vertical-text","visible","visibleFill","visiblePainted","visibleStroke","visual","w-resize","wait","wave","wider","window","windowframe","windowtext","x-large","x-small","xor","xx-large","xx-small"],u=e(c),p=e(["font-family","src","unicode-range","font-variant","font-feature-settings","font-stretch","font-weight","font-style"]),h=t.concat(i).concat(o).concat(a).concat(c);function d(e,t){for(var r,i=!1;null!=(r=e.next());){if(i&&"/"==r){t.tokenize=null;break}i="*"==r}return["comment","comment"]}function f(e,t){return e.skipTo("--\x3e")?(e.match("--\x3e"),t.tokenize=null):e.skipToEnd(),["comment","comment"]}CodeMirror.registerHelper("hintWords","css",h),CodeMirror.defineMIME("text/css",{mediaTypes:r,mediaFeatures:n,propertyKeywords:s,colorKeywords:l,valueKeywords:u,fontProperties:p,tokenHooks:{"<":function(e,t){return!!e.match("!--")&&(t.tokenize=f)(e,t)},"/":function(e,t){return!!e.eat("*")&&(t.tokenize=d)(e,t)}},name:"css"}),CodeMirror.defineMIME("text/x-scss",{mediaTypes:r,mediaFeatures:n,propertyKeywords:s,colorKeywords:l,valueKeywords:u,fontProperties:p,allowNested:!0,tokenHooks:{"/":function(e,t){return e.eat("/")?(e.skipToEnd(),["comment","comment"]):e.eat("*")?(t.tokenize=d)(e,t):["operator","operator"]},":":function(e){return!!e.match(/\s*{/)&&[null,"{"]},$:function(e){return e.match(/^[\w-]+/),e.match(/^\s*:/,!1)?["variable-2","variable-definition"]:["variable-2","variable"]},"#":function(e){return!!e.eat("{")&&[null,"interpolation"]}},name:"css",helperType:"scss"}),CodeMirror.defineMIME("text/x-less",{mediaTypes:r,mediaFeatures:n,propertyKeywords:s,colorKeywords:l,valueKeywords:u,fontProperties:p,allowNested:!0,tokenHooks:{"/":function(e,t){return e.eat("/")?(e.skipToEnd(),["comment","comment"]):e.eat("*")?(t.tokenize=d)(e,t):["operator","operator"]},"@":function(e){return!e.match(/^(charset|document|font-face|import|keyframes|media|namespace|page|supports)\b/,!1)&&(e.eatWhile(/[\w\\\-]/),e.match(/^\s*:/,!1)?["variable-2","variable-definition"]:["variable-2","variable"])},"&":function(){return["atom","atom"]}},name:"css",helperType:"less"})}(),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(e){"use strict";e.defineMode("javascript",function(t,r){var i,n,o=t.indentUnit,s=r.statementIndent,a=r.jsonld,l=r.json||a,c=r.typescript,u=function(){function e(e){return{type:e,style:"keyword"}}var t=e("keyword a"),r=e("keyword b"),i=e("keyword c"),n=e("operator"),o={type:"atom",style:"atom"},s={if:e("if"),while:t,with:t,else:r,do:r,try:r,finally:r,return:i,break:i,continue:i,new:i,delete:i,throw:i,debugger:i,var:e("var"),const:e("var"),let:e("var"),function:e("function"),catch:e("catch"),for:e("for"),switch:e("switch"),case:e("case"),default:e("default"),in:n,typeof:n,instanceof:n,true:o,false:o,null:o,undefined:o,NaN:o,Infinity:o,this:e("this"),module:e("module"),class:e("class"),super:e("atom"),yield:i,export:e("export"),import:e("import"),extends:i};if(c){var a={type:"variable",style:"variable-3"},l={interface:e("interface"),extends:e("extends"),constructor:e("constructor"),public:e("public"),private:e("private"),protected:e("protected"),static:e("static"),string:a,number:a,bool:a,any:a};for(var u in l)s[u]=l[u]}return s}(),p=/[+\-*&%=<>!?|~^]/,h=/^@(context|id|value|language|type|container|list|set|reverse|index|base|vocab|graph)"/;function d(e,t,r){return i=e,n=r,t}function f(e,t){var r=e.next();if('"'==r||"'"==r)return t.tokenize=(i=r,function(e,t){var r,n=!1;if(a&&"@"==e.peek()&&e.match(h))return t.tokenize=f,d("jsonld-keyword","meta");for(;null!=(r=e.next())&&(r!=i||n);)n=!n&&"\\"==r;return n||(t.tokenize=f),d("string","string")}),t.tokenize(e,t);if("."==r&&e.match(/^\d+(?:[eE][+\-]?\d+)?/))return d("number","number");if("."==r&&e.match(".."))return d("spread","meta");if(/[\[\]{}\(\),;\:\.]/.test(r))return d(r);if("="==r&&e.eat(">"))return d("=>","operator");if("0"==r&&e.eat(/x/i))return e.eatWhile(/[\da-f]/i),d("number","number");if(/\d/.test(r))return e.match(/^\d*(?:\.\d*)?(?:[eE][+\-]?\d+)?/),d("number","number");if("/"==r)return e.eat("*")?(t.tokenize=g)(e,t):e.eat("/")?(e.skipToEnd(),d("comment","comment")):"operator"==t.lastType||"keyword c"==t.lastType||"sof"==t.lastType||/^[\[{}\(,;:]$/.test(t.lastType)?(function(e){for(var t,r=!1,i=!1;null!=(t=e.next());){if(!r){if("/"==t&&!i)return;"["==t?i=!0:i&&"]"==t&&(i=!1)}r=!r&&"\\"==t}}(e),e.eatWhile(/[gimy]/),d("regexp","string-2")):(e.eatWhile(p),d("operator","operator",e.current()));if("`"==r)return(t.tokenize=m)(e,t);if("#"==r)return e.skipToEnd(),d("error","error");if(p.test(r))return e.eatWhile(p),d("operator","operator",e.current());e.eatWhile(/[\w\$_]/);var i,n=e.current(),o=u.propertyIsEnumerable(n)&&u[n];return o&&"."!=t.lastType?d(o.type,o.style,n):d("variable","variable",n)}function g(e,t){for(var r,i=!1;r=e.next();){if("/"==r&&i){t.tokenize=f;break}i="*"==r}return d("comment","comment")}function m(e,t){for(var r,i=!1;null!=(r=e.next());){if(!i&&("`"==r||"$"==r&&e.eat("{"))){t.tokenize=f;break}i=!i&&"\\"==r}return d("quasi","string-2",e.current())}var v="([{}])";function b(e,t){t.fatArrowAt&&(t.fatArrowAt=null);var r=e.string.indexOf("=>",e.start);if(!(r<0)){for(var i=0,n=!1,o=r-1;0<=o;--o){var s=e.string.charAt(o),a=v.indexOf(s);if(0<=a&&a<3){if(!i){++o;break}if(0==--i)break}else if(3<=a&&a<6)++i;else if(/[$\w]/.test(s))n=!0;else if(n&&!i){++o;break}}n&&!i&&(t.fatArrowAt=o)}}var y={atom:!0,number:!0,variable:!0,string:!0,regexp:!0,this:!0,"jsonld-keyword":!0};function w(e,t,r,i,n,o){this.indented=e,this.column=t,this.type=r,this.prev=n,this.info=o,null!=i&&(this.align=i)}var k={state:null,column:null,marked:null,cc:null};function x(){for(var e=arguments.length-1;0<=e;e--)k.cc.push(arguments[e])}function C(){return x.apply(null,arguments),!0}function L(e){function t(t){for(var r=t;r;r=r.next)if(r.name==e)return 1}var i=k.state;if(i.context){if(k.marked="def",t(i.localVars))return;i.localVars={name:e,next:i.localVars}}else{if(t(i.globalVars))return;r.globalVars&&(i.globalVars={name:e,next:i.globalVars})}}var S={name:"this",next:{name:"arguments"}};function T(){k.state.context={prev:k.state.context,vars:k.state.localVars},k.state.localVars=S}function N(){k.state.localVars=k.state.context.vars,k.state.context=k.state.context.prev}function M(e,t){function r(){var r=k.state,i=r.indented;"stat"==r.lexical.type&&(i=r.lexical.indented),r.lexical=new w(i,k.stream.column(),e,null,r.lexical,t)}return r.lex=!0,r}function _(){var e=k.state;e.lexical.prev&&(")"==e.lexical.type&&(e.indented=e.lexical.indented),e.lexical=e.lexical.prev)}function P(e){return function t(r){return r==e?C():";"==e?x():C(t)}}function O(e,t){return"var"==e?C(M("vardef",t.length),Q,P(";"),_):"keyword a"==e?C(M("form"),A,O,_):"keyword b"==e?C(M("form"),O,_):"{"==e?C(M("}"),$,_):";"==e?C():"if"==e?("else"==k.state.lexical.info&&k.state.cc[k.state.cc.length-1]==_&&k.state.cc.pop()(),C(M("form"),A,O,_,ne)):"function"==e?C(ue):"for"==e?C(M("form"),oe,O,_):"variable"==e?C(M("stat"),V):"switch"==e?C(M("form"),A,M("}","switch"),P("{"),$,_,_):"case"==e?C(A,P(":")):"default"==e?C(P(":")):"catch"==e?C(M("form"),T,P("("),pe,P(")"),O,_,N):"module"==e?C(M("form"),T,ge,N,_):"class"==e?C(M("form"),he,fe,_):"export"==e?C(M("form"),me,_):"import"==e?C(M("form"),ve,_):x(M("stat"),A,P(";"),_)}function A(e){return H(e,!1)}function I(e){return H(e,!0)}function H(e,t){if(k.state.fatArrowAt==k.stream.start){var r=t?j:B;if("("==e)return C(T,M(")"),K(ee,")"),_,P("=>"),r,N);if("variable"==e)return x(T,ee,P("=>"),r,N)}var i=t?E:z;return y.hasOwnProperty(e)?C(i):"function"==e?C(ue,i):"keyword c"==e?C(t?W:D):"("==e?C(M(")"),D,xe,P(")"),_,i):"operator"==e||"spread"==e?C(t?I:A):"["==e?C(M("]"),we,_,i):"{"==e?Y(G,"}",null,i):"quasi"==e?x(R,i):C()}function D(e){return e.match(/[;\}\)\],]/)?x():x(A)}function W(e){return e.match(/[;\}\)\],]/)?x():x(I)}function z(e,t){return","==e?C(A):E(e,t,!1)}function E(e,t,r){var i=0==r?z:E,n=0==r?A:I;return"=>"==t?C(T,r?j:B,N):"operator"==e?/\+\+|--/.test(t)?C(i):"?"==t?C(A,P(":"),n):C(n):"quasi"==e?x(R,i):";"!=e?"("==e?Y(I,")","call",i):"."==e?C(U,i):"["==e?C(M("]"),D,P("]"),_,i):void 0:void 0}function R(e,t){return"quasi"!=e?x():"${"!=t.slice(t.length-2)?C(R):C(A,F)}function F(e){if("}"==e)return k.marked="string-2",k.state.tokenize=m,C(R)}function B(e){return b(k.stream,k.state),x("{"==e?O:A)}function j(e){return b(k.stream,k.state),x("{"==e?O:I)}function V(e){return":"==e?C(_,O):x(z,P(";"),_)}function U(e){if("variable"==e)return k.marked="property",C()}function G(e,t){if("variable"==e){if(k.marked="property","get"==t||"set"==t)return C(X)}else if("number"==e||"string"==e)k.marked=a?"property":e+" property";else if("["==e)return C(A,P("]"),q);if(y.hasOwnProperty(e))return C(q)}function X(e){return"variable"!=e?x(q):(k.marked="property",C(ue))}function q(e){return":"==e?C(I):"("==e?x(ue):void 0}function K(e,t){function r(i){if(","!=i)return i==t?C():C(P(t));var n=k.state.lexical;return"call"==n.info&&(n.pos=(n.pos||0)+1),C(e,r)}return function(i){return i==t?C():x(e,r)}}function Y(e,t,r){for(var i=3;i<arguments.length;i++)k.cc.push(arguments[i]);return C(M(t,r),K(e,t),_)}function $(e){return"}"==e?C():x(O,$)}function Z(e){if(c&&":"==e)return C(J)}function J(e){if("variable"==e)return k.marked="variable-3",C()}function Q(){return x(ee,Z,re,ie)}function ee(e,t){return"variable"==e?(L(t),C()):"["==e?Y(ee,"]"):"{"==e?Y(te,"}"):void 0}function te(e,t){return"variable"!=e||k.stream.match(/^\s*:/,!1)?("variable"==e&&(k.marked="property"),C(P(":"),ee,re)):(L(t),C(re))}function re(e,t){if("="==t)return C(I)}function ie(e){if(","==e)return C(Q)}function ne(e,t){if("keyword b"==e&&"else"==t)return C(M("form","else"),O,_)}function oe(e){if("("==e)return C(M(")"),se,P(")"),_)}function se(e){return"var"==e?C(Q,P(";"),le):";"==e?C(le):"variable"==e?C(ae):x(A,P(";"),le)}function ae(e,t){return"in"==t||"of"==t?(k.marked="keyword",C(A)):C(z,le)}function le(e,t){return";"==e?C(ce):"in"==t||"of"==t?(k.marked="keyword",C(A)):x(A,P(";"),ce)}function ce(e){")"!=e&&C(A)}function ue(e,t){return"*"==t?(k.marked="keyword",C(ue)):"variable"==e?(L(t),C(ue)):"("==e?C(T,M(")"),K(pe,")"),_,O,N):void 0}function pe(e){return"spread"==e?C(pe):x(ee,Z)}function he(e,t){if("variable"==e)return L(t),C(de)}function de(e,t){if("extends"==t)return C(A)}function fe(e){if("{"==e)return Y(G,"}")}function ge(e,t){return"string"==e?C(O):"variable"==e?(L(t),C(ye)):void 0}function me(e,t){return"*"==t?(k.marked="keyword",C(ye,P(";"))):"default"==t?(k.marked="keyword",C(A,P(";"))):x(O)}function ve(e){return"string"==e?C():x(be,ye)}function be(e,t){return"{"==e?Y(be,"}"):("variable"==e&&L(t),C())}function ye(e,t){if("from"==t)return k.marked="keyword",C(A)}function we(e){return"]"==e?C():x(I,ke)}function ke(e){return"for"==e?x(xe,P("]")):(","==e?C:x)(K(I,"]"))}function xe(e){return"for"==e?C(oe,xe):"if"==e?C(A,xe):void 0}return _.lex=!0,{startState:function(e){var t={tokenize:f,lastType:"sof",cc:[],lexical:new w((e||0)-o,0,"block",!1),localVars:r.localVars,context:r.localVars&&{vars:r.localVars},indented:0};return r.globalVars&&"object"==typeof r.globalVars&&(t.globalVars=r.globalVars),t},token:function(e,t){if(e.sol()&&(t.lexical.hasOwnProperty("align")||(t.lexical.align=!1),t.indented=e.indentation(),b(e,t)),t.tokenize!=g&&e.eatSpace())return null;var r=t.tokenize(e,t);return"comment"==i?r:(t.lastType="operator"!=i||"++"!=n&&"--"!=n?i:"incdec",function(e,t,r,i,n){var o=e.cc;for(k.state=e,k.stream=n,k.marked=null,k.cc=o,e.lexical.hasOwnProperty("align")||(e.lexical.align=!0);;)if((o.length?o.pop():l?A:O)(r,i)){for(;o.length&&o[o.length-1].lex;)o.pop()();return k.marked?k.marked:"variable"==r&&function(e,t){for(var r=e.localVars;r;r=r.next)if(r.name==t)return 1;for(var i=e.context;i;i=i.prev)for(r=i.vars;r;r=r.next)if(r.name==t)return 1}(e,i)?"variable-2":t}}(t,r,i,n,e))},indent:function(t,i){if(t.tokenize==g)return e.Pass;if(t.tokenize!=f)return 0;var n=i&&i.charAt(0),a=t.lexical;if(!/^\s*else\b/.test(i))for(var l=t.cc.length-1;0<=l;--l){var c=t.cc[l];if(c==_)a=a.prev;else if(c!=ne)break}"stat"==a.type&&"}"==n&&(a=a.prev),s&&")"==a.type&&"stat"==a.prev.type&&(a=a.prev);var u=a.type,p=n==u;return"vardef"==u?a.indented+("operator"==t.lastType||","==t.lastType?a.info+1:0):"form"==u&&"{"==n?a.indented:"form"==u?a.indented+o:"stat"==u?a.indented+("operator"==t.lastType||","==t.lastType?s||o:0):"switch"!=a.info||p||0==r.doubleIndentSwitch?a.align?a.column+(p?0:1):a.indented+(p?0:o):a.indented+(/^(?:case|default)\b/.test(i)?o:2*o)},electricChars:":{}",blockCommentStart:l?null:"/*",blockCommentEnd:l?null:"*/",lineComment:l?null:"//",fold:"brace",helperType:l?"json":"javascript",jsonldMode:a,jsonMode:l}}),e.registerHelper("wordChars","javascript",/[\\w$]/),e.defineMIME("text/javascript","javascript"),e.defineMIME("text/ecmascript","javascript"),e.defineMIME("application/javascript","javascript"),e.defineMIME("application/ecmascript","javascript"),e.defineMIME("application/json",{name:"javascript",json:!0}),e.defineMIME("application/x-json",{name:"javascript",json:!0}),e.defineMIME("application/ld+json",{name:"javascript",jsonld:!0}),e.defineMIME("text/typescript",{name:"javascript",typescript:!0}),e.defineMIME("application/typescript",{name:"javascript",typescript:!0})}),
/*! jQuery UI - v1.11.1 - 2014-10-14
* http://jqueryui.com
* Includes: core.js, widget.js, mouse.js, draggable.js, sortable.js
* Copyright 2014 jQuery Foundation and other contributors; Licensed MIT */
function(e){"function"==typeof define&&define.amd?define(["jquery"],e):e(jQuery)}(function(e){function t(t,i){var n,o,s,a=t.nodeName.toLowerCase();return"area"===a?(o=(n=t.parentNode).name,!(!t.href||!o||"map"!==n.nodeName.toLowerCase())&&(!!(s=e("img[usemap='#"+o+"']")[0])&&r(s))):(/input|select|textarea|button|object/.test(a)?!t.disabled:"a"===a&&t.href||i)&&r(t)}function r(t){return e.expr.filters.visible(t)&&!e(t).parents().addBack().filter(function(){return"hidden"===e.css(this,"visibility")}).length}e.ui=e.ui||{},e.extend(e.ui,{version:"1.11.1",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),e.fn.extend({scrollParent:function(t){var r=this.css("position"),i="absolute"===r,n=t?/(auto|scroll|hidden)/:/(auto|scroll)/,o=this.parents().filter(function(){var t=e(this);return(!i||"static"!==t.css("position"))&&n.test(t.css("overflow")+t.css("overflow-y")+t.css("overflow-x"))}).eq(0);return"fixed"!==r&&o.length?o:e(this[0].ownerDocument||document)},uniqueId:function(){var e=0;return function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++e)})}}(),removeUniqueId:function(){return this.each(function(){/^ui-id-\d+$/.test(this.id)&&e(this).removeAttr("id")})}}),e.extend(e.expr[":"],{data:e.expr.createPseudo?e.expr.createPseudo(function(t){return function(r){return!!e.data(r,t)}}):function(t,r,i){return!!e.data(t,i[3])},focusable:function(r){return t(r,!isNaN(e.attr(r,"tabindex")))},tabbable:function(r){var i=e.attr(r,"tabindex"),n=isNaN(i);return(n||i>=0)&&t(r,!n)}}),e("<a>").outerWidth(1).jquery||e.each(["Width","Height"],function(t,r){function i(t,r,i,o){return e.each(n,function(){r-=parseFloat(e.css(t,"padding"+this))||0,i&&(r-=parseFloat(e.css(t,"border"+this+"Width"))||0),o&&(r-=parseFloat(e.css(t,"margin"+this))||0)}),r}var n="Width"===r?["Left","Right"]:["Top","Bottom"],o=r.toLowerCase(),s={innerWidth:e.fn.innerWidth,innerHeight:e.fn.innerHeight,outerWidth:e.fn.outerWidth,outerHeight:e.fn.outerHeight};e.fn["inner"+r]=function(t){return void 0===t?s["inner"+r].call(this):this.each(function(){e(this).css(o,i(this,t)+"px")})},e.fn["outer"+r]=function(t,n){return"number"!=typeof t?s["outer"+r].call(this,t):this.each(function(){e(this).css(o,i(this,t,!0,n)+"px")})}}),e.fn.addBack||(e.fn.addBack=function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}),e("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(e.fn.removeData=function(t){return function(r){return arguments.length?t.call(this,e.camelCase(r)):t.call(this)}}(e.fn.removeData)),e.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()),e.fn.extend({focus:function(t){return function(r,i){return"number"==typeof r?this.each(function(){var t=this;setTimeout(function(){e(t).focus(),i&&i.call(t)},r)}):t.apply(this,arguments)}}(e.fn.focus),disableSelection:function(){var e="onselectstart"in document.createElement("div")?"selectstart":"mousedown";return function(){return this.bind(e+".ui-disableSelection",function(e){e.preventDefault()})}}(),enableSelection:function(){return this.unbind(".ui-disableSelection")},zIndex:function(t){if(void 0!==t)return this.css("zIndex",t);if(this.length)for(var r,i,n=e(this[0]);n.length&&n[0]!==document;){if(("absolute"===(r=n.css("position"))||"relative"===r||"fixed"===r)&&(i=parseInt(n.css("zIndex"),10),!isNaN(i)&&0!==i))return i;n=n.parent()}return 0}}),e.ui.plugin={add:function(t,r,i){var n,o=e.ui[t].prototype;for(n in i)o.plugins[n]=o.plugins[n]||[],o.plugins[n].push([r,i[n]])},call:function(e,t,r,i){var n,o=e.plugins[t];if(o&&(i||e.element[0].parentNode&&11!==e.element[0].parentNode.nodeType))for(n=0;o.length>n;n++)e.options[o[n][0]]&&o[n][1].apply(e.element,r)}};var i=0,n=Array.prototype.slice;e.cleanData=function(t){return function(r){var i,n,o;for(o=0;null!=(n=r[o]);o++)try{(i=e._data(n,"events"))&&i.remove&&e(n).triggerHandler("remove")}catch(e){}t(r)}}(e.cleanData),e.widget=function(t,r,i){var n,o,s,a,l={},c=t.split(".")[0];return t=t.split(".")[1],n=c+"-"+t,i||(i=r,r=e.Widget),e.expr[":"][n.toLowerCase()]=function(t){return!!e.data(t,n)},e[c]=e[c]||{},o=e[c][t],s=e[c][t]=function(e,t){return this._createWidget?void(arguments.length&&this._createWidget(e,t)):new s(e,t)},e.extend(s,o,{version:i.version,_proto:e.extend({},i),_childConstructors:[]}),(a=new r).options=e.widget.extend({},a.options),e.each(i,function(t,i){return e.isFunction(i)?void(l[t]=function(){var e=function(){return r.prototype[t].apply(this,arguments)},n=function(e){return r.prototype[t].apply(this,e)};return function(){var t,r=this._super,o=this._superApply;return this._super=e,this._superApply=n,t=i.apply(this,arguments),this._super=r,this._superApply=o,t}}()):void(l[t]=i)}),s.prototype=e.widget.extend(a,{widgetEventPrefix:o&&a.widgetEventPrefix||t},l,{constructor:s,namespace:c,widgetName:t,widgetFullName:n}),o?(e.each(o._childConstructors,function(t,r){var i=r.prototype;e.widget(i.namespace+"."+i.widgetName,s,r._proto)}),delete o._childConstructors):r._childConstructors.push(s),e.widget.bridge(t,s),s},e.widget.extend=function(t){for(var r,i,o=n.call(arguments,1),s=0,a=o.length;a>s;s++)for(r in o[s])i=o[s][r],o[s].hasOwnProperty(r)&&void 0!==i&&(t[r]=e.isPlainObject(i)?e.isPlainObject(t[r])?e.widget.extend({},t[r],i):e.widget.extend({},i):i);return t},e.widget.bridge=function(t,r){var i=r.prototype.widgetFullName||t;e.fn[t]=function(o){var s="string"==typeof o,a=n.call(arguments,1),l=this;return o=!s&&a.length?e.widget.extend.apply(null,[o].concat(a)):o,s?this.each(function(){var r,n=e.data(this,i);return"instance"===o?(l=n,!1):n?e.isFunction(n[o])&&"_"!==o.charAt(0)?(r=n[o].apply(n,a))!==n&&void 0!==r?(l=r&&r.jquery?l.pushStack(r.get()):r,!1):void 0:e.error("no such method '"+o+"' for "+t+" widget instance"):e.error("cannot call methods on "+t+" prior to initialization; attempted to call method '"+o+"'")}):this.each(function(){var t=e.data(this,i);t?(t.option(o||{}),t._init&&t._init()):e.data(this,i,new r(o,this))}),l}},e.Widget=function(){},e.Widget._childConstructors=[],e.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(t,r){r=e(r||this.defaultElement||this)[0],this.element=e(r),this.uuid=i++,this.eventNamespace="."+this.widgetName+this.uuid,this.options=e.widget.extend({},this.options,this._getCreateOptions(),t),this.bindings=e(),this.hoverable=e(),this.focusable=e(),r!==this&&(e.data(r,this.widgetFullName,this),this._on(!0,this.element,{remove:function(e){e.target===r&&this.destroy()}}),this.document=e(r.style?r.ownerDocument:r.document||r),this.window=e(this.document[0].defaultView||this.document[0].parentWindow)),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:e.noop,_getCreateEventData:e.noop,_create:e.noop,_init:e.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetFullName).removeData(e.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:e.noop,widget:function(){return this.element},option:function(t,r){var i,n,o,s=t;if(0===arguments.length)return e.widget.extend({},this.options);if("string"==typeof t)if(s={},i=t.split("."),t=i.shift(),i.length){for(n=s[t]=e.widget.extend({},this.options[t]),o=0;i.length-1>o;o++)n[i[o]]=n[i[o]]||{},n=n[i[o]];if(t=i.pop(),1===arguments.length)return void 0===n[t]?null:n[t];n[t]=r}else{if(1===arguments.length)return void 0===this.options[t]?null:this.options[t];s[t]=r}return this._setOptions(s),this},_setOptions:function(e){var t;for(t in e)this._setOption(t,e[t]);return this},_setOption:function(e,t){return this.options[e]=t,"disabled"===e&&(this.widget().toggleClass(this.widgetFullName+"-disabled",!!t),t&&(this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus"))),this},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},_on:function(t,r,i){var n,o=this;"boolean"!=typeof t&&(i=r,r=t,t=!1),i?(r=n=e(r),this.bindings=this.bindings.add(r)):(i=r,r=this.element,n=this.widget()),e.each(i,function(i,s){function a(){return t||!0!==o.options.disabled&&!e(this).hasClass("ui-state-disabled")?("string"==typeof s?o[s]:s).apply(o,arguments):void 0}"string"!=typeof s&&(a.guid=s.guid=s.guid||a.guid||e.guid++);var l=i.match(/^([\w:-]*)\s*(.*)$/),c=l[1]+o.eventNamespace,u=l[2];u?n.delegate(u,c,a):r.bind(c,a)})},_off:function(e,t){t=(t||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,e.unbind(t).undelegate(t)},_delay:function(e,t){var r=this;return setTimeout(function(){return("string"==typeof e?r[e]:e).apply(r,arguments)},t||0)},_hoverable:function(t){this.hoverable=this.hoverable.add(t),this._on(t,{mouseenter:function(t){e(t.currentTarget).addClass("ui-state-hover")},mouseleave:function(t){e(t.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(t){this.focusable=this.focusable.add(t),this._on(t,{focusin:function(t){e(t.currentTarget).addClass("ui-state-focus")},focusout:function(t){e(t.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(t,r,i){var n,o,s=this.options[t];if(i=i||{},(r=e.Event(r)).type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),r.target=this.element[0],o=r.originalEvent)for(n in o)n in r||(r[n]=o[n]);return this.element.trigger(r,i),!(e.isFunction(s)&&!1===s.apply(this.element[0],[r].concat(i))||r.isDefaultPrevented())}},e.each({show:"fadeIn",hide:"fadeOut"},function(t,r){e.Widget.prototype["_"+t]=function(i,n,o){"string"==typeof n&&(n={effect:n});var s,a=n?!0===n||"number"==typeof n?r:n.effect||r:t;"number"==typeof(n=n||{})&&(n={duration:n}),s=!e.isEmptyObject(n),n.complete=o,n.delay&&i.delay(n.delay),s&&e.effects&&e.effects.effect[a]?i[t](n):a!==t&&i[a]?i[a](n.duration,n.easing,o):i.queue(function(r){e(this)[t](),o&&o.call(i[0]),r()})}}),e.widget;var o=!1;e(document).mouseup(function(){o=!1}),e.widget("ui.mouse",{version:"1.11.1",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var t=this;this.element.bind("mousedown."+this.widgetName,function(e){return t._mouseDown(e)}).bind("click."+this.widgetName,function(r){return!0===e.data(r.target,t.widgetName+".preventClickEvent")?(e.removeData(r.target,t.widgetName+".preventClickEvent"),r.stopImmediatePropagation(),!1):void 0}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&this.document.unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(t){if(!o){this._mouseStarted&&this._mouseUp(t),this._mouseDownEvent=t;var r=this,i=1===t.which,n=!("string"!=typeof this.options.cancel||!t.target.nodeName)&&e(t.target).closest(this.options.cancel).length;return!(i&&!n&&this._mouseCapture(t))||(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){r.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=!1!==this._mouseStart(t),!this._mouseStarted)?(t.preventDefault(),!0):(!0===e.data(t.target,this.widgetName+".preventClickEvent")&&e.removeData(t.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(e){return r._mouseMove(e)},this._mouseUpDelegate=function(e){return r._mouseUp(e)},this.document.bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),t.preventDefault(),o=!0,!0))}},_mouseMove:function(t){return e.ui.ie&&(!document.documentMode||9>document.documentMode)&&!t.button?this._mouseUp(t):t.which?this._mouseStarted?(this._mouseDrag(t),t.preventDefault()):(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=!1!==this._mouseStart(this._mouseDownEvent,t),this._mouseStarted?this._mouseDrag(t):this._mouseUp(t)),!this._mouseStarted):this._mouseUp(t)},_mouseUp:function(t){return this.document.unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,t.target===this._mouseDownEvent.target&&e.data(t.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(t)),o=!1,!1},_mouseDistanceMet:function(e){return Math.max(Math.abs(this._mouseDownEvent.pageX-e.pageX),Math.abs(this._mouseDownEvent.pageY-e.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}}),e.widget("ui.draggable",e.ui.mouse,{version:"1.11.1",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){"original"!==this.options.helper||/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative"),this.options.addClasses&&this.element.addClass("ui-draggable"),this.options.disabled&&this.element.addClass("ui-draggable-disabled"),this._setHandleClassName(),this._mouseInit()},_setOption:function(e,t){this._super(e,t),"handle"===e&&(this._removeHandleClassName(),this._setHandleClassName())},_destroy:function(){return(this.helper||this.element).is(".ui-draggable-dragging")?void(this.destroyOnClear=!0):(this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._removeHandleClassName(),void this._mouseDestroy())},_mouseCapture:function(t){var r=this.document[0],i=this.options;try{r.activeElement&&"body"!==r.activeElement.nodeName.toLowerCase()&&e(r.activeElement).blur()}catch(e){}return!(this.helper||i.disabled||e(t.target).closest(".ui-resizable-handle").length>0)&&(this.handle=this._getHandle(t),!!this.handle&&(e(!0===i.iframeFix?"iframe":i.iframeFix).each(function(){e("<div class='ui-draggable-iframeFix' style='background: #fff;'></div>").css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1e3}).css(e(this).offset()).appendTo("body")}),!0))},_mouseStart:function(t){var r=this.options;return this.helper=this._createHelper(t),this.helper.addClass("ui-draggable-dragging"),this._cacheHelperProportions(),e.ui.ddmanager&&(e.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(!0),this.offsetParent=this.helper.offsetParent(),this.offsetParentCssPosition=this.offsetParent.css("position"),this.offset=this.positionAbs=this.element.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},this.offset.scroll=!1,e.extend(this.offset,{click:{left:t.pageX-this.offset.left,top:t.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.originalPosition=this.position=this._generatePosition(t,!1),this.originalPageX=t.pageX,this.originalPageY=t.pageY,r.cursorAt&&this._adjustOffsetFromHelper(r.cursorAt),this._setContainment(),!1===this._trigger("start",t)?(this._clear(),!1):(this._cacheHelperProportions(),e.ui.ddmanager&&!r.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this._mouseDrag(t,!0),e.ui.ddmanager&&e.ui.ddmanager.dragStart(this,t),!0)},_mouseDrag:function(t,r){if("fixed"===this.offsetParentCssPosition&&(this.offset.parent=this._getParentOffset()),this.position=this._generatePosition(t,!0),this.positionAbs=this._convertPositionTo("absolute"),!r){var i=this._uiHash();if(!1===this._trigger("drag",t,i))return this._mouseUp({}),!1;this.position=i.position}return this.helper[0].style.left=this.position.left+"px",this.helper[0].style.top=this.position.top+"px",e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),!1},_mouseStop:function(t){var r=this,i=!1;return e.ui.ddmanager&&!this.options.dropBehaviour&&(i=e.ui.ddmanager.drop(this,t)),this.dropped&&(i=this.dropped,this.dropped=!1),"invalid"===this.options.revert&&!i||"valid"===this.options.revert&&i||!0===this.options.revert||e.isFunction(this.options.revert)&&this.options.revert.call(this.element,i)?e(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){!1!==r._trigger("stop",t)&&r._clear()}):!1!==this._trigger("stop",t)&&this._clear(),!1},_mouseUp:function(t){return e("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)}),e.ui.ddmanager&&e.ui.ddmanager.dragStop(this,t),this.element.focus(),e.ui.mouse.prototype._mouseUp.call(this,t)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(t){return!this.options.handle||!!e(t.target).closest(this.element.find(this.options.handle)).length},_setHandleClassName:function(){this.handleElement=this.options.handle?this.element.find(this.options.handle):this.element,this.handleElement.addClass("ui-draggable-handle")},_removeHandleClassName:function(){this.handleElement.removeClass("ui-draggable-handle")},_createHelper:function(t){var r=this.options,i=e.isFunction(r.helper)?e(r.helper.apply(this.element[0],[t])):"clone"===r.helper?this.element.clone().removeAttr("id"):this.element;return i.parents("body").length||i.appendTo("parent"===r.appendTo?this.element[0].parentNode:r.appendTo),i[0]===this.element[0]||/(fixed|absolute)/.test(i.css("position"))||i.css("position","absolute"),i},_adjustOffsetFromHelper:function(t){"string"==typeof t&&(t=t.split(" ")),e.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_isRootNode:function(e){return/(html|body)/i.test(e.tagName)||e===this.document[0]},_getParentOffset:function(){var t=this.offsetParent.offset(),r=this.document[0];return"absolute"===this.cssPosition&&this.scrollParent[0]!==r&&e.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop()),this._isRootNode(this.offsetParent[0])&&(t={top:0,left:0}),{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"!==this.cssPosition)return{top:0,left:0};var e=this.element.position(),t=this._isRootNode(this.scrollParent[0]);return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+(t?0:this.scrollParent.scrollTop()),left:e.left-(parseInt(this.helper.css("left"),10)||0)+(t?0:this.scrollParent.scrollLeft())}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t,r,i,n=this.options,o=this.document[0];return this.relativeContainer=null,n.containment?"window"===n.containment?void(this.containment=[e(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,e(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,e(window).scrollLeft()+e(window).width()-this.helperProportions.width-this.margins.left,e(window).scrollTop()+(e(window).height()||o.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]):"document"===n.containment?void(this.containment=[0,0,e(o).width()-this.helperProportions.width-this.margins.left,(e(o).height()||o.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]):n.containment.constructor===Array?void(this.containment=n.containment):("parent"===n.containment&&(n.containment=this.helper[0].parentNode),void((i=(r=e(n.containment))[0])&&(t="hidden"!==r.css("overflow"),this.containment=[(parseInt(r.css("borderLeftWidth"),10)||0)+(parseInt(r.css("paddingLeft"),10)||0),(parseInt(r.css("borderTopWidth"),10)||0)+(parseInt(r.css("paddingTop"),10)||0),(t?Math.max(i.scrollWidth,i.offsetWidth):i.offsetWidth)-(parseInt(r.css("borderRightWidth"),10)||0)-(parseInt(r.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(t?Math.max(i.scrollHeight,i.offsetHeight):i.offsetHeight)-(parseInt(r.css("borderBottomWidth"),10)||0)-(parseInt(r.css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relativeContainer=r))):void(this.containment=null)},_convertPositionTo:function(e,t){t||(t=this.position);var r="absolute"===e?1:-1,i=this._isRootNode(this.scrollParent[0]);return{top:t.top+this.offset.relative.top*r+this.offset.parent.top*r-("fixed"===this.cssPosition?-this.offset.scroll.top:i?0:this.offset.scroll.top)*r,left:t.left+this.offset.relative.left*r+this.offset.parent.left*r-("fixed"===this.cssPosition?-this.offset.scroll.left:i?0:this.offset.scroll.left)*r}},_generatePosition:function(e,t){var r,i,n,o,s=this.options,a=this._isRootNode(this.scrollParent[0]),l=e.pageX,c=e.pageY;return a&&this.offset.scroll||(this.offset.scroll={top:this.scrollParent.scrollTop(),left:this.scrollParent.scrollLeft()}),t&&(this.containment&&(this.relativeContainer?(i=this.relativeContainer.offset(),r=[this.containment[0]+i.left,this.containment[1]+i.top,this.containment[2]+i.left,this.containment[3]+i.top]):r=this.containment,e.pageX-this.offset.click.left<r[0]&&(l=r[0]+this.offset.click.left),e.pageY-this.offset.click.top<r[1]&&(c=r[1]+this.offset.click.top),e.pageX-this.offset.click.left>r[2]&&(l=r[2]+this.offset.click.left),e.pageY-this.offset.click.top>r[3]&&(c=r[3]+this.offset.click.top)),s.grid&&(n=s.grid[1]?this.originalPageY+Math.round((c-this.originalPageY)/s.grid[1])*s.grid[1]:this.originalPageY,c=r?n-this.offset.click.top>=r[1]||n-this.offset.click.top>r[3]?n:n-this.offset.click.top>=r[1]?n-s.grid[1]:n+s.grid[1]:n,o=s.grid[0]?this.originalPageX+Math.round((l-this.originalPageX)/s.grid[0])*s.grid[0]:this.originalPageX,l=r?o-this.offset.click.left>=r[0]||o-this.offset.click.left>r[2]?o:o-this.offset.click.left>=r[0]?o-s.grid[0]:o+s.grid[0]:o),"y"===s.axis&&(l=this.originalPageX),"x"===s.axis&&(c=this.originalPageY)),{top:c-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.offset.scroll.top:a?0:this.offset.scroll.top),left:l-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.offset.scroll.left:a?0:this.offset.scroll.left)}},_clear:function(){this.helper.removeClass("ui-draggable-dragging"),this.helper[0]===this.element[0]||this.cancelHelperRemoval||this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1,this.destroyOnClear&&this.destroy()},_trigger:function(t,r,i){return i=i||this._uiHash(),e.ui.plugin.call(this,t,[r,i,this],!0),"drag"===t&&(this.positionAbs=this._convertPositionTo("absolute")),e.Widget.prototype._trigger.call(this,t,r,i)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),e.ui.plugin.add("draggable","connectToSortable",{start:function(t,r,i){var n=i.options,o=e.extend({},r,{item:i.element});i.sortables=[],e(n.connectToSortable).each(function(){var r=e(this).sortable("instance");r&&!r.options.disabled&&(i.sortables.push({instance:r,shouldRevert:r.options.revert}),r.refreshPositions(),r._trigger("activate",t,o))})},stop:function(t,r,i){var n=e.extend({},r,{item:i.element});e.each(i.sortables,function(){this.instance.isOver?(this.instance.isOver=0,i.cancelHelperRemoval=!0,this.instance.cancelHelperRemoval=!1,this.shouldRevert&&(this.instance.options.revert=this.shouldRevert),this.instance._mouseStop(t),this.instance.options.helper=this.instance.options._helper,"original"===i.options.helper&&this.instance.currentItem.css({top:"auto",left:"auto"})):(this.instance.cancelHelperRemoval=!1,this.instance._trigger("deactivate",t,n))})},drag:function(t,r,i){var n=this;e.each(i.sortables,function(){var o=!1,s=this;this.instance.positionAbs=i.positionAbs,this.instance.helperProportions=i.helperProportions,this.instance.offset.click=i.offset.click,this.instance._intersectsWith(this.instance.containerCache)&&(o=!0,e.each(i.sortables,function(){return this.instance.positionAbs=i.positionAbs,this.instance.helperProportions=i.helperProportions,this.instance.offset.click=i.offset.click,this!==s&&this.instance._intersectsWith(this.instance.containerCache)&&e.contains(s.instance.element[0],this.instance.element[0])&&(o=!1),o})),o?(this.instance.isOver||(this.instance.isOver=1,this.instance.currentItem=e(n).clone().removeAttr("id").appendTo(this.instance.element).data("ui-sortable-item",!0),this.instance.options._helper=this.instance.options.helper,this.instance.options.helper=function(){return r.helper[0]},t.target=this.instance.currentItem[0],this.instance._mouseCapture(t,!0),this.instance._mouseStart(t,!0,!0),this.instance.offset.click.top=i.offset.click.top,this.instance.offset.click.left=i.offset.click.left,this.instance.offset.parent.left-=i.offset.parent.left-this.instance.offset.parent.left,this.instance.offset.parent.top-=i.offset.parent.top-this.instance.offset.parent.top,i._trigger("toSortable",t),i.dropped=this.instance.element,i.currentItem=i.element,this.instance.fromOutside=i),this.instance.currentItem&&this.instance._mouseDrag(t)):this.instance.isOver&&(this.instance.isOver=0,this.instance.cancelHelperRemoval=!0,this.instance.options.revert=!1,this.instance._trigger("out",t,this.instance._uiHash(this.instance)),this.instance._mouseStop(t,!0),this.instance.options.helper=this.instance.options._helper,this.instance.currentItem.remove(),this.instance.placeholder&&this.instance.placeholder.remove(),i._trigger("fromSortable",t),i.dropped=!1)})}}),e.ui.plugin.add("draggable","cursor",{start:function(t,r,i){var n=e("body"),o=i.options;n.css("cursor")&&(o._cursor=n.css("cursor")),n.css("cursor",o.cursor)},stop:function(t,r,i){var n=i.options;n._cursor&&e("body").css("cursor",n._cursor)}}),e.ui.plugin.add("draggable","opacity",{start:function(t,r,i){var n=e(r.helper),o=i.options;n.css("opacity")&&(o._opacity=n.css("opacity")),n.css("opacity",o.opacity)},stop:function(t,r,i){var n=i.options;n._opacity&&e(r.helper).css("opacity",n._opacity)}}),e.ui.plugin.add("draggable","scroll",{start:function(e,t,r){r.scrollParentNotHidden||(r.scrollParentNotHidden=r.helper.scrollParent(!1)),r.scrollParentNotHidden[0]!==r.document[0]&&"HTML"!==r.scrollParentNotHidden[0].tagName&&(r.overflowOffset=r.scrollParentNotHidden.offset())},drag:function(t,r,i){var n=i.options,o=!1,s=i.scrollParentNotHidden[0],a=i.document[0];s!==a&&"HTML"!==s.tagName?(n.axis&&"x"===n.axis||(i.overflowOffset.top+s.offsetHeight-t.pageY<n.scrollSensitivity?s.scrollTop=o=s.scrollTop+n.scrollSpeed:t.pageY-i.overflowOffset.top<n.scrollSensitivity&&(s.scrollTop=o=s.scrollTop-n.scrollSpeed)),n.axis&&"y"===n.axis||(i.overflowOffset.left+s.offsetWidth-t.pageX<n.scrollSensitivity?s.scrollLeft=o=s.scrollLeft+n.scrollSpeed:t.pageX-i.overflowOffset.left<n.scrollSensitivity&&(s.scrollLeft=o=s.scrollLeft-n.scrollSpeed))):(n.axis&&"x"===n.axis||(t.pageY-e(a).scrollTop()<n.scrollSensitivity?o=e(a).scrollTop(e(a).scrollTop()-n.scrollSpeed):e(window).height()-(t.pageY-e(a).scrollTop())<n.scrollSensitivity&&(o=e(a).scrollTop(e(a).scrollTop()+n.scrollSpeed))),n.axis&&"y"===n.axis||(t.pageX-e(a).scrollLeft()<n.scrollSensitivity?o=e(a).scrollLeft(e(a).scrollLeft()-n.scrollSpeed):e(window).width()-(t.pageX-e(a).scrollLeft())<n.scrollSensitivity&&(o=e(a).scrollLeft(e(a).scrollLeft()+n.scrollSpeed)))),!1!==o&&e.ui.ddmanager&&!n.dropBehaviour&&e.ui.ddmanager.prepareOffsets(i,t)}}),e.ui.plugin.add("draggable","snap",{start:function(t,r,i){var n=i.options;i.snapElements=[],e(n.snap.constructor!==String?n.snap.items||":data(ui-draggable)":n.snap).each(function(){var t=e(this),r=t.offset();this!==i.element[0]&&i.snapElements.push({item:this,width:t.outerWidth(),height:t.outerHeight(),top:r.top,left:r.left})})},drag:function(t,r,i){var n,o,s,a,l,c,u,p,h,d,f=i.options,g=f.snapTolerance,m=r.offset.left,v=m+i.helperProportions.width,b=r.offset.top,y=b+i.helperProportions.height;for(h=i.snapElements.length-1;h>=0;h--)c=(l=i.snapElements[h].left)+i.snapElements[h].width,p=(u=i.snapElements[h].top)+i.snapElements[h].height,l-g>v||m>c+g||u-g>y||b>p+g||!e.contains(i.snapElements[h].item.ownerDocument,i.snapElements[h].item)?(i.snapElements[h].snapping&&i.options.snap.release&&i.options.snap.release.call(i.element,t,e.extend(i._uiHash(),{snapItem:i.snapElements[h].item})),i.snapElements[h].snapping=!1):("inner"!==f.snapMode&&(n=g>=Math.abs(u-y),o=g>=Math.abs(p-b),s=g>=Math.abs(l-v),a=g>=Math.abs(c-m),n&&(r.position.top=i._convertPositionTo("relative",{top:u-i.helperProportions.height,left:0}).top-i.margins.top),o&&(r.position.top=i._convertPositionTo("relative",{top:p,left:0}).top-i.margins.top),s&&(r.position.left=i._convertPositionTo("relative",{top:0,left:l-i.helperProportions.width}).left-i.margins.left),a&&(r.position.left=i._convertPositionTo("relative",{top:0,left:c}).left-i.margins.left)),d=n||o||s||a,"outer"!==f.snapMode&&(n=g>=Math.abs(u-b),o=g>=Math.abs(p-y),s=g>=Math.abs(l-m),a=g>=Math.abs(c-v),n&&(r.position.top=i._convertPositionTo("relative",{top:u,left:0}).top-i.margins.top),o&&(r.position.top=i._convertPositionTo("relative",{top:p-i.helperProportions.height,left:0}).top-i.margins.top),s&&(r.position.left=i._convertPositionTo("relative",{top:0,left:l}).left-i.margins.left),a&&(r.position.left=i._convertPositionTo("relative",{top:0,left:c-i.helperProportions.width}).left-i.margins.left)),!i.snapElements[h].snapping&&(n||o||s||a||d)&&i.options.snap.snap&&i.options.snap.snap.call(i.element,t,e.extend(i._uiHash(),{snapItem:i.snapElements[h].item})),i.snapElements[h].snapping=n||o||s||a||d)}}),e.ui.plugin.add("draggable","stack",{start:function(t,r,i){var n,o=i.options,s=e.makeArray(e(o.stack)).sort(function(t,r){return(parseInt(e(t).css("zIndex"),10)||0)-(parseInt(e(r).css("zIndex"),10)||0)});s.length&&(n=parseInt(e(s[0]).css("zIndex"),10)||0,e(s).each(function(t){e(this).css("zIndex",n+t)}),this.css("zIndex",n+s.length))}}),e.ui.plugin.add("draggable","zIndex",{start:function(t,r,i){var n=e(r.helper),o=i.options;n.css("zIndex")&&(o._zIndex=n.css("zIndex")),n.css("zIndex",o.zIndex)},stop:function(t,r,i){var n=i.options;n._zIndex&&e(r.helper).css("zIndex",n._zIndex)}}),e.ui.draggable,e.widget("ui.sortable",e.ui.mouse,{version:"1.11.1",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3,activate:null,beforeStop:null,change:null,deactivate:null,out:null,over:null,receive:null,remove:null,sort:null,start:null,stop:null,update:null},_isOverAxis:function(e,t,r){return e>=t&&t+r>e},_isFloating:function(e){return/left|right/.test(e.css("float"))||/inline|table-cell/.test(e.css("display"))},_create:function(){var e=this.options;this.containerCache={},this.element.addClass("ui-sortable"),this.refresh(),this.floating=!!this.items.length&&("x"===e.axis||this._isFloating(this.items[0].item)),this.offset=this.element.offset(),this._mouseInit(),this._setHandleClassName(),this.ready=!0},_setOption:function(e,t){this._super(e,t),"handle"===e&&this._setHandleClassName()},_setHandleClassName:function(){this.element.find(".ui-sortable-handle").removeClass("ui-sortable-handle"),e.each(this.items,function(){(this.instance.options.handle?this.item.find(this.instance.options.handle):this.item).addClass("ui-sortable-handle")})},_destroy:function(){this.element.removeClass("ui-sortable ui-sortable-disabled").find(".ui-sortable-handle").removeClass("ui-sortable-handle"),this._mouseDestroy();for(var e=this.items.length-1;e>=0;e--)this.items[e].item.removeData(this.widgetName+"-item");return this},_mouseCapture:function(t,r){var i=null,n=!1,o=this;return!this.reverting&&(!this.options.disabled&&"static"!==this.options.type&&(this._refreshItems(t),e(t.target).parents().each(function(){return e.data(this,o.widgetName+"-item")===o?(i=e(this),!1):void 0}),e.data(t.target,o.widgetName+"-item")===o&&(i=e(t.target)),!!i&&(!(this.options.handle&&!r&&(e(this.options.handle,i).find("*").addBack().each(function(){this===t.target&&(n=!0)}),!n))&&(this.currentItem=i,this._removeCurrentsFromItems(),!0))))},_mouseStart:function(t,r,i){var n,o,s=this.options;if(this.currentContainer=this,this.refreshPositions(),this.helper=this._createHelper(t),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},e.extend(this.offset,{click:{left:t.pageX-this.offset.left,top:t.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),this.originalPosition=this._generatePosition(t),this.originalPageX=t.pageX,this.originalPageY=t.pageY,s.cursorAt&&this._adjustOffsetFromHelper(s.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!==this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),s.containment&&this._setContainment(),s.cursor&&"auto"!==s.cursor&&(o=this.document.find("body"),this.storedCursor=o.css("cursor"),o.css("cursor",s.cursor),this.storedStylesheet=e("<style>*{ cursor: "+s.cursor+" !important; }</style>").appendTo(o)),s.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",s.opacity)),s.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",s.zIndex)),this.scrollParent[0]!==document&&"HTML"!==this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",t,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions(),!i)for(n=this.containers.length-1;n>=0;n--)this.containers[n]._trigger("activate",t,this._uiHash(this));return e.ui.ddmanager&&(e.ui.ddmanager.current=this),e.ui.ddmanager&&!s.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this.dragging=!0,this.helper.addClass("ui-sortable-helper"),this._mouseDrag(t),!0},_mouseDrag:function(t){var r,i,n,o,s=this.options,a=!1;for(this.position=this._generatePosition(t),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs),this.options.scroll&&(this.scrollParent[0]!==document&&"HTML"!==this.scrollParent[0].tagName?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-t.pageY<s.scrollSensitivity?this.scrollParent[0].scrollTop=a=this.scrollParent[0].scrollTop+s.scrollSpeed:t.pageY-this.overflowOffset.top<s.scrollSensitivity&&(this.scrollParent[0].scrollTop=a=this.scrollParent[0].scrollTop-s.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-t.pageX<s.scrollSensitivity?this.scrollParent[0].scrollLeft=a=this.scrollParent[0].scrollLeft+s.scrollSpeed:t.pageX-this.overflowOffset.left<s.scrollSensitivity&&(this.scrollParent[0].scrollLeft=a=this.scrollParent[0].scrollLeft-s.scrollSpeed)):(t.pageY-e(document).scrollTop()<s.scrollSensitivity?a=e(document).scrollTop(e(document).scrollTop()-s.scrollSpeed):e(window).height()-(t.pageY-e(document).scrollTop())<s.scrollSensitivity&&(a=e(document).scrollTop(e(document).scrollTop()+s.scrollSpeed)),t.pageX-e(document).scrollLeft()<s.scrollSensitivity?a=e(document).scrollLeft(e(document).scrollLeft()-s.scrollSpeed):e(window).width()-(t.pageX-e(document).scrollLeft())<s.scrollSensitivity&&(a=e(document).scrollLeft(e(document).scrollLeft()+s.scrollSpeed))),!1!==a&&e.ui.ddmanager&&!s.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t)),this.positionAbs=this._convertPositionTo("absolute"),this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),r=this.items.length-1;r>=0;r--)if(n=(i=this.items[r]).item[0],(o=this._intersectsWithPointer(i))&&i.instance===this.currentContainer&&n!==this.currentItem[0]&&this.placeholder[1===o?"next":"prev"]()[0]!==n&&!e.contains(this.placeholder[0],n)&&("semi-dynamic"!==this.options.type||!e.contains(this.element[0],n))){if(this.direction=1===o?"down":"up","pointer"!==this.options.tolerance&&!this._intersectsWithSides(i))break;this._rearrange(t,i),this._trigger("change",t,this._uiHash());break}return this._contactContainers(t),e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),this._trigger("sort",t,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(t,r){if(t){if(e.ui.ddmanager&&!this.options.dropBehaviour&&e.ui.ddmanager.drop(this,t),this.options.revert){var i=this,n=this.placeholder.offset(),o=this.options.axis,s={};o&&"x"!==o||(s.left=n.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]===document.body?0:this.offsetParent[0].scrollLeft)),o&&"y"!==o||(s.top=n.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]===document.body?0:this.offsetParent[0].scrollTop)),this.reverting=!0,e(this.helper).animate(s,parseInt(this.options.revert,10)||500,function(){i._clear(t)})}else this._clear(t,r);return!1}},cancel:function(){if(this.dragging){this._mouseUp({target:null}),"original"===this.options.helper?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show();for(var t=this.containers.length-1;t>=0;t--)this.containers[t]._trigger("deactivate",null,this._uiHash(this)),this.containers[t].containerCache.over&&(this.containers[t]._trigger("out",null,this._uiHash(this)),this.containers[t].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),"original"!==this.options.helper&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),e.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?e(this.domPosition.prev).after(this.currentItem):e(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(t){var r=this._getItemsAsjQuery(t&&t.connected),i=[];return t=t||{},e(r).each(function(){var r=(e(t.item||this).attr(t.attribute||"id")||"").match(t.expression||/(.+)[\-=_](.+)/);r&&i.push((t.key||r[1]+"[]")+"="+(t.key&&t.expression?r[1]:r[2]))}),!i.length&&t.key&&i.push(t.key+"="),i.join("&")},toArray:function(t){var r=this._getItemsAsjQuery(t&&t.connected),i=[];return t=t||{},r.each(function(){i.push(e(t.item||this).attr(t.attribute||"id")||"")}),i},_intersectsWith:function(e){var t=this.positionAbs.left,r=t+this.helperProportions.width,i=this.positionAbs.top,n=i+this.helperProportions.height,o=e.left,s=o+e.width,a=e.top,l=a+e.height,c=this.offset.click.top,u=this.offset.click.left,p="x"===this.options.axis||i+c>a&&l>i+c,h="y"===this.options.axis||t+u>o&&s>t+u,d=p&&h;return"pointer"===this.options.tolerance||this.options.forcePointerForContainers||"pointer"!==this.options.tolerance&&this.helperProportions[this.floating?"width":"height"]>e[this.floating?"width":"height"]?d:t+this.helperProportions.width/2>o&&s>r-this.helperProportions.width/2&&i+this.helperProportions.height/2>a&&l>n-this.helperProportions.height/2},_intersectsWithPointer:function(e){var t="x"===this.options.axis||this._isOverAxis(this.positionAbs.top+this.offset.click.top,e.top,e.height),r="y"===this.options.axis||this._isOverAxis(this.positionAbs.left+this.offset.click.left,e.left,e.width),i=t&&r,n=this._getDragVerticalDirection(),o=this._getDragHorizontalDirection();return!!i&&(this.floating?o&&"right"===o||"down"===n?2:1:n&&("down"===n?2:1))},_intersectsWithSides:function(e){var t=this._isOverAxis(this.positionAbs.top+this.offset.click.top,e.top+e.height/2,e.height),r=this._isOverAxis(this.positionAbs.left+this.offset.click.left,e.left+e.width/2,e.width),i=this._getDragVerticalDirection(),n=this._getDragHorizontalDirection();return this.floating&&n?"right"===n&&r||"left"===n&&!r:i&&("down"===i&&t||"up"===i&&!t)},_getDragVerticalDirection:function(){var e=this.positionAbs.top-this.lastPositionAbs.top;return 0!==e&&(e>0?"down":"up")},_getDragHorizontalDirection:function(){var e=this.positionAbs.left-this.lastPositionAbs.left;return 0!==e&&(e>0?"right":"left")},refresh:function(e){return this._refreshItems(e),this._setHandleClassName(),this.refreshPositions(),this},_connectWith:function(){var e=this.options;return e.connectWith.constructor===String?[e.connectWith]:e.connectWith},_getItemsAsjQuery:function(t){function r(){a.push(this)}var i,n,o,s,a=[],l=[],c=this._connectWith();if(c&&t)for(i=c.length-1;i>=0;i--)for(n=(o=e(c[i])).length-1;n>=0;n--)(s=e.data(o[n],this.widgetFullName))&&s!==this&&!s.options.disabled&&l.push([e.isFunction(s.options.items)?s.options.items.call(s.element):e(s.options.items,s.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),s]);for(l.push([e.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):e(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]),i=l.length-1;i>=0;i--)l[i][0].each(r);return e(a)},_removeCurrentsFromItems:function(){var t=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=e.grep(this.items,function(e){for(var r=0;t.length>r;r++)if(t[r]===e.item[0])return!1;return!0})},_refreshItems:function(t){this.items=[],this.containers=[this];var r,i,n,o,s,a,l,c,u=this.items,p=[[e.isFunction(this.options.items)?this.options.items.call(this.element[0],t,{item:this.currentItem}):e(this.options.items,this.element),this]],h=this._connectWith();if(h&&this.ready)for(r=h.length-1;r>=0;r--)for(i=(n=e(h[r])).length-1;i>=0;i--)(o=e.data(n[i],this.widgetFullName))&&o!==this&&!o.options.disabled&&(p.push([e.isFunction(o.options.items)?o.options.items.call(o.element[0],t,{item:this.currentItem}):e(o.options.items,o.element),o]),this.containers.push(o));for(r=p.length-1;r>=0;r--)for(s=p[r][1],i=0,c=(a=p[r][0]).length;c>i;i++)(l=e(a[i])).data(this.widgetName+"-item",s),u.push({item:l,instance:s,width:0,height:0,left:0,top:0})},refreshPositions:function(t){var r,i,n,o;for(this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset()),r=this.items.length-1;r>=0;r--)(i=this.items[r]).instance!==this.currentContainer&&this.currentContainer&&i.item[0]!==this.currentItem[0]||(n=this.options.toleranceElement?e(this.options.toleranceElement,i.item):i.item,t||(i.width=n.outerWidth(),i.height=n.outerHeight()),o=n.offset(),i.left=o.left,i.top=o.top);if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(r=this.containers.length-1;r>=0;r--)o=this.containers[r].element.offset(),this.containers[r].containerCache.left=o.left,this.containers[r].containerCache.top=o.top,this.containers[r].containerCache.width=this.containers[r].element.outerWidth(),this.containers[r].containerCache.height=this.containers[r].element.outerHeight();return this},_createPlaceholder:function(t){var r,i=(t=t||this).options;i.placeholder&&i.placeholder.constructor!==String||(r=i.placeholder,i.placeholder={element:function(){var i=t.currentItem[0].nodeName.toLowerCase(),n=e("<"+i+">",t.document[0]).addClass(r||t.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper");return"tr"===i?t.currentItem.children().each(function(){e("<td>&#160;</td>",t.document[0]).attr("colspan",e(this).attr("colspan")||1).appendTo(n)}):"img"===i&&n.attr("src",t.currentItem.attr("src")),r||n.css("visibility","hidden"),n},update:function(e,n){(!r||i.forcePlaceholderSize)&&(n.height()||n.height(t.currentItem.innerHeight()-parseInt(t.currentItem.css("paddingTop")||0,10)-parseInt(t.currentItem.css("paddingBottom")||0,10)),n.width()||n.width(t.currentItem.innerWidth()-parseInt(t.currentItem.css("paddingLeft")||0,10)-parseInt(t.currentItem.css("paddingRight")||0,10)))}}),t.placeholder=e(i.placeholder.element.call(t.element,t.currentItem)),t.currentItem.after(t.placeholder),i.placeholder.update(t,t.placeholder)},_contactContainers:function(t){var r,i,n,o,s,a,l,c,u,p,h=null,d=null;for(r=this.containers.length-1;r>=0;r--)if(!e.contains(this.currentItem[0],this.containers[r].element[0]))if(this._intersectsWith(this.containers[r].containerCache)){if(h&&e.contains(this.containers[r].element[0],h.element[0]))continue;h=this.containers[r],d=r}else this.containers[r].containerCache.over&&(this.containers[r]._trigger("out",t,this._uiHash(this)),this.containers[r].containerCache.over=0);if(h)if(1===this.containers.length)this.containers[d].containerCache.over||(this.containers[d]._trigger("over",t,this._uiHash(this)),this.containers[d].containerCache.over=1);else{for(n=1e4,o=null,s=(u=h.floating||this._isFloating(this.currentItem))?"left":"top",a=u?"width":"height",p=u?"clientX":"clientY",i=this.items.length-1;i>=0;i--)e.contains(this.containers[d].element[0],this.items[i].item[0])&&this.items[i].item[0]!==this.currentItem[0]&&(l=this.items[i].item.offset()[s],c=!1,t[p]-l>this.items[i][a]/2&&(c=!0),n>Math.abs(t[p]-l)&&(n=Math.abs(t[p]-l),o=this.items[i],this.direction=c?"up":"down"));if(!o&&!this.options.dropOnEmpty)return;if(this.currentContainer===this.containers[d])return;o?this._rearrange(t,o,null,!0):this._rearrange(t,null,this.containers[d].element,!0),this._trigger("change",t,this._uiHash()),this.containers[d]._trigger("change",t,this._uiHash(this)),this.currentContainer=this.containers[d],this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[d]._trigger("over",t,this._uiHash(this)),this.containers[d].containerCache.over=1}},_createHelper:function(t){var r=this.options,i=e.isFunction(r.helper)?e(r.helper.apply(this.element[0],[t,this.currentItem])):"clone"===r.helper?this.currentItem.clone():this.currentItem;return i.parents("body").length||e("parent"!==r.appendTo?r.appendTo:this.currentItem[0].parentNode)[0].appendChild(i[0]),i[0]===this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),(!i[0].style.width||r.forceHelperSize)&&i.width(this.currentItem.width()),(!i[0].style.height||r.forceHelperSize)&&i.height(this.currentItem.height()),i},_adjustOffsetFromHelper:function(t){"string"==typeof t&&(t=t.split(" ")),e.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var t=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===document.body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&e.ui.ie)&&(t={top:0,left:0}),{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var e=this.currentItem.position();return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:e.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t,r,i,n=this.options;"parent"===n.containment&&(n.containment=this.helper[0].parentNode),("document"===n.containment||"window"===n.containment)&&(this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,e("document"===n.containment?document:window).width()-this.helperProportions.width-this.margins.left,(e("document"===n.containment?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),/^(document|window|parent)$/.test(n.containment)||(t=e(n.containment)[0],r=e(n.containment).offset(),i="hidden"!==e(t).css("overflow"),this.containment=[r.left+(parseInt(e(t).css("borderLeftWidth"),10)||0)+(parseInt(e(t).css("paddingLeft"),10)||0)-this.margins.left,r.top+(parseInt(e(t).css("borderTopWidth"),10)||0)+(parseInt(e(t).css("paddingTop"),10)||0)-this.margins.top,r.left+(i?Math.max(t.scrollWidth,t.offsetWidth):t.offsetWidth)-(parseInt(e(t).css("borderLeftWidth"),10)||0)-(parseInt(e(t).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,r.top+(i?Math.max(t.scrollHeight,t.offsetHeight):t.offsetHeight)-(parseInt(e(t).css("borderTopWidth"),10)||0)-(parseInt(e(t).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top])},_convertPositionTo:function(t,r){r||(r=this.position);var i="absolute"===t?1:-1,n="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,o=/(html|body)/i.test(n[0].tagName);return{top:r.top+this.offset.relative.top*i+this.offset.parent.top*i-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():o?0:n.scrollTop())*i,left:r.left+this.offset.relative.left*i+this.offset.parent.left*i-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():o?0:n.scrollLeft())*i}},_generatePosition:function(t){var r,i,n=this.options,o=t.pageX,s=t.pageY,a="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,l=/(html|body)/i.test(a[0].tagName);return"relative"!==this.cssPosition||this.scrollParent[0]!==document&&this.scrollParent[0]!==this.offsetParent[0]||(this.offset.relative=this._getRelativeOffset()),this.originalPosition&&(this.containment&&(t.pageX-this.offset.click.left<this.containment[0]&&(o=this.containment[0]+this.offset.click.left),t.pageY-this.offset.click.top<this.containment[1]&&(s=this.containment[1]+this.offset.click.top),t.pageX-this.offset.click.left>this.containment[2]&&(o=this.containment[2]+this.offset.click.left),t.pageY-this.offset.click.top>this.containment[3]&&(s=this.containment[3]+this.offset.click.top)),n.grid&&(r=this.originalPageY+Math.round((s-this.originalPageY)/n.grid[1])*n.grid[1],s=this.containment?r-this.offset.click.top>=this.containment[1]&&r-this.offset.click.top<=this.containment[3]?r:r-this.offset.click.top>=this.containment[1]?r-n.grid[1]:r+n.grid[1]:r,i=this.originalPageX+Math.round((o-this.originalPageX)/n.grid[0])*n.grid[0],o=this.containment?i-this.offset.click.left>=this.containment[0]&&i-this.offset.click.left<=this.containment[2]?i:i-this.offset.click.left>=this.containment[0]?i-n.grid[0]:i+n.grid[0]:i)),{top:s-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():l?0:a.scrollTop()),left:o-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():l?0:a.scrollLeft())}},_rearrange:function(e,t,r,i){r?r[0].appendChild(this.placeholder[0]):t.item[0].parentNode.insertBefore(this.placeholder[0],"down"===this.direction?t.item[0]:t.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var n=this.counter;this._delay(function(){n===this.counter&&this.refreshPositions(!i)})},_clear:function(e,t){function r(e,t,r){return function(i){r._trigger(e,i,t._uiHash(t))}}this.reverting=!1;var i,n=[];if(!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null,this.helper[0]===this.currentItem[0]){for(i in this._storedCSS)("auto"===this._storedCSS[i]||"static"===this._storedCSS[i])&&(this._storedCSS[i]="");this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else this.currentItem.show();for(this.fromOutside&&!t&&n.push(function(e){this._trigger("receive",e,this._uiHash(this.fromOutside))}),!this.fromOutside&&this.domPosition.prev===this.currentItem.prev().not(".ui-sortable-helper")[0]&&this.domPosition.parent===this.currentItem.parent()[0]||t||n.push(function(e){this._trigger("update",e,this._uiHash())}),this!==this.currentContainer&&(t||(n.push(function(e){this._trigger("remove",e,this._uiHash())}),n.push(function(e){return function(t){e._trigger("receive",t,this._uiHash(this))}}.call(this,this.currentContainer)),n.push(function(e){return function(t){e._trigger("update",t,this._uiHash(this))}}.call(this,this.currentContainer)))),i=this.containers.length-1;i>=0;i--)t||n.push(r("deactivate",this,this.containers[i])),this.containers[i].containerCache.over&&(n.push(r("out",this,this.containers[i])),this.containers[i].containerCache.over=0);if(this.storedCursor&&(this.document.find("body").css("cursor",this.storedCursor),this.storedStylesheet.remove()),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex","auto"===this._storedZIndex?"":this._storedZIndex),this.dragging=!1,this.cancelHelperRemoval){if(!t){for(this._trigger("beforeStop",e,this._uiHash()),i=0;n.length>i;i++)n[i].call(this,e);this._trigger("stop",e,this._uiHash())}return this.fromOutside=!1,!1}if(t||this._trigger("beforeStop",e,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.helper[0]!==this.currentItem[0]&&this.helper.remove(),this.helper=null,!t){for(i=0;n.length>i;i++)n[i].call(this,e);this._trigger("stop",e,this._uiHash())}return this.fromOutside=!1,!0},_trigger:function(){!1===e.Widget.prototype._trigger.apply(this,arguments)&&this.cancel()},_uiHash:function(t){var r=t||this;return{helper:r.helper,placeholder:r.placeholder||e([]),position:r.position,originalPosition:r.originalPosition,offset:r.positionAbs,item:r.currentItem,sender:t?t.element:null}}})}),window.RevColor={defaultValue:"#ffffff",isColor:/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i,get:function(e){return e?RevColor.process(e,!0)[0]:"transparent"},parse:function(e,t,r){e=RevColor.process(e,!0);var i=[];return i[0]=t?t+": "+e[0]+";":e[0],r&&(i[1]=e[1]),i},convert:function(e,t){if(!e||"string"!=typeof e)return RevColor.defaultValue;if("transparent"===e)return e;if(-1!==e.search(/\[\{/)||-1!==e.search("gradient"))return RevColor.process(e,!0)[0];if(void 0===t||isNaN(t))return RevColor.process(e,!0)[0];if((t=parseFloat(t))<=1&&(t*=100),0===(t=Math.max(Math.min(parseInt(t,10),100),0)))return"transparent";try{return-1!==e.search("#")||e.length<8?(RevColor.isColor.test(e)||(e=e.replace(/[^A-Za-z0-9#]/g,"")),RevColor.processRgba(RevColor.sanitizeHex(e),t)):(e=RevColor.rgbValues(e,3),RevColor.rgbaString(e[0],e[1],e[2],.01*t))}catch(e){return RevColor.defaultValue}},process:function(e,t){if("string"!=typeof e)return t&&(e=RevColor.sanitizeGradient(e)),[RevColor.processGradient(e),"gradient",e];if("transparent"===e.trim())return["transparent","transparent"];if(-1===e.search(/\[\{/))return-1!==e.search("#")?[RevColor.sanitizeHex(e),"hex"]:-1!==e.search("rgba")?[e.replace(/\s/g,"").replace(/false/g,"1"),"rgba"]:-1!==e.search("rgb")?[e.replace(/\s/g,""),"rgb"]:RevColor.isColor.test(e)?[e,"hex"]:["transparent","transparent",!0];try{return e=JSON.parse(e.replace(/\&/g,'"')),t&&(e=RevColor.sanitizeGradient(e)),[RevColor.processGradient(e),"gradient",e]}catch(e){return console.log("RevColor.process() failed to parse JSON string"),["linear-gradient(0deg, rgba(255, 255, 255, 1) 0%, rgba(0, 0, 0, 1) 100%)","gradient",{type:"linear",angle:"0",colors:[{r:"255",g:"255",b:"255",a:"1",position:"0",align:"bottom"},{r:"0",g:"0",b:"0",a:"1",position:"100",align:"bottom"}]}]}},transparentRgba:function(e,t){if(!t&&"rgba"!==RevColor.process(e)[1])return!1;return"0"===RevColor.rgbValues(e,4)[3]},rgbValues:function(e,t){3===(e=e.substring(e.indexOf("(")+1,e.lastIndexOf(")")).split(",")).length&&4===t&&(e[3]="1");for(var r=0;r<t;r++)e[r]=e[r].trim();return e},rgbaString:function(e,t,r,i){return"rgba("+e+", "+t+", "+r+", "+i+")"},rgbToHex:function(e){var t=RevColor.rgbValues(e,3);return RevColor.getRgbToHex(t[0],t[1],t[2])},rgbaToHex:function(e){var t=RevColor.rgbValues(e,4);return[RevColor.getRgbToHex(t[0],t[1],t[2]),t[3]]},getOpacity:function(e){return parseInt(100*RevColor.rgbValues(e,4)[3],10)+"%"},getRgbToHex:function(e,t,r){return"#"+("0"+parseInt(e).toString(16)).slice(-2)+("0"+parseInt(t).toString(16)).slice(-2)+("0"+parseInt(r).toString(16)).slice(-2)},joinToRgba:function(e){return e=e.split("||"),RevColor.convert(e[0],e[1])},processRgba:function(e,t){e=e.replace("#","");var r=void 0!==t,i=(r?"rgba":"rgb")+"("+parseInt(e.substring(0,2),16)+", "+parseInt(e.substring(2,4),16)+", "+parseInt(e.substring(4,6),16);return i+=r?", "+(.01*parseInt(t,10)).toFixed(2).replace(/\.?0*$/,"")+")":")"},processGradient:function(e){for(var t,r=e.type,i=r+"-gradient(",n="linear"===r?e.angle+"deg, ":"ellipse at center, ",o=e.colors,s=o.length,a="",l=0;l<s;l++)l>0&&(a+=", "),a+="rgba("+(t=o[l]).r+", "+t.g+", "+t.b+", "+t.a+") "+t.position+"%";return i+n+a+")"},sanitizeHex:function(e){if(3===(e=e.replace("#","").trim()).length){var t=e.charAt(0),r=e.charAt(1),i=e.charAt(2);e=t+t+r+r+i+i}return"#"+e},sanitizeGradient:function(e){for(var t,r=e.colors,i=r.length,n=[],o=0;o<i;o++){var s=r[o];delete s.align,t?JSON.stringify(s)!==JSON.stringify(t)&&(n[n.length]=s):n[n.length]=s,t=s}return e.colors=n,e}},function(e){var t,r,i,n,o,s,a,l,c,u,p,h,d,f,g,m,v,b,y,w,k,x,C,L,S,T,N,M,_,P,O,A,I,H,D,W,z,E,R,F,B,j,V,U,G,X,q,K,Y,$,Z,J,Q,ee,te,re,ie,ne,oe,se,ae,le,ce,ue,pe,he,de,fe,ge,me,ve,be,ye,we,ke,xe,Ce,Le,Se,Te,Ne,Me,_e,Pe,Oe={},Ae=265,Ie=20,He=30,De=6,We=5,ze=6,Ee=10,Re=15,Fe=180,Be={axis:"x",containment:"#rev-cpicker-point-wrap"},je={color:"Color",solid_color:"Solid Color",gradient_color:"Gradient Color",currently_editing:"Currently Editing",core_presets:"Core Presets",custom_presets:"Custom Presets",enter_a_name:"Enter a Name",save_a_new_preset:"Save a new Preset",save:"Save",color_hex_value:"Color Hex Value",opacity:"Opacity",clear:"Clear",location:"Location",delete:"Delete",horizontal:"Horizontal",vertical:"Vertical",radial:"Radial",enter_angle:"Enter Angle",reverse_gradient:"Reverse Gradient",delete_confirm:"Remove/Delete this custom preset color?",naming_error:"Please enter a unique name for the new color preset"},Ve=["#FFFFFF","#000000","#FF3A2D","#007AFF","#4CD964","#FFCC00","#C7C7CC","#8E8E93","#FFD3E0","#34AADC","#E0F8D8","#FF9500"],Ue=[{0:"{&type&:&linear&,&angle&:&180&,&colors&:[{&r&:247,&g&:247,&b&:247,&a&:&1&,&position&:0,&align&:&top&},{&r&:247,&g&:247,&b&:247,&a&:&1&,&position&:0,&align&:&bottom&},{&r&:215,&g&:215,&b&:215,&a&:&1&,&position&:100,&align&:&bottom&},{&r&:215,&g&:215,&b&:215,&a&:&1&,&position&:100,&align&:&top&}]}"},{1:"{&type&:&linear&,&angle&:&180&,&colors&:[{&r&:74,&g&:74,&b&:74,&a&:&1&,&position&:0,&align&:&top&},{&r&:74,&g&:74,&b&:74,&a&:&1&,&position&:0,&align&:&bottom&},{&r&:43,&g&:43,&b&:43,&a&:&1&,&position&:100,&align&:&bottom&},{&r&:43,&g&:43,&b&:43,&a&:&1&,&position&:100,&align&:&top&}]}"},{2:"{&type&:&linear&,&angle&:&180&,&colors&:[{&r&:219,&g&:221,&b&:222,&a&:&1&,&position&:0,&align&:&top&},{&r&:219,&g&:221,&b&:222,&a&:&1&,&position&:0,&align&:&bottom&},{&r&:137,&g&:140,&b&:144,&a&:&1&,&position&:100,&align&:&bottom&},{&r&:137,&g&:140,&b&:144,&a&:&1&,&position&:100,&align&:&top&}]}"},{3:"{&type&:&linear&,&angle&:&180&,&colors&:[{&r&:26,&g&:214,&b&:253,&a&:&1&,&position&:0,&align&:&top&},{&r&:26,&g&:214,&b&:253,&a&:&1&,&position&:0,&align&:&bottom&},{&r&:29,&g&:98,&b&:240,&a&:&1&,&position&:100,&align&:&bottom&},{&r&:29,&g&:98,&b&:240,&a&:&1&,&position&:100,&align&:&top&}]}"},{4:"{&type&:&linear&,&angle&:&180&,&colors&:[{&r&:198,&g&:68,&b&:252,&a&:&1&,&position&:0,&align&:&top&},{&r&:198,&g&:68,&b&:252,&a&:&1&,&position&:0,&align&:&bottom&},{&r&:88,&g&:86,&b&:214,&a&:&1&,&position&:100,&align&:&bottom&},{&r&:88,&g&:86,&b&:214,&a&:&1&,&position&:100,&align&:&top&}]}"},{5:"{&type&:&linear&,&angle&:&180&,&colors&:[{&r&:255,&g&:94,&b&:58,&a&:&1&,&position&:0,&align&:&top&},{&r&:255,&g&:94,&b&:58,&a&:&1&,&position&:0,&align&:&bottom&},{&r&:255,&g&:42,&b&:104,&a&:&1&,&position&:100,&align&:&bottom&},{&r&:255,&g&:42,&b&:104,&a&:&1&,&position&:100,&align&:&top&}]}"},{6:"{&type&:&linear&,&angle&:&180&,&colors&:[{&r&:228,&g&:221,&b&:202,&a&:&1&,&position&:0,&align&:&top&},{&r&:228,&g&:221,&b&:202,&a&:&1&,&position&:0,&align&:&bottom&},{&r&:214,&g&:206,&b&:195,&a&:&1&,&position&:100,&align&:&bottom&},{&r&:214,&g&:206,&b&:195,&a&:&1&,&position&:100,&align&:&top&}]}"},{7:"{&type&:&linear&,&angle&:&180&,&colors&:[{&r&:255,&g&:219,&b&:76,&a&:&1&,&position&:0,&align&:&top&},{&r&:255,&g&:219,&b&:76,&a&:&1&,&position&:0,&align&:&bottom&},{&r&:255,&g&:205,&b&:2,&a&:&1&,&position&:100,&align&:&bottom&},{&r&:255,&g&:205,&b&:2,&a&:&1&,&position&:100,&align&:&top&}]}"},{8:"{&type&:&linear&,&angle&:&180&,&colors&:[{&r&:255,&g&:149,&b&:0,&a&:&1&,&position&:0,&align&:&top&},{&r&:255,&g&:149,&b&:0,&a&:&1&,&position&:0,&align&:&bottom&},{&r&:255,&g&:94,&b&:58,&a&:&1&,&position&:100,&align&:&bottom&},{&r&:255,&g&:94,&b&:58,&a&:&1&,&position&:100,&align&:&top&}]}"},{9:"{&type&:&linear&,&angle&:&180&,&colors&:[{&r&:82,&g&:237,&b&:199,&a&:&1&,&position&:0,&align&:&top&},{&r&:82,&g&:237,&b&:199,&a&:&1&,&position&:0,&align&:&bottom&},{&r&:90,&g&:200,&b&:251,&a&:&1&,&position&:100,&align&:&bottom&},{&r&:90,&g&:200,&b&:251,&a&:&1&,&position&:100,&align&:&top&}]}"},{10:"{&type&:&linear&,&angle&:&180&,&colors&:[{&r&:228,&g&:183,&b&:240,&a&:&1&,&position&:0,&align&:&top&},{&r&:228,&g&:183,&b&:240,&a&:&1&,&position&:0,&align&:&bottom&},{&r&:200,&g&:110,&b&:223,&a&:&1&,&position&:100,&align&:&bottom&},{&r&:200,&g&:110,&b&:223,&a&:&1&,&position&:100,&align&:&top&}]}"},{11:"{&type&:&linear&,&angle&:&180&,&colors&:[{&r&:135,&g&:252,&b&:112,&a&:&1&,&position&:0,&align&:&top&},{&r&:135,&g&:252,&b&:112,&a&:&1&,&position&:0,&align&:&bottom&},{&r&:11,&g&:211,&b&:24,&a&:&1&,&position&:100,&align&:&bottom&},{&r&:11,&g&:211,&b&:24,&a&:&1&,&position&:100,&align&:&top&}]}"},{12:"{&type&:&linear&,&angle&:&180&,&colors&:[{&r&:61,&g&:78,&b&:129,&a&:&1&,&position&:0,&align&:&top&},{&r&:61,&g&:78,&b&:129,&a&:&1&,&position&:0,&align&:&bottom&},{&r&:87,&g&:83,&b&:201,&a&:&1&,&position&:50,&align&:&bottom&},{&r&:110,&g&:127,&b&:243,&a&:&1&,&position&:100,&align&:&bottom&},{&r&:110,&g&:127,&b&:243,&a&:&1&,&position&:100,&align&:&top&}]}"},{13:"{&type&:&linear&,&angle&:&160&,&colors&:[{&r&:35,&g&:21,&b&:87,&a&:&1&,&position&:0,&align&:&top&},{&r&:35,&g&:21,&b&:87,&a&:&1&,&position&:0,&align&:&bottom&},{&r&:68,&g&:16,&b&:122,&a&:&1&,&position&:29,&align&:&bottom&},{&r&:255,&g&:19,&b&:97,&a&:&1&,&position&:67,&align&:&bottom&},{&r&:255,&g&:248,&b&:0,&a&:&1&,&position&:100,&align&:&bottom&},{&r&:255,&g&:248,&b&:0,&a&:&1&,&position&:100,&align&:&top&}]}"},{14:"{&type&:&linear&,&angle&:&160&,&colors&:[{&r&:105,&g&:234,&b&:203,&a&:&1&,&position&:0,&align&:&top&},{&r&:105,&g&:234,&b&:203,&a&:&1&,&position&:0,&align&:&bottom&},{&r&:234,&g&:204,&b&:248,&a&:&1&,&position&:50,&align&:&bottom&},{&r&:102,&g&:84,&b&:241,&a&:&1&,&position&:100,&align&:&bottom&},{&r&:102,&g&:84,&b&:241,&a&:&1&,&position&:100,&align&:&top&}]}"},{15:"{&type&:&linear&,&angle&:&160&,&colors&:[{&r&:255,&g&:5,&b&:124,&a&:&1&,&position&:0,&align&:&top&},{&r&:255,&g&:5,&b&:124,&a&:&1&,&position&:0,&align&:&bottom&},{&r&:124,&g&:100,&b&:213,&a&:&1&,&position&:50,&align&:&bottom&},{&r&:76,&g&:195,&b&:255,&a&:&1&,&position&:100,&align&:&bottom&},{&r&:76,&g&:195,&b&:255,&a&:&1&,&position&:100,&align&:&top&}]}"},{16:"{&type&:&linear&,&angle&:&160&,&colors&:[{&r&:255,&g&:5,&b&:124,&a&:&1&,&position&:0,&align&:&top&},{&r&:255,&g&:5,&b&:124,&a&:&1&,&position&:0,&align&:&bottom&},{&r&:141,&g&:11,&b&:147,&a&:&1&,&position&:50,&align&:&bottom&},{&r&:50,&g&:21,&b&:117,&a&:&1&,&position&:100,&align&:&bottom&},{&r&:50,&g&:21,&b&:117,&a&:&1&,&position&:100,&align&:&top&}]}"},{17:"{&type&:&linear&,&angle&:&160&,&colors&:[{&r&:164,&g&:69,&b&:178,&a&:&1&,&position&:0,&align&:&top&},{&r&:164,&g&:69,&b&:178,&a&:&1&,&position&:0,&align&:&bottom&},{&r&:212,&g&:24,&b&:114,&a&:&1&,&position&:50,&align&:&bottom&},{&r&:255,&g&:0,&b&:102,&a&:&1&,&position&:100,&align&:&bottom&},{&r&:255,&g&:0,&b&:102,&a&:&1&,&position&:100,&align&:&top&}]}"},{18:"{&type&:&linear&,&angle&:&160&,&colors&:[{&r&:158,&g&:251,&b&:211,&a&:&1&,&position&:0,&align&:&top&},{&r&:158,&g&:251,&b&:211,&a&:&1&,&position&:0,&align&:&bottom&},{&r&:87,&g&:233,&b&:242,&a&:&1&,&position&:50,&align&:&bottom&},{&r&:69,&g&:212,&b&:251,&a&:&1&,&position&:100,&align&:&bottom&},{&r&:69,&g&:212,&b&:251,&a&:&1&,&position&:100,&align&:&top&}]}"},{19:"{&type&:&linear&,&angle&:&160&,&colors&:[{&r&:172,&g&:50,&b&:228,&a&:&1&,&position&:0,&align&:&top&},{&r&:172,&g&:50,&b&:228,&a&:&1&,&position&:0,&align&:&bottom&},{&r&:121,&g&:24,&b&:242,&a&:&1&,&position&:50,&align&:&bottom&},{&r&:72,&g&:1,&b&:255,&a&:&1&,&position&:100,&align&:&bottom&},{&r&:72,&g&:1,&b&:255,&a&:&1&,&position&:100,&align&:&top&}]}"},{20:"{&type&:&linear&,&angle&:&160&,&colors&:[{&r&:112,&g&:133,&b&:182,&a&:&1&,&position&:0,&align&:&top&},{&r&:112,&g&:133,&b&:182,&a&:&1&,&position&:0,&align&:&bottom&},{&r&:135,&g&:167,&b&:217,&a&:&1&,&position&:50,&align&:&bottom&},{&r&:222,&g&:243,&b&:248,&a&:&1&,&position&:100,&align&:&bottom&},{&r&:222,&g&:243,&b&:248,&a&:&1&,&position&:100,&align&:&top&}]}"},{21:"{&type&:&linear&,&angle&:&160&,&colors&:[{&r&:34,&g&:225,&b&:255,&a&:&1&,&position&:0,&align&:&top&},{&r&:34,&g&:225,&b&:255,&a&:&1&,&position&:0,&align&:&bottom&},{&r&:29,&g&:143,&b&:225,&a&:&1&,&position&:50,&align&:&bottom&},{&r&:98,&g&:94,&b&:177,&a&:&1&,&position&:100,&align&:&bottom&},{&r&:98,&g&:94,&b&:177,&a&:&1&,&position&:100,&align&:&top&}]}"},{22:"{&type&:&linear&,&angle&:&160&,&colors&:[{&r&:44,&g&:216,&b&:213,&a&:&1&,&position&:0,&align&:&top&},{&r&:44,&g&:216,&b&:213,&a&:&1&,&position&:0,&align&:&bottom&},{&r&:107,&g&:141,&b&:214,&a&:&1&,&position&:50,&align&:&bottom&},{&r&:142,&g&:55,&b&:215,&a&:&1&,&position&:100,&align&:&bottom&},{&r&:142,&g&:55,&b&:215,&a&:&1&,&position&:100,&align&:&top&}]}"},{23:"{&type&:&linear&,&angle&:&160&,&colors&:[{&r&:44,&g&:216,&b&:213,&a&:&1&,&position&:0,&align&:&top&},{&r&:44,&g&:216,&b&:213,&a&:&1&,&position&:0,&align&:&bottom&},{&r&:197,&g&:193,&b&:255,&a&:&1&,&position&:56,&align&:&bottom&},{&r&:255,&g&:186,&b&:195,&a&:&1&,&position&:100,&align&:&bottom&},{&r&:255,&g&:186,&b&:195,&a&:&1&,&position&:100,&align&:&top&}]}"},{24:"{&type&:&linear&,&angle&:&180&,&colors&:[{&r&:191,&g&:217,&b&:254,&a&:&1&,&position&:0,&align&:&bottom&},{&r&:191,&g&:217,&b&:254,&a&:&1&,&position&:0,&align&:&top&},{&r&:223,&g&:137,&b&:181,&a&:&1&,&position&:100,&align&:&top&},{&r&:223,&g&:137,&b&:181,&a&:&1&,&position&:100,&align&:&bottom&}]}"},{25:"{&type&:&linear&,&angle&:&340&,&colors&:[{&r&:97,&g&:97,&b&:97,&a&:&1&,&position&:0,&align&:&bottom&},{&r&:97,&g&:97,&b&:97,&a&:&1&,&position&:0,&align&:&top&},{&r&:155,&g&:197,&b&:195,&a&:&1&,&position&:100,&align&:&top&},{&r&:155,&g&:197,&b&:195,&a&:&1&,&position&:100,&align&:&bottom&}]}"},{26:"{&type&:&linear&,&angle&:&90&,&colors&:[{&r&:36,&g&:57,&b&:73,&a&:&1&,&position&:0,&align&:&bottom&},{&r&:36,&g&:57,&b&:73,&a&:&1&,&position&:0,&align&:&top&},{&r&:81,&g&:127,&b&:164,&a&:&1&,&position&:100,&align&:&top&},{&r&:81,&g&:127,&b&:164,&a&:&1&,&position&:100,&align&:&bottom&}]}"},{27:"{&type&:&linear&,&angle&:&180&,&colors&:[{&r&:234,&g&:205,&b&:163,&a&:&1&,&position&:0,&align&:&top&},{&r&:234,&g&:205,&b&:163,&a&:&1&,&position&:0,&align&:&bottom&},{&r&:230,&g&:185,&b&:128,&a&:&1&,&position&:100,&align&:&bottom&},{&r&:230,&g&:185,&b&:128,&a&:&1&,&position&:100,&align&:&top&}]}"},{28:"{&type&:&linear&,&angle&:&45&,&colors&:[{&r&:238,&g&:156,&b&:167,&a&:&1&,&position&:0,&align&:&top&},{&r&:238,&g&:156,&b&:167,&a&:&1&,&position&:0,&align&:&bottom&},{&r&:255,&g&:221,&b&:225,&a&:&1&,&position&:100,&align&:&bottom&},{&r&:255,&g&:221,&b&:225,&a&:&1&,&position&:100,&align&:&top&}]}"},{29:"{&type&:&linear&,&angle&:&340&,&colors&:[{&r&:247,&g&:148,&b&:164,&a&:&1&,&position&:0,&align&:&top&},{&r&:247,&g&:148,&b&:164,&a&:&1&,&position&:0,&align&:&bottom&},{&r&:253,&g&:214,&b&:189,&a&:&1&,&position&:100,&align&:&bottom&},{&r&:253,&g&:214,&b&:189,&a&:&1&,&position&:100,&align&:&top&}]}"},{30:"{&type&:&linear&,&angle&:&45&,&colors&:[{&r&:135,&g&:77,&b&:162,&a&:&1&,&position&:0,&align&:&top&},{&r&:135,&g&:77,&b&:162,&a&:&1&,&position&:0,&align&:&bottom&},{&r&:196,&g&:58,&b&:48,&a&:&1&,&position&:100,&align&:&bottom&},{&r&:196,&g&:58,&b&:48,&a&:&1&,&position&:100,&align&:&top&}]}"},{31:"{&type&:&linear&,&angle&:&180&,&colors&:[{&r&:243,&g&:231,&b&:233,&a&:&1&,&position&:0,&align&:&bottom&},{&r&:243,&g&:231,&b&:233,&a&:&1&,&position&:0,&align&:&top&},{&r&:218,&g&:212,&b&:236,&a&:&1&,&position&:100,&align&:&top&},{&r&:218,&g&:212,&b&:236,&a&:&1&,&position&:100,&align&:&bottom&}]}"},{32:"{&type&:&linear&,&angle&:&320&,&colors&:[{&r&:43,&g&:88,&b&:118,&a&:&1&,&position&:0,&align&:&bottom&},{&r&:43,&g&:88,&b&:118,&a&:&1&,&position&:0,&align&:&top&},{&r&:78,&g&:67,&b&:118,&a&:&1&,&position&:100,&align&:&top&},{&r&:78,&g&:67,&b&:118,&a&:&1&,&position&:100,&align&:&bottom&}]}"},{33:"{&type&:&linear&,&angle&:&60&,&colors&:[{&r&:41,&g&:50,&b&:60,&a&:&1&,&position&:0,&align&:&bottom&},{&r&:41,&g&:50,&b&:60,&a&:&1&,&position&:0,&align&:&top&},{&r&:72,&g&:85,&b&:99,&a&:&1&,&position&:100,&align&:&top&},{&r&:72,&g&:85,&b&:99,&a&:&1&,&position&:100,&align&:&bottom&}]}"},{34:"{&type&:&linear&,&angle&:&180&,&colors&:[{&r&:233,&g&:233,&b&:231,&a&:&1&,&position&:0,&align&:&top&},{&r&:233,&g&:233,&b&:231,&a&:&1&,&position&:0,&align&:&bottom&},{&r&:239,&g&:238,&b&:236,&a&:&1&,&position&:25,&align&:&bottom&},{&r&:238,&g&:238,&b&:238,&a&:&1&,&position&:70,&align&:&bottom&},{&r&:213,&g&:212,&b&:208,&a&:&1&,&position&:100,&align&:&bottom&},{&r&:213,&g&:212,&b&:208,&a&:&1&,&position&:100,&align&:&top&}]}"},{35:"{&type&:&linear&,&angle&:&180&,&colors&:[{&r&:251,&g&:200,&b&:212,&a&:&1&,&position&:0,&align&:&bottom&},{&r&:251,&g&:200,&b&:212,&a&:&1&,&position&:0,&align&:&top&},{&r&:151,&g&:149,&b&:240,&a&:&1&,&position&:100,&align&:&top&},{&r&:151,&g&:149,&b&:240,&a&:&1&,&position&:100,&align&:&bottom&}]}"}];function Ge(){this.innerHTML=ae[Ke(this,"data-text")]}function Xe(){this.setAttribute("placeholder",ae[Ke(this,"data-placeholder")])}function qe(){this.setAttribute("data-message",ae[Ke(this,"data-alert")])}function Ke(e,t){return e.getAttribute(t)||""}function Ye(t){t||(t={}),"string"==typeof t&&(t=JSON.parse(t.replace(/\&/g,'"'))),ae=e.extend({},je,t),B=ae.color,h.find("*[data-placeholder]").each(Xe),h.find("*[data-alert]").each(qe),h.find("*[data-text]").each(Ge)}function $e(t,r,i,n){var o,s,a,l,c;if(e.isPlainObject(t))for(var u in t)t.hasOwnProperty(u)&&("string"==typeof(t=t[u])?("gradient"===(t=RevColor.process(t))[1]&&(l=(s=t[2]).angle,c=s.type),t=t[0]):(l=t.angle,c=t.type),o=isNaN(u)?u.replace(/_/g," ").replace(/\b\w/g,function(e){return e.toUpperCase()}):"radial"!==c?l+"&deg;":"radial");else o=t;if("blank"!==t){e.isPlainObject(t)&&(s=t,"",t=n||RevColor.processGradient(t));var p='<span class="rev-cpicker-color tptip'+i+'" data-title="'+o+'" data-color="'+t+'"><span class="rev-cpicker-preset-tile"></span><span class="rev-cpicker-preset-bg" style="background: '+t+'"></span>';return r||(p+='<span class="rev-cpicker-delete"><span class="rev-cpicker-delete-icon"></span></span>'),a=e(p+="</span>"),s&&a.data("gradient",s),a[0]}return(a=document.createElement("span")).className="rev-cpicker-color blank",a}function Ze(){var t=Ke(this,"data-color").toLowerCase(),r=!we&&t===me.toLowerCase();if(t===ue||r){var i=e(this);return i.closest(".rev-cpicker-presets-group").find(".rev-cpicker-color.selected").removeClass("selected"),Se=i,we&&!X&&et(Se.data("gradient"),!0),Se.addClass("selected"),!1}}function Je(e,t){for(var r=document.createDocumentFragment(),i=-1!==e.search("core"),n=i?"":" rev-picker-color-custom",o=t.length,s=-1!==e.search("colors")?We:De,a=Math.max(Math.ceil(o/ze),s),l=0;l<a;l++)for(;t.length<(l+1)*ze;)t[t.length]="blank";for(o=t.length,l=0;l<o;l++)r.appendChild($e(t[l],i,n));return["rev-cpicker-"+e,r]}function Qe(e,r,i){if(be){if(!e){var n=r||C.val(),o=void 0!==i?i:fe.val();r="transparent"===n?"transparent":"100%"===o?RevColor.sanitizeHex(n):RevColor.processRgba(n,o)}var s="transparent"===r,a=s?"":r;e?g.data("state",r):x.data("state",r),s?be.css("background",a):be[0].style.background=a,c&&c(pe,r),t.trigger("revcolorpickerupdate",[pe,r])}}function et(t,i){var n=RevColor.process(t),s=n[1],a=n[0];if(o&&f.removeClass("checked"),"gradient"!==s){switch(s){case"hex":t=RevColor.sanitizeHex(a),fe.val("100%"),Tt(100);break;case"rgba":var l=RevColor.rgbaToHex(a),c=parseInt(100*l[1],10);t=l[0],fe.val(c+"%"),Tt(c);break;case"rgb":t=RevColor.rgbToHex(a),fe.val("100%"),Tt(100);break;default:$.click(),x.click()}F.val(t).change(),i||x.click()}else o?(!function(t){var i=t.angle;"radial"===t.type&&(i="radial");Z.removeClass("selected"),e('.rev-cpicker-orientation[data-direction="'+i+'"]').addClass("selected"),r.val(st(i)),wt(i),function(e){for(var t,r,i=document.createDocumentFragment(),n=e.length,o=0;o<n;o++)r=e[o],t=r.align,i.appendChild(ot(t,r.position,nt(r),it(r,t)));ie&&ie.draggable("destroy");ne.empty().append(i),ie=ne.children().draggable(Be)}(t.colors)}(n[2]),pt(),i||(ee=!0,g.click())):(F.val(RevColor.defaultValue).change(),x.click());return[a,s]}function tt(t,r){var i=function(e,t){var r,i=s.slice(),n=i.length;for(i.sort(bt);n--;)if((r=i[n]).align===e&&r.x<t)return r;n=i.length;for(var o=0;o<n;o++)if((r=i[o]).align===e&&r.x>t)return r}(t,r).color,n=it(i,t,!0),o=ot(t,r,nt(i,!0),n);N&&N.removeClass("active"),N=e(o).addClass("active").appendTo(ne).draggable(Be),E=N.children(".rev-cpicker-point-square")[0],R=N.children(".rev-cpicker-point-triangle")[0],ie=ne.children();var a=rt(r);pt(o),"bottom"===t&&S.val(a[1]).change()}function rt(e){void 0===e&&(e=s[J].x);var t=N.attr("data-color"),r=N.hasClass("rev-cpicker-point-bottom");if(r)Le.hasClass("active")&&(re.attr("disabled","disabled"),Q.attr("disabled","disabled"),Le.removeClass("active")),t=RevColor.rgbaToHex(t)[0],k.css("background",t),L.removeAttr("disabled").val(e+"%"),h.find(".rev-cpicker-point-bottom").length>2&&se.addClass("active"),h.addClass("open");else{se.hasClass("active")&&(k.css("background",""),L.attr("disabled","disabled"),se.removeClass("active"));var i=RevColor.getOpacity(t);re.attr("data-opacity",i).val(i).removeAttr("disabled"),Q.val(e+"%").removeAttr("disabled"),h.find(".rev-cpicker-point-top").length>2&&Le.addClass("active"),h.removeClass("open")}return[r,t]}function it(e,t,r){return"bottom"===t?"rgb("+e.r+","+e.g+","+e.b+")":"rgba(0, 0, 0, "+(r?"1":e.a)+")"}function nt(e,t){var r=t?"1":e.a;return"rgba("+e.r+","+e.g+","+e.b+","+r+")"}function ot(t,r,i,n){var o=document.createElement("span");return o.className="rev-cpicker-point rev-cpicker-point-"+t,"string"==typeof i?o.setAttribute("data-color",i):e(o).data("gradient",i),o.setAttribute("data-location",r),o.style.left=r+"%",o.innerHTML="bottom"===t?'<span class="rev-cpicker-point-triangle" style="border-bottom-color: '+n+'"></span><span class="rev-cpicker-point-square" style="background: '+n+'"></span>':'<span class="rev-cpicker-point-square" style="background: '+n+'"></span><span class="rev-cpicker-point-triangle" style="border-top-color: '+n+'"></span>',o}function st(e){return e&&"radial"!==e||(e="0"),z.innerHTML=e+"&deg;",z.value}function at(){N&&(N.removeClass("active"),N=!1),L.attr("disabled","disabled"),re.attr("disabled","disabled"),Q.attr("disabled","disabled"),Le.removeClass("active"),se.removeClass("active"),k.css("background",""),h.removeClass("open")}function lt(e,r){h.removeClass("active is-basic").hide(),n.removeClass("rev-colorpicker-open"),Ce.css({left:"",top:""}),M&&(M.remove(),M=!1),Se?(Se.hasClass("selected")?(r&&pe.data("hex",Se.attr("data-color").toLowerCase()),Se.removeClass("selected")):pe.removeData("hex"),Se=!1):pe.removeData("hex"),r||(P&&P(),ge&&"transparent"!==ge?be[0].style.background=ge:be.css("background",""),t.trigger("revcolorpickerupdate",[pe,ge])),be=!1,pe=!1}function ct(){var t=e(this).children(".rev-cpicker-color").not(".blank").length;return t>ze?e("#"+this.id+"-btn").addClass("multiplerows"):e("#"+this.id+"-btn").removeClass("multiplerows"),t}function ut(){if(-1===this.className.search("blank"))return T=!1,!1}function pt(e,t,i){V=t,vt(),V=!1;for(var n,o,l,c=[],u=s.length,p=0;p<u;p++)o=(l=s[p]).color,c[p]=o,(n=l.el).setAttribute("data-color",RevColor.rgbaString(o.r,o.g,o.b,o.a)),n.setAttribute("data-opacity",100*o.a),e&&e===n&&(J=p);a.hasClass("selected")?(Oe.type="radial",Oe.angle="0"):(Oe.type="linear",Oe.angle=parseInt(r.val(),10).toString()),Oe.colors=c,Se&&Se.removeClass("selected");var h=RevColor.processGradient(Oe);if(Qe(!0,h),i)return[Oe,h];j.style.background=function(e,t){var r=(e=e.split("("))[0];e.shift();var i=e.join("(").split(",");return i.shift(),r+"("+(t=void 0!==t?t+"deg,":"ellipse at center,")+i.join(",")}(h.replace("radial-","linear-"),"90"),Y.style.background=h}function ht(e,t){if(0===e)return!1;for(var r;e--;)if((r=s[e]).align!==t)return r;return!1}function dt(e,t,r){if(e===r)return!1;for(var i;e++<r;)if((i=s[e]).align!==t)return i;return!1}function ft(e,t,r,i,n){return Math.max(Math.min(Math.round(Math.abs((e-t)/(r-t)*(n-i)+i)),255),0)}function gt(e,t,r){var i,n,o,s,a,l,c=t.alpha,u=r.alpha;i=c!==u?(n=e.x,o=t.x,s=r.x,a=c,l=u,Math.max(Math.min(Math.abs(parseFloat(((n-o)/(s-o)*(l-a)).toFixed(2))+parseFloat(a)),1),0)).toFixed(2):c,e.alpha=i,e.color.a=i}function mt(e,t,r){var i=e.color,n=t.color,o=r.color;if(t!==r){var s=e.x,a=t.x,l=r.x;i.r=ft(s,a,l,n.r,o.r),i.g=ft(s,a,l,n.g,o.g),i.b=ft(s,a,l,n.b,o.b)}else i.r=n.r,i.g=n.g,i.b=n.b}function vt(){s=[],H=[],D=[],ie.each(yt),s.sort(bt);for(var e,t,r,i,n=s.length,o=n-1,a=0;a<n;a++)!1===(t=ht(a,r=(e=s[a]).align))&&(t=dt(a,r,o)),!1===(i=dt(a,r,o))&&(i=ht(a,r)),"bottom"===r?gt(e,t,i):mt(e,t,i);s.sort(bt)}function bt(e,t){return e.x<t.x?-1:e.x>t.x?1:0}function yt(e){var t=RevColor.rgbValues(Ke(this,"data-color"),4),r=-1!==this.className.search("bottom")?"bottom":"top",i=t[3].replace(/\.?0*$/,"")||0,n=parseInt(this.style.left,10);V&&(n<50?n+=2*(50-n):n-=2*(n-50),this.style.left=n+"%",this.setAttribute("data-location",n)),s[e]={el:this,x:n,alpha:i,align:r,color:{r:parseInt(t[0],10),g:parseInt(t[1],10),b:parseInt(t[2],10),a:i,position:n,align:r}},N&&N[0]!==this&&("bottom"===r?D[D.length]=n:H[H.length]=n)}function wt(e){e=void 0!==e?e:parseInt(r.val(),10),K[0].style.transform="rotate("+e+"deg)"}function kt(t,i,n){var o,s,a=void 0!==n,l=a?n:parseInt(r.val(),10);if(t&&"keyup"===t.type)o=!isNaN(l)&&l>=-360&&l<=360,s=l;else{var c=parseInt(r.data("orig-value"),10);l||(l="0"),(isNaN(l)||l<-360||l>360)&&(l=c),l!==c&&(s=l,o=!0,r.val(st(l)),a||(l=i||l,Z.removeClass("selected"),e('.rev-cpicker-orientation[data-direction="'+l+'"]').addClass("selected")))}(o||i)&&(s&&wt(s),pt())}function xt(){var t=e(this);-1!==this.className.search("down")?(t.parent().addClass("active"),t.closest(".rev-cpicker-presets").addClass("active"),e(this.id.replace("-btn","")).addClass("active"),ke=h.hasClass("gradient-view")):(t.parent().removeClass("active"),t.closest(".rev-cpicker-presets").removeClass("active"),e(this.id.replace("-btn","")).removeClass("active"),ke=!1)}function Ct(e,t){var r=parseInt(100*(Math.round(t.position.left)/(Ae-2)).toFixed(2),10);"bottom"===I?L.val(r+"%").trigger("keyup"):Q.val(r+"%").trigger("keyup")}function Lt(){var t=e(this);I=t.hasClass("rev-cpicker-point-bottom")?"bottom":"top",t.click()}function St(){"bottom"===I?L.trigger("focusout"):Q.trigger("focusout")}function Tt(e){Ne=!0,Te.slider("value",Math.round(.01*e*Fe)),Ne=!1}function Nt(e){var t=q.offset(),r=e.pageX-t.left,i=e.pageY-t.top;if(!isNaN(r)&&!isNaN(i)){var n=Math.atan2(i-He,r-He)*(180/Math.PI)+90;n<0&&(n+=360),n=Math.max(0,Math.min(360,Math.round(n))),n=5*Math.round(n/5),!0,kt(!1,!1,n),!1}}function Mt(e){e.stopImmediatePropagation()}function _t(){d||e.tpColorPicker(),Me=document.getElementById("rev-cpicker-current-edit"),Y=document.getElementById("rev-cpicker-gradient-output"),j=document.getElementById("rev-cpicker-gradient-input"),G=document.getElementById("rev-cpicker-edit-title"),z=document.createElement("textarea"),Le=e("#rev-cpicker-opacity-delete"),ne=e("#rev-cpciker-point-container"),Q=e("#rev-cpicker-opacity-location"),he=e(".rev-cpicker-presets-group"),fe=e("#rev-cpicker-color-opacity"),a=e("#rev-cpicker-orientation-radial"),se=e("#rev-cpicker-color-delete"),re=e("#rev-cpicker-grad-opacity"),L=e("#rev-cpicker-color-location"),_=e("#rev-cpicker-gradients-core"),Z=e(".rev-cpicker-orientation"),S=e("#rev-cpicker-iris-gradient"),K=e("#rev-cpicker-wheel-point"),oe=e("#rev-cpicker-gradients"),F=e("#rev-cpicker-iris-color"),g=e("#rev-cpicker-gradient-btn"),m=e("#rev-cpicker-gradient-hex"),$=e("#rev-cpciker-clear-hex"),f=e("#rev-cpicker-meta-reverse"),W=e("#rev-cpicker-hit-bottom"),Te=e("#rev-cpicker-scroll"),de=e("#rev-cpicker-colors"),C=e("#rev-cpicker-color-hex"),x=e("#rev-cpicker-color-btn"),k=e("#rev-cpicker-color-box"),r=e("#rev-cpicker-meta-angle"),q=e("#rev-cpicker-wheel"),l=e("#rev-cpicker-hit-top"),Ce=e("#rev-cpicker"),t=e(document),Be.drag=Ct,Be.stop=St,Be.start=Lt,x.data("state",de.find(".rev-cpicker-color").eq(0).attr("data-color")||"#ffffff"),g.data("state",oe.find(".rev-cpicker-color").eq(0).attr("data-color")||"linear-gradient(0deg, rgba(255, 255, 255, 1) 0%, rgba(0, 0, 0, 1) 100%)"),Ce.draggable({containment:"window",handle:".rev-cpicker-draggable",stop:function(){Ce.css("height","auto")}}),he.perfectScrollbar({wheelPropagation:!1,suppressScrollX:!0}),q.on("mousedown.revcpicker",function(e){Z.removeClass("selected"),U=!0,Nt(e)}).on("mousemove.revcpicker",function(e){U&&Nt(e)}).on("mouseleave.revcpicker mouseup.revcpicker",function(){U=!1}),e(".rev-cpicker-main-btn").on("click.revcpicker",function(){var r;if(X=-1===this.id.search("gradient"),be&&(r=e(this).data("state")),X?(be&&(ue=C.val()),h.removeClass("gradient-view").addClass("color-view")):(be&&(ue=r),h.removeClass("color-view").addClass("gradient-view"),ee||_.children(".rev-cpicker-color").not(".blank").eq(0).click()),he.perfectScrollbar("update"),r){var i="transparent"===r,n=i?"":r;i?be.css("background",n):be[0].style.background=n,we=!0,e(".rev-cpicker-color").not(".blank").each(Ze),we=!1,t.trigger("revcolorpickerupdate",[pe,r])}}),e("#rev-cpicker-check").on("click.revcipicker",function(){var r,i,n;if(h.hasClass("color-view")){var o=C.val(),s=fe.val();pe.removeData("gradient"),i="transparent"===o?"transparent":"100%"===s?RevColor.sanitizeHex(o):RevColor.processRgba(o,s),r=[pe,i,!1]}else{at();var a=pt(!1,!1,!0),l=e.extend({},a[0]),c=a[1];pe.data("gradient",c),i=JSON.stringify(l).replace(/\"/g,"&"),r=[pe,c,l]}(n=r[1]!==ge)&&(pe.attr("data-color",r[1]).val(i).change(),t.trigger("revcolorpicker",r),Pe&&Pe(r[0],r[1],r[2])),lt(0,n)}),h.on("click.revcpicker",function(t){if(h.hasClass("open")){var i=t.target,n=e(i),o=i.id,s=-1!==i.className.search("rev-cpicker-point")||"rev-cpicker-section-right"===o||-1!==o.search("hit")||n.closest("#rev-cpicker-section-right, #rev-cpicker-point-wrap").length;s&&("text"===n.attr("type")?s=!n.attr("disabled"):"rev-cpicker-check-gradient"===o&&(s=!1)),s||at()}else te&&!1===/wheel|angle|reverse/.test(t.target.id)&&(-1===t.target.id.search("radial")&&e('.rev-cpicker-orientation[data-direction="'+parseInt(r.val())+'"]').addClass("selected"),q.removeClass("active"),te=!1)}),e(".rev-cpicker-close").on("click.revcpicker",lt),F.wpColorPicker({palettes:!1,width:267,border:!1,hide:!1,change:function(e,t){var r=t.color.toString();if(this.value=r,C.val(r),!ye){var i=fe.val();0===parseInt(i,10)&&(r="transparent"),Qe(!1,r,i),Se&&(Se.removeClass("selected"),Se=!1)}}}),S.wpColorPicker({palettes:!1,height:250,border:!1,hide:!1,change:function(e,t){var r=t.color.toString();this.value=r,m.val(r),k.css("background",r),E.style.backgroundColor=r,R.style.borderBottomColor=r;var i=RevColor.processRgba(r,100),n=RevColor.rgbValues(i,4),o=Oe.colors[J];o.r=n[0],o.g=n[1],o.b=n[2],o.a=n[3],N.attr("data-color",i),pt()}}),Te.slider({orientation:"vertical",max:Fe,value:Fe,start:function(){xe="transparent"===C.val()},slide:function(e,t){if(!Ne){var r,i=parseInt(100*(t.value/Fe).toFixed(2),10);xe&&(r=i?"#ffffff":"transparent",C.val(r)),0===i&&(r="transparent"),Qe(!1,r,i||"transparent"),fe.val(i+"%")}}}),e(".rev-cpicker-point-location").on("keyup.revcpicker focusout.revcpicker",function(e){if(N){var t,r=N.hasClass("rev-cpicker-point-bottom")?"bottom":"top",i="bottom"===r?D:H,n="bottom"===r?L:Q,o=n.val().replace("%","")||"0",s=e.type;for(isNaN(o)&&(o="keyup"===s?"0":N.attr("data-location")),t=(o=Math.max(0,Math.min(100,parseInt(o,10))))<50?1:-1;-1!==i.indexOf(o);)o+=t;"focusout"===s&&(n.val(o+"%"),N.attr("data-location",o)),N.css("left",o+"%"),pt()}}).on("focusin.revcpicker",Mt),e("body").on("click.revcpicker",".rev-cpicker-point",function(){ne.find(".rev-cpicker-point.active").removeClass("active"),N=e(this).addClass("active"),E=N.children(".rev-cpicker-point-square")[0],R=N.children(".rev-cpicker-point-triangle")[0],pt(this),Se=!1;var t=rt();t[0]&&S.val(t[1]).change()}).on("mousedown.revcpicker",".rev-cpicker-point",function(t){N=e(this).data("mousestart",t.pageY)}).on("mousemove.revcpicker",function(e){if(N&&N.data("mousestart")){var t=N.data("mousestart"),r=e.pageY;N.hasClass("rev-cpicker-point-bottom")?r>t&&r-t>Re&&se.hasClass("active")?N.addClass("warning"):N.removeClass("warning"):t>r&&t-r>Re&&Le.hasClass("active")?N.addClass("warning"):N.removeClass("warning")}}).on("mouseup.revcpicker",function(e){if(N&&N.data("mousestart")){var t=N.data("mousestart"),r=e.pageY;N.removeData("mousestart"),N.hasClass("rev-cpicker-point-bottom")?r>t&&r-t>Ee&&se.hasClass("active")?se.click():N.removeClass("warning"):t>r&&t-r>Ee&&Le.hasClass("active")?Le.click():N.removeClass("warning")}}).on("change.revcpicker",".rev-cpicker-component",function(){var t=e(this),r=t.data("gradient")||t.val()||"transparent";("transparent"===r||RevColor.transparentRgba(r))&&(r=""),t.data("tpcp").css("background",r)}).on("keypress.revcpicker",function(e){if(h.hasClass("active")){var t=e.which;27==t?lt():13==t&&b&&b.blur()}}).on("click.revcpicker",".rev-cpicker-color:not(.blank)",function(){if(Se){if(Se[0]===this&&Se.hasClass("selected"))return;Se.removeClass("selected")}var t=(Se=e(this)).parent()[0].id,r=-1!==t.search("core")?"core":"custom",i=-1!==t.search("colors")?"colors":"gradients",n=e("#rev-cpicker-"+i+"-"+r+"-btn");if(n.hasClass("active")&&n.find(".rev-cpicker-arrow-up").click(),h.hasClass("color-view")){var o=Se.attr("data-color");ye=!0,F.val(o).change(),"transparent"===C.val()&&C.val(o.toLowerCase()),ye=!1;var s=fe.val();0===parseInt(s,10)&&(o="transparent"),Qe(!1,o,s)}else l.removeClass("full"),W.removeClass("full"),et(Se.data("gradient"),!0),f.removeClass("checked"),_.find(".rev-cpicker-color.selected").removeClass("selected");Se.addClass("selected")}).on("mouseover.revcpicker",".rev-cpicker-color:not(.blank)",function(){ke&&(Y.style.background=Ke(this,"data-color"))}).on("mouseout.revcpicker",".rev-cpicker-color:not(.blank)",function(){ke&&pt()}).on("click.revcpicker",".rev-cpicker-delete",function(){if(p){if(window.confirm(document.getElementById("rev-cpicker-remove-delete").innerHTML)){h.addClass("onajax onajaxdelete");var r=e(this),i=r.parent(),n=i.attr("data-title")||"";if(!n)return void console.log("Preset does not have a name/title");var o=r.closest(".rev-cpicker-presets-group")[0].id,s=-1!==o.search("colors")?"colors":"gradients";t.off("revcpicker_onajax_delete.revcpicker").on("revcpicker_onajax_delete.revcpicker",function(t,n){n&&console.log(n);var s=r.closest(".rev-cpicker-presets-group"),a=s.find(".ps-scrollbar-x-rail"),l=e("#"+o+"-btn");i.remove(),!function(){var t,r=e(this),i=-1!==this.id.search("colors")?We:De,n=r.children(".rev-cpicker-color"),o=n.length,s=Math.ceil(o/ze),a=i*ze;o+=1;for(var l=0;l<s;l++){var c=l*ze,u=n.slice(c,parseInt(c+ze,10)-1);T=!0,u.each(ut),T&&(o-=ze)>=a&&(u.remove(),t=!0)}return t}.call(s[0])?e('<span class="rev-cpicker-color blank"></span>').insertBefore(a):s.perfectScrollbar("update"),ct.call(s[0])<ze+1&&(e('<span class="rev-cpicker-color blank"></span>').insertBefore(a),l.hasClass("active")&&l.children(".rev-cpicker-arrow-up").click()),h.removeClass("onajax onajaxdelete")}),n=e.trim(n.replace(/\W+/g,"_")).replace(/^\_|\_$/g,"").toLowerCase(),p("delete",n,s,"revcpicker_onajax_delete",pe)}return!1}console.log("Ajax callback not defined")}),e(".rev-cpicker-save-preset-btn").on("click.revcpicker",function(){if(p){var r,i,n=e(this),o=n.closest(".rev-cpicker-presets-save-as").find(".rev-cpicker-preset-save").val();if(o&&isNaN(o)){if(r=h.hasClass("color-view")?"colors":"gradients",o=e.trim(o.replace(/\W+/g,"_")).replace(/^\_|\_$/g,"").toLowerCase(),e("#rev-cpicker-"+r+"-custom").find(".rev-cpicker-color").not(".blank").each(function(){if(e.trim(Ke(this,"data-title").replace(/\W+/g,"_")).replace(/^\_|\_$/g,"").toLowerCase()===o)return alert(n.attr("data-message")),i=!0,!1}),!i){h.addClass("onajax onajaxsave");var s,a,l={};if("colors"===r){var c=C.val(),u=fe.val();s="transparent"===c?"transparent":"100%"===u?RevColor.sanitizeHex(c):RevColor.processRgba(c,u)}else a=Y.style.background,s=e.extend({},pt(!1,!1,!0)[0]);l[o]=s,t.off("revcpicker_onajax_save.revcpicker").on("revcpicker_onajax_save.revcpicker",function(t,i){if(i)return h.removeClass("onajax onajaxsave"),void alert(n.attr("data-message"));var o=e($e(l,!1," rev-picker-color-custom",a)),s=e("#rev-cpicker-"+r+"-custom"),c=s.find(".rev-cpicker-color.blank"),u=e("#"+s[0].id+"-btn");c.length?o.insertBefore(c.eq(0)):o.insertBefore(s.find(".ps-scrollbar-x-rail")),e("#rev-cpicker-"+r+"-custom-btn").click(),ct.call(s[0])>6&&(c.length&&c.last().remove(),u.addClass("active").children(".rev-cpicker-arrow-down").click(),s.perfectScrollbar("update")),o.click(),h.removeClass("onajax onajaxsave")}),p("save",l,r,"revcpicker_onajax_save",pe)}}else alert(n.attr("data-message"))}else console.log("Ajax callback not defined")}),e(".rev-cpicker-preset-title").on("click.revcpicker",function(){var t=e(this),r=t.parent(),i=t.hasClass("active")?"down":"up";xt.call(t.find(".rev-cpicker-arrow-"+i)[0]),r.find(".rev-cpicker-preset-title").removeClass("selected"),t.addClass("selected"),r.find(".rev-cpicker-presets-group").hide(),document.getElementById(this.id.replace("-btn","")).style.display="block",he.perfectScrollbar("update")}),$.on("click.revcpicker",function(){fe.val("0%"),Tt(0),F.val(RevColor.defaultValue).change(),C.val("transparent"),Qe(!1,"transparent")}),h.find('input[type="text"]').on("focusin.revcpicker",function(){b=this}).on("focusout.revcpicker",function(){b=!1}),e(".rev-cpicker-input").on("focusin.revcpicker",function(){var t=e(this);t.data("orig-value",t.val())}),e(".rev-cpicker-hex").on("focusout.revcpicker",function(){var t,r;if("rev-cpicker-color-hex"===this.id){if(r=C.val())if(r=RevColor.sanitizeHex(r),RevColor.isColor.test(r))C.val(r);else{if(!(t=e(this).data("orig-value")))return void $.click();r=t,C.val(r)}else r="transparent";F.val(r).change()}else r=m.val()||RevColor.defaultValue,r=RevColor.sanitizeHex(r),RevColor.isColor.test(r)||(r=(t=e(this).data("orig-value"))||RevColor.defaultValue),m.val(r),S.val(r).change()}).on("focusin.revcpicker",Mt),e("#rev-cpciker-clear-gradient").on("click.revcpicker",function(){S.val(RevColor.defaultValue).change()}),r.on("keyup.revcpicker focusout.revcpicker",kt).on("focusin.revcpicker",function(){te=!0,q.addClass("active")}).on("focusin.revcpicker",Mt),Z.on("click.revcpicker",function(){var t=e(this),i=t.attr("data-direction");Z.removeClass("selected"),t.addClass("selected"),"radial"!==i?r.removeAttr("disabled").val(st(i)):r.attr("disabled","disabled"),kt(!1,i)}),e(".rev-cpicker-point-delete").on("click.revcpicker",function(){if(-1!==this.className.search("active")){var e=N.hasClass("rev-cpicker-point-bottom")?"bottom":"top",t=h.find(".rev-cpicker-point-"+e).length;t>2&&(N.draggable("destroy").remove(),ie=ne.children(),h.click(),pt()),t<=Ie&&("bottom"===e?W.removeClass("full"):l.removeClass("full"))}}),e(".rev-cpicker-preset-save").on("focusin.revcpicker",Mt),e(".rev-cpicker-opacity-input").on("keyup.revcpicker focusout.revcpicker",function(t){var r,i=-1===this.id.search("grad"),n=i?fe:re,o=n.val().replace("%",""),s=t.type;if(isNaN(o)&&(o="keyup"===s?"0":e(this).data("orig-value")),o=Math.max(0,Math.min(100,o)),"focusout"===s&&(n.val(o+"%"),i||N.attr("data-opacity",o)),i){Qe(!1,0===parseInt(o,10)&&"transparent",o),Tt(o)}else{var a=RevColor.rgbValues(N.attr("data-color"),3),l=Oe.colors[J];o=(.01*parseInt(o,10)).toFixed(2).replace(/\.?0*$/,""),l.r=a[0],l.g=a[1],l.b=a[2],l.a=o,r=RevColor.rgbaString(l.r,l.g,l.b,o),N.attr("data-color",r),pt(),r="rgba(0, 0, 0, "+o+")",E.style.backgroundColor=r,R.style.borderTopColor=r}}).on("focusin.revcpicker",Mt),e(".rev-cpicker-builder-hit").on("click.revcpicker",function(e){s||vt();for(var t=parseInt(100*((e.pageX-l.offset().left)/Ae).toFixed(2),10),r=-1!==this.id.search("bottom")?"bottom":"top",i="bottom"===r?D:H,n=t<50?1:-1;-1!==i.indexOf(t);)t+=n;"bottom"===r?h.find(".rev-cpicker-point-bottom").length<Ie?(tt(r,t),Se=!1):W.addClass("full"):h.find(".rev-cpicker-point-top").length<Ie?(tt(r,t),Se=!1):l.addClass("full")}),f.on("click.revcpicker",function(){!f.hasClass("checked")?f.addClass("checked"):f.removeClass("checked"),pt(!1,!0)}),e(".rev-cpicker-arrow").on("click.revcpicker",xt),i=!0}function Pt(t){var r,i,n,o,s,a=e.extend({},t),l=a.core||{},c=a.custom;!le||c?(o=4,c=(le=c)||{colors:[],gradients:[]}):o=2,l.colors||(l.colors=Ve),l.gradients||(l.gradients=Ue);for(var u=0;u<o;u++){switch(u){case 0:r="colors-core",n=l.colors;break;case 1:r="gradients-core",n=l.gradients;break;case 2:r="colors-custom",n=c.colors;break;case 3:r="gradients-custom",n=c.gradients}i=Je(r,n.slice()||[]),(s=e("#"+i[0])).find(".rev-cpicker-color").remove(),s.prepend(i[1])}}e.tpColorPicker=function(t){n||(n=e("body"),h=e('<div class="rev-cpicker-wrap color-view"><div id="rev-cpicker-back" class="rev-cpicker-close"></div><div id="rev-cpicker"><div id="rev-cpicker-head"><div id="rev-cpicker-drag" class="rev-cpicker-draggable"></div><span id="rev-cpicker-color-btn" class="rev-cpicker-main-btn" data-text="solid_color"></span><span id="rev-cpicker-gradient-btn" class="rev-cpicker-main-btn" data-text="gradient_color"></span><div id="rev-cpicker-editing" class="rev-cpicker-draggable"><span id="rev-cpicker-edit-title" data-text="currently_editing"></span><span id="rev-cpicker-current-edit"></span></div><span id="rev-cpicker-exit" class="rev-cpicker-close"></span></div><div id="rev-cpicker-section-left" class="rev-cpicker-section"><div id="rev-cpicker-body"><div id="rev-cpicker-colors" class="rev-cpicker-type"><div class="rev-cpicker-column rev-cpicker-column-left">\t<div class="rev-cpicker-column-inner-left"><div class="rev-cpicker-presets"><span id="rev-cpicker-colors-core-btn" class="rev-cpicker-preset-title rev-cpicker-preset-title-core selected"><span data-text="core_presets"></span> <span class="rev-cpicker-arrow rev-cpicker-arrow-down"></span><span class="rev-cpicker-arrow rev-cpicker-arrow-up"></span></span><span id="rev-cpicker-colors-custom-btn" class="rev-cpicker-preset-title rev-cpicker-preset-title-custom"><span data-text="custom_presets"></span> <span class="rev-cpicker-arrow rev-cpicker-arrow-down"></span><span class="rev-cpicker-arrow rev-cpicker-arrow-up"></span></span><div id="rev-cpicker-colors-core" class="rev-cpicker-presets-group"></div><div id="rev-cpicker-colors-custom" class="rev-cpicker-presets-group rev-cpicker-presets-custom"></div></div><div class="rev-cpicker-iris"><input id="rev-cpicker-iris-color" class="rev-cpicker-iris-input" value="#ffffff" /><div id="rev-cpicker-scroller" class="iris-slider iris-strip"><div id="rev-cpicker-scroll-bg"></div><div id="rev-cpicker-scroll" class="iris-slider-offset"></div></div></div></div></div><div class="rev-cpicker-column rev-cpicker-column-right"><div class="rev-cpicker-column-inner-right"><div><span data-text="save_a_new_preset"></span><div class="rev-cpicker-presets-save-as"><input type="text" class="rev-cpicker-preset-save" placeholder="" data-placeholder="enter_a_name" /><span class="rev-cpicker-btn rev-cpicker-save-preset-btn" data-alert="naming_error"><span class="rev-cpicker-save-icon"></span><span class="rev-cpicker-preset-save-text" data-text="save"></span></span></div></div><div class="rev-cpicker-meta"><span data-text="color_hex_value"></span><br><input type="text" id="rev-cpicker-color-hex" class="rev-cpicker-input rev-cpicker-hex" value="#ffffff" /><br><span data-text="opacity" class="rev-cpicker-hideable"></span><br><input type="text" id="rev-cpicker-color-opacity" class="rev-cpicker-input rev-cpicker-opacity-input rev-cpicker-hideable" value="100%" /><span id="rev-cpciker-clear-hex" class="rev-cpicker-btn rev-cpicker-btn-small rev-cpciker-clear rev-cpicker-hideable" data-text="clear"></span></div></div></div></div><div id="rev-cpicker-gradients" class="rev-cpicker-type"><div class="rev-cpicker-column rev-cpicker-column-left">\t<div class="rev-cpicker-column-inner-left"><div class="rev-cpicker-presets"><span id="rev-cpicker-gradients-core-btn" class="rev-cpicker-preset-title rev-cpicker-preset-title-core selected"><span data-text="core_presets"></span> <span class="rev-cpicker-arrow rev-cpicker-arrow-down"></span><span class="rev-cpicker-arrow rev-cpicker-arrow-up"></span></span><span id="rev-cpicker-gradients-custom-btn" class="rev-cpicker-preset-title rev-cpicker-preset-title-custom"><span data-text="custom_presets"></span> <span class="rev-cpicker-arrow rev-cpicker-arrow-down"></span><span class="rev-cpicker-arrow rev-cpicker-arrow-up"></span></span><div id="rev-cpicker-gradients-core" class="rev-cpicker-presets-group"></div><div id="rev-cpicker-gradients-custom" class="rev-cpicker-presets-group rev-cpicker-presets-custom"></div></div><div class="rev-cpicker-gradient-block"><div id="rev-cpicker-gradient-input" class="rev-cpicker-gradient-builder"><span id="rev-cpicker-hit-top" class="rev-cpicker-builder-hit"></span><div id="rev-cpicker-point-wrap"><div id="rev-cpciker-point-container"></div></div><span id="rev-cpicker-hit-bottom" class="rev-cpicker-builder-hit"></span></div><div class="rev-cpicker-meta-row-wrap"><div class="rev-cpicker-meta-row"><div><label data-text="opacity"></label><input type="text" id="rev-cpicker-grad-opacity" class="rev-cpicker-point-input rev-cpicker-opacity-input" value="100%" disabled /></div><div><label data-text="location"></label><input type="text" id="rev-cpicker-opacity-location" class="rev-cpicker-point-input rev-cpicker-point-location" value="100%" disabled /></div><div><label>&nbsp;</label><span class="rev-cpicker-btn rev-cpicker-btn-small rev-cpicker-point-delete" id="rev-cpicker-opacity-delete" data-text="delete">{{delete}}</span></div></div><div class="rev-cpicker-meta-row"><div><label data-text="color"></label><span class="rev-cpicker-point-input" id="rev-cpicker-color-box"></span></div><div><label data-text="location"></label><input type="text" id="rev-cpicker-color-location" class="rev-cpicker-point-input rev-cpicker-point-location" value="100%" disabled /></div><div><label>&nbsp;</label><span class="rev-cpicker-btn rev-cpicker-btn-small rev-cpicker-point-input rev-cpicker-point-delete" id="rev-cpicker-color-delete" data-text="delete">{{delete}}</span></div></div></div></div></div></div><div class="rev-cpicker-column rev-cpicker-column-right"><div class="rev-cpicker-column-inner-right"><div><span data-text="save_a_new_preset"></span><div class="rev-cpicker-presets-save-as"><input type="text" class="rev-cpicker-preset-save" placeholder="" data-placeholder="enter_a_name" /><span class="rev-cpicker-btn rev-cpicker-save-preset-btn" data-alert="naming_error"><span class="rev-cpicker-save-icon"></span><span class="rev-cpicker-preset-save-text" data-text="save"></span></span></div></div><div class="rev-cpicker-gradient-block"><div id="rev-cpicker-gradient-output" class="rev-cpicker-gradient-builder"></div></div><div class="rev-cpicker-meta-row-wrap"><div class="rev-cpicker-meta-row"><div><label>Orientation</label><span id="rev-cpicker-orientation-horizontal" class="rev-cpicker-btn rev-cpicker-btn-small rev-cpicker-orientation" data-direction="90" data-text="horizontal"></span><span id="rev-cpicker-orientation-vertical" class="rev-cpicker-btn rev-cpicker-btn-small rev-cpicker-orientation" data-direction="180" data-text="vertical"></span><span id="rev-cpicker-orientation-radial" class="rev-cpicker-btn rev-cpicker-btn-small rev-cpicker-orientation" data-direction="radial" data-text="radial"></span></div></div><div class="rev-cpicker-meta-row rev-cpicker-meta-row-push"><div><label data-text="enter_angle"></label><div id="rev-cpicker-angle-container"><input type="text" class="rev-cpicker-input" id="rev-cpicker-meta-angle" value="" /><div id="rev-cpicker-wheel"><div id="rev-cpicker-wheel-inner"><span id="rev-cpicker-wheel-point"></span></div></div></div></div><div><label data-text="reverse_gradient"></label><span id="rev-cpicker-meta-reverse"></span></div></div></div></div></div></div></div></div><span id="rev-cpicker-check"></span><div id="rev-cpicker-section-right" class="rev-cpicker-section"><div class="rev-cpicker-iris"><input id="rev-cpicker-iris-gradient" class="rev-cpicker-iris-input" value="#ffffff" /></div><div class="rev-cpicker-fields"><input type="text" id="rev-cpicker-gradient-hex" class="rev-cpicker-input rev-cpicker-hex" value="#ffffff" /><span id="rev-cpciker-clear-gradient" class="rev-cpicker-btn rev-cpicker-btn-small rev-cpciker-clear" data-text="clear"></span><span id="rev-cpicker-check-gradient" class="rev-cpicker-btn"></span></div></div><span id="rev-cpicker-remove-delete" data-text="delete_confirm"></span></div></div>').appendTo(n)),t||(t={}),t.core&&(t.core.colors&&(Ve=t.core.colors),t.core.gradients&&(Ue=t.core.gradients)),Pt(t),d?(he.perfectScrollbar("update"),t.mode&&(v=t.mode),t.language&&Ye(t.language)):(Ye(t.language||je),v=t.mode||"full"),t.init&&(u=t.init),t.onAjax&&(w=t.onAjax),t.onEdit&&(y=t.onEdit),t.change&&(A=t.change),t.cancel&&(O=t.cancel),t.widgetId&&(ce=t.widgetId),t.defaultValue&&(RevColor.defaultValue=t.defaultValue),t.wrapClasses&&(_e=t.wrapClasses),t.appendedHtml&&(ve=t.appendedHtml),d=!0};var Ot={refresh:function(){var t=e(this);if(t.hasClass("rev-cpicker-component")){var r=t.data("revcp")||{},i=t.val()||r.defaultValue||RevColor.defaultValue,n=RevColor.process(i);i=n[0],n="rgba"===n[1]&&RevColor.transparentRgba(i,!0)?"":i,"transparent"!==i?t.data("tpcp")[0].style.background=n:t.data("tpcp").css("background",""),t.attr("data-color",i).data("hex",i)}},destroy:function(){e(this).removeData().closest(".rev-cpicker-master-wrap").removeData().remove()}};e.fn.tpColorPicker=function(t){return t&&"string"==typeof t?this.each(Ot[t]):this.each(function(){var r=e(this);if(r.hasClass("rev-cpicker-component"))r.tpColorPicker("refresh");else{var i,n,o=e('<span class="rev-colorpicker"></span>').data("revcolorinput",r),s=e('<span class="rev-colorbox" />'),a=e('<span class="rev-colorbtn" />'),l=r.attr("data-wrap-classes"),c=r.attr("data-wrapper"),p=r.attr("data-wrap-id"),h=r.attr("data-title"),d=r.attr("data-skin"),f=r.val()||"",g=function(e){return!!/(?=.*false)(?=.*rgba)/.test(e)&&e.replace("false","1")}(f);if(g&&(f=g,r.val(g)),o.insertBefore(r).append([s,a,r]),t&&e.isPlainObject(t)){c||(c=t.wrapper),l||(l=t.wrapClasses),d||(d=t.skin),p||(p=t.wrapId),h||(h=t.title),n=t.defaultValue;var m=r.data("revcp");m&&(t=e.extend({},m,t)),r.data("revcp",t)}l||(l=_e),l&&o.addClass(l),p&&o.attr("id",p),f||(f=n||RevColor.defaultValue,r.val(f)),f=(i=RevColor.process(f))[0],3===i.length&&r.val(f),"transparent"!==(i="rgba"===i[1]&&RevColor.transparentRgba(f,!0)?"":f)&&(s[0].style.background=i),a[0].innerHTML=h||B||je.color,r.attr({type:"hidden","data-color":f}).data("tpcp",s).addClass("rev-cpicker-component"),d&&o.addClass(d),c?(c=e(c).addClass("rev-cpicker-master-wrap"),o.wrap(c)):o.addClass("rev-cpicker-master-wrap");var v=!!t&&(t.init||u);v&&v(o,r,f,t)}})},e(function(){e("body").on("click.revcpicker",".rev-colorpicker",function(){i||_t();var t,r,s,a,l,u,d,f,m,b,k,C,L,S=(pe=e(this).data("revcolorinput")).attr("data-widget-id"),T=pe.attr("data-appended-html"),N=pe.attr("data-editing"),_=pe.attr("data-colors"),I=pe.attr("data-mode"),H=pe.data("revcp"),D=pe.attr("data-lang");if(_&&((_=JSON.parse(_.replace(/\&/g,'"'))).colors&&(u=_.colors),_.gradients&&(a=_.gradients)),H){var W=H.colors;W&&(W.core&&(s=W.core.colors,t=W.core.gradients),W.custom&&(l=W.custom.colors,r=W.custom.gradients)),k=H.onEdit,C=H.onAjax,f=H.change,m=H.cancel,D||(D=H.lang),I||(I=H.mode),T||(T=H.appendedHtml),N||(N=H.editing),S||(S=H.widgetId)}(t||s||r||l||a||u)&&(d={},(t||s||a||u)&&(d.core={colors:u||s||Ve,gradients:a||t||Ue}),(r||l)&&(d.custom={colors:l||Ve,gradients:r||Ue}),Pt(d)),S||(S=ce),S&&(h[0].id=S),T||(T=ve),T&&(M=e(T).appendTo(Ce)),D&&Ye(D),I||(I=v),N?G.style.visibility="visible":(N="",G.style.visibility="hidden"),Me.innerHTML=N,"single"===I||"basic"===I?(o=!1,g.hide(),x.show(),"basic"===I&&h.addClass("is-basic")):(o=!0,g.show(),x.show()),(L=pe.val()||pe.attr("data-color")||RevColor.defaultValue).split("||").length>1&&(L=RevColor.joinToRgba(L),pe.val(L)),b=et(L),ge=b[0],c=k||y,p=C||w,P=m||O,Pe=f||A,"gradient"!==b[1]?x.data("state",ge):g.data("state",ge),n.addClass("rev-colorpicker-open"),be=pe.data("tpcp"),h.data("revcpickerinput",pe).addClass("active").show(),he.each(ct).perfectScrollbar("update"),me=pe.attr("data-color"),ue=pe.data("hex"),e(".rev-cpicker-color").not(".blank").each(Ze)})})}("undefined"!==jQuery&&jQuery);